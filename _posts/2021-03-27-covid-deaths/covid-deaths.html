<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
  <title>COVID-19: death statistics</title>

  <meta property="description" itemprop="description" content="This post is on the planning and prototyping process for one of the three sub-modules of a Shiny-based Visual Analytics Application project for the course *ISSS608 - Visual Analytics and Applications* offered in SMU MITB."/>


  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2021-04-11"/>
  <meta property="article:created" itemprop="dateCreated" content="2021-04-11"/>
  <meta name="article:author" content="amanda"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="COVID-19: death statistics"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="This post is on the planning and prototyping process for one of the three sub-modules of a Shiny-based Visual Analytics Application project for the course *ISSS608 - Visual Analytics and Applications* offered in SMU MITB."/>
  <meta property="og:locale" content="en_US"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="COVID-19: death statistics"/>
  <meta property="twitter:description" content="This post is on the planning and prototyping process for one of the three sub-modules of a Shiny-based Visual Analytics Application project for the course *ISSS608 - Visual Analytics and Applications* offered in SMU MITB."/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","URL","date","output"]}},"value":[{"type":"character","attributes":{},"value":["COVID-19: death statistics"]},{"type":"character","attributes":{},"value":["This post is on the planning and prototyping process for one of the three sub-modules of a Shiny-based Visual Analytics Application project for the course *ISSS608 - Visual Analytics and Applications* offered in SMU MITB.\n"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name"]}},"value":[{"type":"character","attributes":{},"value":["amanda"]}]}]},{"type":"character","attributes":{},"value":["https://mydatastory.netlify.app"]},{"type":"character","attributes":{},"value":["04-11-2021"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","toc_depth","toc_float"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[2]},{"type":"logical","attributes":{},"value":[true]}]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["covid-deaths_files/anchor-4.2.2/anchor.min.js","covid-deaths_files/bowser-1.9.3/bowser.min.js","covid-deaths_files/crosstalk-1.1.1/css/crosstalk.css","covid-deaths_files/crosstalk-1.1.1/js/crosstalk.js","covid-deaths_files/crosstalk-1.1.1/js/crosstalk.js.map","covid-deaths_files/crosstalk-1.1.1/js/crosstalk.min.js","covid-deaths_files/crosstalk-1.1.1/js/crosstalk.min.js.map","covid-deaths_files/distill-2.2.21/template.v2.js","covid-deaths_files/figure-html5/corr-1.png","covid-deaths_files/figure-html5/fp1-1.png","covid-deaths_files/figure-html5/fp2-1.png","covid-deaths_files/figure-html5/fp3-1.png","covid-deaths_files/figure-html5/fp4-1.png","covid-deaths_files/figure-html5/fp5-1.png","covid-deaths_files/figure-html5/fp7-1.png","covid-deaths_files/figure-html5/missing-1.png","covid-deaths_files/figure-html5/missing-upset-1.png","covid-deaths_files/figure-html5/mlr3-1.png","covid-deaths_files/figure-html5/mlr3-2.png","covid-deaths_files/figure-html5/mlr4-1.png","covid-deaths_files/figure-html5/mlr4-2.png","covid-deaths_files/figure-html5/mlr4-3.png","covid-deaths_files/figure-html5/outlier-1.png","covid-deaths_files/figure-html5/sp1-1.png","covid-deaths_files/figure-html5/sp2-1.png","covid-deaths_files/figure-html5/sp3-1.png","covid-deaths_files/figure-html5/unnamed-chunk-10-1.png","covid-deaths_files/figure-html5/unnamed-chunk-10-2.png","covid-deaths_files/figure-html5/unnamed-chunk-10-3.png","covid-deaths_files/figure-html5/unnamed-chunk-11-1.png","covid-deaths_files/figure-html5/unnamed-chunk-12-1.png","covid-deaths_files/figure-html5/unnamed-chunk-13-1.png","covid-deaths_files/figure-html5/unnamed-chunk-14-1.png","covid-deaths_files/figure-html5/unnamed-chunk-15-1.png","covid-deaths_files/figure-html5/unnamed-chunk-16-1.png","covid-deaths_files/figure-html5/unnamed-chunk-17-1.png","covid-deaths_files/figure-html5/unnamed-chunk-18-1.png","covid-deaths_files/figure-html5/unnamed-chunk-18-2.png","covid-deaths_files/figure-html5/unnamed-chunk-18-3.png","covid-deaths_files/figure-html5/unnamed-chunk-18-4.png","covid-deaths_files/figure-html5/unnamed-chunk-19-1.png","covid-deaths_files/figure-html5/unnamed-chunk-19-2.png","covid-deaths_files/figure-html5/unnamed-chunk-19-3.png","covid-deaths_files/figure-html5/unnamed-chunk-2-1.png","covid-deaths_files/figure-html5/unnamed-chunk-20-1.png","covid-deaths_files/figure-html5/unnamed-chunk-20-2.png","covid-deaths_files/figure-html5/unnamed-chunk-21-1.png","covid-deaths_files/figure-html5/unnamed-chunk-21-2.png","covid-deaths_files/figure-html5/unnamed-chunk-21-3.png","covid-deaths_files/figure-html5/unnamed-chunk-22-1.png","covid-deaths_files/figure-html5/unnamed-chunk-23-1.png","covid-deaths_files/figure-html5/unnamed-chunk-24-1.png","covid-deaths_files/figure-html5/unnamed-chunk-24-2.png","covid-deaths_files/figure-html5/unnamed-chunk-25-1.png","covid-deaths_files/figure-html5/unnamed-chunk-26-1.png","covid-deaths_files/figure-html5/unnamed-chunk-26-2.png","covid-deaths_files/figure-html5/unnamed-chunk-26-3.png","covid-deaths_files/figure-html5/unnamed-chunk-27-1.png","covid-deaths_files/figure-html5/unnamed-chunk-28-1.png","covid-deaths_files/figure-html5/unnamed-chunk-29-1.png","covid-deaths_files/figure-html5/unnamed-chunk-3-1.png","covid-deaths_files/figure-html5/unnamed-chunk-30-1.png","covid-deaths_files/figure-html5/unnamed-chunk-31-1.png","covid-deaths_files/figure-html5/unnamed-chunk-32-1.png","covid-deaths_files/figure-html5/unnamed-chunk-34-1.png","covid-deaths_files/figure-html5/unnamed-chunk-35-1.png","covid-deaths_files/figure-html5/unnamed-chunk-35-2.png","covid-deaths_files/figure-html5/unnamed-chunk-36-1.png","covid-deaths_files/figure-html5/unnamed-chunk-36-2.png","covid-deaths_files/figure-html5/unnamed-chunk-36-3.png","covid-deaths_files/figure-html5/unnamed-chunk-37-1.png","covid-deaths_files/figure-html5/unnamed-chunk-37-2.png","covid-deaths_files/figure-html5/unnamed-chunk-37-3.png","covid-deaths_files/figure-html5/unnamed-chunk-38-1.png","covid-deaths_files/figure-html5/unnamed-chunk-38-2.png","covid-deaths_files/figure-html5/unnamed-chunk-39-1.png","covid-deaths_files/figure-html5/unnamed-chunk-39-2.png","covid-deaths_files/figure-html5/unnamed-chunk-39-3.png","covid-deaths_files/figure-html5/unnamed-chunk-4-1.png","covid-deaths_files/figure-html5/unnamed-chunk-5-1.png","covid-deaths_files/figure-html5/unnamed-chunk-6-1.png","covid-deaths_files/figure-html5/unnamed-chunk-9-1.png","covid-deaths_files/figure-html5/unnamed-chunk-9-2.png","covid-deaths_files/header-attrs-2.7/header-attrs.js","covid-deaths_files/htmlwidgets-1.5.3/htmlwidgets.js","covid-deaths_files/jquery-1.11.3/jquery.min.js","covid-deaths_files/jquery-3.5.1/jquery-AUTHORS.txt","covid-deaths_files/jquery-3.5.1/jquery.js","covid-deaths_files/jquery-3.5.1/jquery.min.js","covid-deaths_files/jquery-3.5.1/jquery.min.map","covid-deaths_files/plotly-binding-4.9.3/plotly.js","covid-deaths_files/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css","covid-deaths_files/plotly-main-1.57.1/plotly-latest.min.js","covid-deaths_files/popper-2.6.0/popper.min.js","covid-deaths_files/tippy-6.2.7/tippy-bundle.umd.min.js","covid-deaths_files/tippy-6.2.7/tippy-light-border.css","covid-deaths_files/tippy-6.2.7/tippy.css","covid-deaths_files/tippy-6.2.7/tippy.umd.min.js","covid-deaths_files/typedarray-0.1/typedarray.min.js","covid-deaths_files/webcomponents-2.0.0/webcomponents.js","data/owid-covid-latest.csv","data/UID_ISO_FIPS_LookUp_Table.csv","data/UNdata_HealthExpenditure.csv","data/UNdata_HealthPersonnel.csv","data/UNDP_Intl_inbound_tourists_(thousands).csv","data/WorldBank_PopProp_0-14.csv","data/WorldBank_PopProp_14-64.csv","data/WorldBank_PopProp_65&above.csv","images/bivariate.jpg","images/currcorr.jpg","images/currfunnelplot.jpg","images/currMLR.jpg","images/currscatterplot.jpg","images/currviz.jpg","images/funnelR_output.jpg","images/multivariate.jpg"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure img {
    width: 100%;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="covid-deaths_files/header-attrs-2.7/header-attrs.js"></script>
  <script src="covid-deaths_files/htmlwidgets-1.5.3/htmlwidgets.js"></script>
  <script src="covid-deaths_files/plotly-binding-4.9.3/plotly.js"></script>
  <script src="covid-deaths_files/typedarray-0.1/typedarray.min.js"></script>
  <script src="covid-deaths_files/jquery-3.5.1/jquery.min.js"></script>
  <link href="covid-deaths_files/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
  <script src="covid-deaths_files/crosstalk-1.1.1/js/crosstalk.min.js"></script>
  <link href="covid-deaths_files/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
  <script src="covid-deaths_files/plotly-main-1.57.1/plotly-latest.min.js"></script>
  <script src="covid-deaths_files/popper-2.6.0/popper.min.js"></script>
  <link href="covid-deaths_files/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="covid-deaths_files/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="covid-deaths_files/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="covid-deaths_files/anchor-4.2.2/anchor.min.js"></script>
  <script src="covid-deaths_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="covid-deaths_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="covid-deaths_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"COVID-19: death statistics","description":"This post is on the planning and prototyping process for one of the three sub-modules of a Shiny-based Visual Analytics Application project for the course *ISSS608 - Visual Analytics and Applications* offered in SMU MITB.","authors":[{"author":"amanda","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-04-11T00:00:00.000+08:00","citationText":"amanda, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>COVID-19: death statistics</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>This post is on the planning and prototyping process for one of the three sub-modules of a Shiny-based Visual Analytics Application project for the course <em>ISSS608 - Visual Analytics and Applications</em> offered in SMU MITB.</p></p>
</div>

<div class="d-byline">
  
  amanda
  
<br/>04-11-2021
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#literature-review-of-current-visualisations-on-covid-19-deaths">Literature review of current visualisations on COVID-19 deaths</a></li>
<li><a href="#suggested-visualisations-and-r-packages">Suggested visualisations and R packages</a></li>
<li><a href="#data-preparation">Data preparation</a>
<ul>
<li><a href="#install-and-load-all-necessary-packages">Install and load all necessary packages</a></li>
<li><a href="#import-and-extract-relevant-data">Import and extract relevant data</a></li>
<li><a href="#wrangle-and-combine-the-data">Wrangle and combine the data</a></li>
<li><a href="#explore-the-data">Explore the data</a></li>
</ul></li>
<li><a href="#prototype">Prototype</a>
<ul>
<li><a href="#scatterplot">Scatterplot</a></li>
<li><a href="#funnel-plot">Funnel Plot</a></li>
<li><a href="#multivariate-analysis">Multivariate analysis</a></li>
</ul></li>
<li><a href="#storyboard-for-shiny-app">Storyboard for Shiny app</a>
<ul>
<li><a href="#bivariate-analysis">Bivariate analysis</a></li>
<li><a href="#multivariate-analysis-1">Multivariate analysis</a></li>
</ul></li>
</ul>
</nav>
</div>
<h1 id="overview">Overview</h1>
<p>In December 2019, the Coronavirus (COVID-19) has caught the world’s attention with the first COVID-19 cases reported in Wuhan, Hubei, China. Since then, the virus has spread like wildfire across the globe, with countries struggling to contain the virus to curb further spread and resurgence.</p>
<p>Experts believe that COVID-19 is less deadly but more infectious than the Severe Acute Respiratory Syndrome (SARS) virus in 2003. Although the number of deaths due to COVID-19 reached a staggering 2.85 million worldwide, its case fatality ratio or rate (defined as the proportion of deaths among a defined population of interest, in this case, the number of COVID-19 cases) is estimated at 1.4% to 3.4%, a far cry from the 9.6% of SARS and 34.3% of the lesser known Middle East Respiratory Syndrome coronavirus (MERS-CoV). Of the 2.85 million deaths, how do countries compare against each other? This assignment aims to visualise the relationships between health, economic and population structure indicators with COVID-19 deaths across countries.</p>
<h1 id="literature-review-of-current-visualisations-on-covid-19-deaths">Literature review of current visualisations on COVID-19 deaths</h1>
<p>Most visualisations report the death toll by location using geo-spatial, time-series and/or in tabular form (see Figure 1).</p>
<figure>
<img src="images/currviz.jpg" alt="Figure 1: Current visualisations on COVID-19 deaths. (a) Choropleth map of cumulative confirmed deaths per million people. Source: https://ourworldindata.org/covid-deaths  (b) Proportional symbol map showing the case fatality ratio by location. Actual numbers are reported on the right side panel. Source: https://coronavirus.jhu.edu/map.html  (c) Time-series of cumulative confirmed deaths per million people. Countries can be added or removed. Source: https://ourworldindata.org/covid-deaths  (d) Table with horizontal bar charts and another time-series visualisation on the deaths reported per day. Source: https://pandemic.internationalsos.com/2019-ncov/covid-19-data-visualisation" /><figcaption aria-hidden="true">Figure 1: Current visualisations on COVID-19 deaths.<br><em>(a)</em> Choropleth map of cumulative confirmed deaths per million people.<br>Source: <a href="https://ourworldindata.org/covid-deaths" class="uri">https://ourworldindata.org/covid-deaths</a> <br><em>(b)</em> Proportional symbol map showing the case fatality ratio by location. Actual numbers are reported on the right side panel.<br>Source: <a href="https://coronavirus.jhu.edu/map.html" class="uri">https://coronavirus.jhu.edu/map.html</a> <br><em>(c)</em> Time-series of cumulative confirmed deaths per million people. Countries can be added or removed.<br>Source: <a href="https://ourworldindata.org/covid-deaths" class="uri">https://ourworldindata.org/covid-deaths</a> <br><em>(d)</em> Table with horizontal bar charts and another time-series visualisation on the deaths reported per day.<br>Source: <a href="https://pandemic.internationalsos.com/2019-ncov/covid-19-data-visualisation" class="uri">https://pandemic.internationalsos.com/2019-ncov/covid-19-data-visualisation</a></figcaption>
</figure>
<p>These visualisations focus on comparing countries based on the number of deaths or case fatality rates. Comparisons are made based on visual encodings such as colour and size of data points. When used appropriately, users are able to perceive the information effectively (Figure 1-a to c). We can see that there is a lot of visual clutter when more countries are added, as seen in the time-series graph in Figure 1-d.</p>
<p>More details on number of deaths for individual countries are also provided via interactivity in some visualisations (see Figure 1-c for example). However, the comparisons are limited to the countries selected and it could be challenging to make comparisons when more countries are added. On the other hand, the table provides a single-view of the details across countries in descending order, but the numbers could be overwhelming for users to process even with the horizontal bar charts. Furthermore, a tabular layout makes it difficult to compare specific countries of interest.</p>
<p>There are lesser analyses that compare deaths or case fatality with other indicators. Some analyses study the impact of COVID-19 on the indicators while others study the impact of the indicators on the COVID-19 numbers. The review will focus on the analysis or visualisations used, which can potentially be employed to both types of analyses.</p>
<h4 id="scatterplot-of-economic-indicators-against-number-of-deaths-per-million">Scatterplot of economic indicators against number of deaths per million</h4>
<figure>
<img src="images/currscatterplot.jpg" alt="Figure 2: Scatterplot on change in GDP per capita against deaths per million. Source: https://theconversation.com/data-from-45-countries-show-containing-covid-vs-saving-the-economy-is-a-false-dichotomy-150533" /><figcaption aria-hidden="true">Figure 2: Scatterplot on change in GDP per capita against deaths per million.<br>Source: <a href="https://theconversation.com/data-from-45-countries-show-containing-covid-vs-saving-the-economy-is-a-false-dichotomy-150533" class="uri">https://theconversation.com/data-from-45-countries-show-containing-covid-vs-saving-the-economy-is-a-false-dichotomy-150533</a></figcaption>
</figure>
<p>The scatterplot is useful in showing the relationship between two independent variables. In this scatterplot, size and colour scales are used to encode number of deaths and continent respectively. The size of the data points are not obvious from the graph due to the size range used, the 3-character country code labels and the choice of colour for Europe (the green stands out too much). The overlap in data points belonging to the same continent also make it difficult to identify the data points. There is no interactivity in this visualisation.</p>
<h4 id="funnel-plot-of-case-fatality-rate-against-number-of-confirmed-cases">Funnel plot of case fatality rate against number of confirmed cases</h4>
<p>There are two similar visualisations created specifically for COVID-19 case fatality rate for counties in the US by a SAS researcher Rick Wicklin (see Figure 3). Unlike the time-series, geo-spatial and tabular visualisations where users make comparisons based on the face-value of the numbers, the funnel plot seeks to highlight any anomalies from the expected range of the numerical values based on statistical concepts. Note that the factors plotted on a funnel plot are dependent on each other, i.e. the number of confirmed cases is used to calculate the case fatality rate.</p>
<figure>
<img src="images/currfunnelplot.jpg" alt="Figure 3: Funnel plot on case fatality rate against number of confirmed cases. Source: https://blogs.sas.com/content/iml/2020/04/22/funnel-plot-covid-us.html" /><figcaption aria-hidden="true">Figure 3: Funnel plot on case fatality rate against number of confirmed cases.<br>Source: <a href="https://blogs.sas.com/content/iml/2020/04/22/funnel-plot-covid-us.html" class="uri">https://blogs.sas.com/content/iml/2020/04/22/funnel-plot-covid-us.html</a></figcaption>
</figure>
<p>The drawback of the visualisations is that the funnel plots are static with no interactivity: users are unable to identify the other data points that are not labelled by the author.</p>
<h4 id="tabular-presentation-of-correlation-index-between-socio-economic-indicators-and-number-of-deaths-per-million">Tabular presentation of correlation index between socio-economic indicators and number of deaths per million</h4>
<p>The study “Rich at risk: socio-economic drivers of COVID-19 pandemic spread” by Gangemi, S., Billeci, L. &amp; Tonacci, A. (2020) seeks to understand the spread of the COVID-19 virus driven by socio-economic factors and long-distance transportations. The results are presented in a table (see Figure 4). Although the presentation of the results are not visually appealing, this study sheds light on the current analysis performed for COVID-19 deaths.</p>
<figure>
<img src="images/currcorr.jpg" alt="Figure 4: Table of correlations between socio-economic indicators and number of cases per million and number of deaths per million. Source: https://clinicalmolecularallergy.biomedcentral.com/articles/10.1186/s12948-020-00127-4" /><figcaption aria-hidden="true">Figure 4: Table of correlations between socio-economic indicators and number of cases per million and number of deaths per million.<br>Source: <a href="https://clinicalmolecularallergy.biomedcentral.com/articles/10.1186/s12948-020-00127-4" class="uri">https://clinicalmolecularallergy.biomedcentral.com/articles/10.1186/s12948-020-00127-4</a></figcaption>
</figure>
<h4 id="scatterplot-with-fit-line-and-regression-model-summary-table-to-predict-number-of-new-deaths">Scatterplot with fit line and regression model summary table to predict number of new deaths</h4>
<p>The visualisations discussed thus far are bivariate in nature: analysis of each factor with the number of deaths. There are very few multivariate analysis done, and of those conducted, most of them are presented in tabular form or described in text. There is one study on regression models to predict the number of COVID-19 new deaths, which presents its findings visually in the research paper (see Figure 5).</p>
<figure>
<img src="images/currMLR.jpg" alt="Figure 5: (Left) Table showing the regression models summaries and parameter estimates to predict new COVID-19 deaths. (Right) Scatterplot with fit lines comparing the regression models built to predict new COVID-19 deaths by day. Source: https://www.medrxiv.org/content/10.1101/2020.09.04.20188094v1.full.pdf" /><figcaption aria-hidden="true">Figure 5: <em>(Left)</em> Table showing the regression models summaries and parameter estimates to predict new COVID-19 deaths. <em>(Right)</em> Scatterplot with fit lines comparing the regression models built to predict new COVID-19 deaths by day.<br>Source: <a href="https://www.medrxiv.org/content/10.1101/2020.09.04.20188094v1.full.pdf" class="uri">https://www.medrxiv.org/content/10.1101/2020.09.04.20188094v1.full.pdf</a></figcaption>
</figure>
<p>Although the intention of the assignment is an exploratory analysis, we can still gain some insights from the visualisation used in this predictive regression analysis. It is noted that the regression models built are to predict the number of new deaths by day for a particular location, Ethiopia, solely based on COVID-19 related indicators. The scatterplot with fit lines allows users to visually compare the different regression models built. There is no interactivity in this graph as it is used for reporting purposes.</p>
<h1 id="suggested-visualisations-and-r-packages">Suggested visualisations and R packages</h1>
<p>There are gaps in the current visualisations in supporting the intended analysis of this assignment. The majority of interactive visualisations are univariate presented on maps or in time series, while the bivariate and multivariate analysis of the country indicators and the number of deaths are largely static.</p>
<p>In this assignment, we will attempt to create interactive visualisations for bivariate (scatterplot and funnel plot) and multivariate analysis (multiple linear regression) of the number of deaths due to COVID-19 with selected health-socio-economic indicators across countries. The focus will be on the cumulative or total number of deaths, so that more meaningful relationships can be observed between the COVID-19 related data and national aggregate indicators.</p>
<p>The following R packages will be explored:</p>
<table>
<thead>
<tr class="header">
<th>Visualisation</th>
<th>Packages</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Scatterplot</td>
<td><em>ggstatsplot</em>, <em>car</em>, <em>ggplot</em></td>
</tr>
<tr class="even">
<td>Funnel Plot</td>
<td><em>FunnelPlotR</em>, <em>funnelR</em>, <em>ggplot</em></td>
</tr>
<tr class="odd">
<td>Multivariate Analysis</td>
<td><em>olsrr</em></td>
</tr>
<tr class="even">
<td>Interactivity</td>
<td><em>plotly</em></td>
</tr>
</tbody>
</table>
<h1 id="data-preparation">Data preparation</h1>
<p>All data extraction and wrangling are done in R using the <em>tidyverse</em> suite of packages.</p>
<h2 id="install-and-load-all-necessary-packages">Install and load all necessary packages</h2>
<p>Besides the mentioned packages, the following packages are also loaded:</p>
<ul>
<li><em>mlr</em>: for data exploration with <code>summarizeColumns()</code></li>
<li><em>naniar</em>: for visualisation of missing values with <code>gg_miss_upset()</code></li>
<li><em>VIM</em>: for imputation of missing values with <code>kNN()</code></li>
<li><em>gridExtra</em>: for handling of multiple plots with <code>grid.arrange()</code></li>
<li><em>corrr</em>: for visualisation of correlation with <code>correlate()</code> and <code>rplot()</code></li>
<li><em>ggExtra</em>: for plotting of scatterplot with marginal distribution with <code>ggMarginal()</code></li>
</ul>
<p>The code chunk below is used to install and load the packages.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>packages</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'tidyverse'</span>, <span class='st'>'mlr'</span>, <span class='st'>'naniar'</span>,<span class='st'>'VIM'</span>, <span class='st'>'gridExtra'</span>, <span class='st'>'corrr'</span>,
             <span class='st'>'ggstatsplot'</span>, <span class='st'>'car'</span>, <span class='st'>'ggExtra'</span>,
             <span class='st'>'FunnelPlotR'</span>, <span class='st'>'funnelR'</span>,
             <span class='st'>'olsrr'</span>,
             <span class='st'>'plotly'</span><span class='op'>)</span>
<span class='kw'>for</span><span class='op'>(</span><span class='va'>p</span> <span class='kw'>in</span> <span class='va'>packages</span><span class='op'>)</span><span class='op'>{</span>
  <span class='kw'>if</span><span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
  <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='va'>p</span><span class='op'>)</span>
  <span class='op'>}</span>
  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<h2 id="import-and-extract-relevant-data">Import and extract relevant data</h2>
<p>Data by country is obtained from various sources, as shown in the following table:</p>
<table>
<colgroup>
<col style="width: 68%" />
<col style="width: 31%" />
</colgroup>
<thead>
<tr class="header">
<th><img width=200> Data source</th>
<th><img width=350> Data</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Our World in Data (owid)</td>
<td>COVID-19 tests, positive rates, country to latitude-longitude coordinates mapping</td>
</tr>
<tr class="even">
<td>John Hopkins University (JHU)</td>
<td>COVID-19 cases, deaths</td>
</tr>
<tr class="odd">
<td>World Bank</td>
<td>Population age structure, GDP per capita, poverty indicator</td>
</tr>
<tr class="even">
<td>UNdata</td>
<td>Health expenditure, healthcare facilities and capacity indicators</td>
</tr>
<tr class="odd">
<td>United Nations Development Programme (UNDP)</td>
<td>Human Development Index (HDI), international inbound tourists</td>
</tr>
</tbody>
</table>
<p>The data is stored across eight files and <code>read_csv()</code> is used to import and extract the relevant columns from each file into R.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>covid</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"./data/owid-covid-latest.csv"</span>,
                         col_types <span class='op'>=</span> <span class='fu'>cols_only</span><span class='op'>(</span>
                           <span class='st'>"iso_code"</span> <span class='op'>=</span> <span class='st'>"c"</span>,
                           <span class='st'>"continent"</span> <span class='op'>=</span> <span class='st'>"c"</span>,
                           <span class='st'>"location"</span> <span class='op'>=</span> <span class='st'>"c"</span>,
                           <span class='st'>"last_updated_date"</span> <span class='op'>=</span> <span class='st'>"D"</span>,
                           <span class='st'>"total_cases"</span> <span class='op'>=</span> <span class='st'>"n"</span>,
                           <span class='st'>"total_deaths"</span> <span class='op'>=</span> <span class='st'>"n"</span>,
                           <span class='st'>"total_tests"</span> <span class='op'>=</span> <span class='st'>"n"</span>,
                           <span class='st'>"positive_rate"</span> <span class='op'>=</span> <span class='st'>"n"</span>,
                           <span class='st'>"test_units"</span> <span class='op'>=</span> <span class='st'>"c"</span>,
                           <span class='st'>"population"</span> <span class='op'>=</span> <span class='st'>"n"</span>,
                           <span class='st'>"population_density"</span> <span class='op'>=</span> <span class='st'>"n"</span>,
                           <span class='st'>"gdp_per_capita"</span> <span class='op'>=</span> <span class='st'>"n"</span>,
                           <span class='st'>"extreme_poverty"</span> <span class='op'>=</span> <span class='st'>"n"</span>,
                           <span class='st'>"handwashing_facilities"</span> <span class='op'>=</span> <span class='st'>"n"</span>,
                           <span class='st'>"hospital_beds_per_thousand"</span> <span class='op'>=</span> <span class='st'>"n"</span>,
                           <span class='st'>"human_development_index"</span> <span class='op'>=</span> <span class='st'>"n"</span><span class='op'>)</span>,
                         locale <span class='op'>=</span> <span class='fu'>locale</span><span class='op'>(</span>date_format <span class='op'>=</span> <span class='st'>"%Y-%m-%d"</span><span class='op'>)</span>
                         <span class='op'>)</span>

<span class='va'>health_exp</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"./data/UNdata_HealthExpenditure.csv"</span>,
                       skip <span class='op'>=</span> <span class='fl'>2</span>,
                       col_names <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"region/country/area"</span>,<span class='st'>"year_exp"</span>,<span class='st'>"series"</span>,<span class='st'>"percentage"</span><span class='op'>)</span>,
                       col_types <span class='op'>=</span> <span class='st'>"_cncn__"</span><span class='op'>)</span>

<span class='va'>health_personnel</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"./data/UNdata_HealthPersonnel.csv"</span>,
                       skip <span class='op'>=</span> <span class='fl'>2</span>,
                       col_names <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"region/country/area"</span>,<span class='st'>"year_personnel"</span>,<span class='st'>"series"</span>,<span class='st'>"value"</span><span class='op'>)</span>,
                       col_types <span class='op'>=</span> <span class='st'>"_cncn__"</span><span class='op'>)</span>

<span class='va'>pop_prop</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>list.files</a></span><span class='op'>(</span>path<span class='op'>=</span><span class='st'>"./data/"</span>, pattern<span class='op'>=</span><span class='st'>"WorldBank_PopProp_"</span>, full.names <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>map_df</span><span class='op'>(</span><span class='op'>~</span><span class='fu'>read_csv</span><span class='op'>(</span><span class='va'>.</span>,
                   skip <span class='op'>=</span> <span class='fl'>4</span>,
                   col_types <span class='op'>=</span> <span class='fu'>cols_only</span><span class='op'>(</span>
                     <span class='st'>"Country Name"</span> <span class='op'>=</span> <span class='st'>"c"</span>,
                     <span class='st'>"Indicator Name"</span> <span class='op'>=</span> <span class='st'>"c"</span>,
                     <span class='st'>"2019"</span> <span class='op'>=</span> <span class='st'>"n"</span><span class='op'>)</span>
                   <span class='op'>)</span>
         <span class='op'>)</span>

<span class='va'>intl_tourists</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"./data/UNDP_Intl_inbound_tourists_(thousands).csv"</span>,
                          skip <span class='op'>=</span> <span class='fl'>6</span>,
                          col_types <span class='op'>=</span> <span class='st'>"_c________________________n_"</span>,
                          na <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>".."</span><span class='op'>)</span>
                          <span class='op'>)</span>

<span class='va'>geo_lookup</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"./data/UID_ISO_FIPS_LookUp_Table.csv"</span>,
                       col_types <span class='op'>=</span> <span class='st'>"c_c_____nn__"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nchar.html'>nchar</a></span><span class='op'>(</span><span class='va'>UID</span><span class='op'>)</span> <span class='op'>&lt;=</span> <span class='fl'>3</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>select</span><span class='op'>(</span><span class='va'>iso3</span>, <span class='va'>Lat</span>, <span class='va'>Long_</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>rename</span><span class='op'>(</span><span class='st'>"lat"</span> <span class='op'>=</span> <span class='st'>"Lat"</span>, <span class='st'>"long"</span> <span class='op'>=</span> <span class='st'>"Long_"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="wrangle-and-combine-the-data">Wrangle and combine the data</h2>
<p>Before combining the data frames into one main data frame for analysis, we need to explore and prepare each data frame.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Population age structure data</span>
<span class='va'>pop_prop_cleaned</span> <span class='op'>&lt;-</span> <span class='fu'>pivot_wider</span><span class='op'>(</span><span class='va'>pop_prop</span>, names_from <span class='op'>=</span> <span class='st'>"Indicator Name"</span>, values_from <span class='op'>=</span> <span class='st'>"2019"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>rename</span><span class='op'>(</span><span class='st'>"0_to_14(%)"</span> <span class='op'>=</span> <span class='st'>"Population ages 0-14 (% of total population)"</span>,
         <span class='st'>"15_to_64(%)"</span> <span class='op'>=</span> <span class='st'>"Population ages 15-64 (% of total population)"</span>,
         <span class='st'>"65_and_above(%)"</span> <span class='op'>=</span> <span class='st'>"Population ages 65 and above (% of total population)"</span><span class='op'>)</span>

<span class='co'># International inbound tourists arrival data</span>
<span class='va'>intl_tourists_cleaned</span> <span class='op'>&lt;-</span> <span class='fu'>rename</span><span class='op'>(</span><span class='va'>intl_tourists</span>,
                        <span class='st'>"annual_intl_arrivals_thousands"</span> <span class='op'>=</span> <span class='st'>"2011-2018"</span><span class='op'>)</span>

<span class='co'># Number of physicians data</span>
<span class='va'>health_personnel_phy</span> <span class='op'>&lt;-</span> <span class='va'>health_personnel</span> <span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>`region/country/area`</span>, <span class='va'>`series`</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>slice</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/which.min.html'>which.max</a></span><span class='op'>(</span><span class='va'>`year_personnel`</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>`series`</span> <span class='op'>==</span> <span class='st'>"Health personnel: Physicians (per 1000 population)"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>pivot_wider</span><span class='op'>(</span>names_from <span class='op'>=</span> <span class='st'>"series"</span>, values_from <span class='op'>=</span> <span class='st'>"value"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>rename</span><span class='op'>(</span><span class='st'>"num_physicians_per_thousand"</span> <span class='op'>=</span> <span class='st'>"Health personnel: Physicians (per 1000 population)"</span><span class='op'>)</span>

<span class='co'># Health expenditure data</span>
<span class='va'>health_exp_cleaned</span> <span class='op'>&lt;-</span> <span class='va'>health_exp</span> <span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>`region/country/area`</span>, <span class='va'>`series`</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>slice</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/which.min.html'>which.max</a></span><span class='op'>(</span><span class='va'>`year_exp`</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>pivot_wider</span><span class='op'>(</span>names_from <span class='op'>=</span> <span class='st'>"series"</span>, values_from <span class='op'>=</span> <span class='st'>"percentage"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>rename</span><span class='op'>(</span><span class='st'>"current_health_exp_%gdp"</span> <span class='op'>=</span> <span class='st'>"Current health expenditure (% of GDP)"</span>,
         <span class='st'>"govt_health_exp_%totalgovtexp"</span> <span class='op'>=</span> <span class='st'>"Domestic general government health expenditure (% of total government expenditure)"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>After cleaning the individual data frames, we can now combine and store the data in a single data frame, and drop any unnecessary columns for subsequent analysis.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>covid_deaths</span> <span class='op'>&lt;-</span> <span class='va'>covid</span> <span class='op'>%&gt;%</span>
  <span class='fu'>left_join</span><span class='op'>(</span><span class='va'>pop_prop_cleaned</span>, by <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"location"</span> <span class='op'>=</span> <span class='st'>"Country Name"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>left_join</span><span class='op'>(</span><span class='va'>intl_tourists_cleaned</span>, by<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"location"</span> <span class='op'>=</span> <span class='st'>"Country"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>left_join</span><span class='op'>(</span><span class='va'>health_personnel_phy</span>, by<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"location"</span> <span class='op'>=</span> <span class='st'>"region/country/area"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>left_join</span><span class='op'>(</span><span class='va'>health_exp_cleaned</span>, by<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"location"</span> <span class='op'>=</span> <span class='st'>"region/country/area"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>left_join</span><span class='op'>(</span><span class='va'>geo_lookup</span>, by<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"iso_code"</span> <span class='op'>=</span> <span class='st'>"iso3"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>case_fatality_rate <span class='op'>=</span> <span class='va'>total_deaths</span><span class='op'>/</span><span class='va'>total_cases</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>continent</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>select</span><span class='op'>(</span><span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"iso_code"</span>,<span class='st'>"last_updated_date"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>As the data for number of physicians are taken across different years, the code chunk below extracts and presents the most recent year in which the number of physicians were available for each country.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>personnel_data</span> <span class='op'>&lt;-</span> <span class='va'>covid_deaths</span> <span class='op'>%&gt;%</span>
  <span class='fu'>select</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"location"</span>, <span class='st'>"year_personnel"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>pivot_wider</span><span class='op'>(</span>names_from <span class='op'>=</span> <span class='st'>"year_personnel"</span>, 
              values_from <span class='op'>=</span> <span class='st'>"location"</span>, 
              names_sep <span class='op'>=</span> <span class='st'>", "</span><span class='op'>)</span>

<span class='fu'>glimpse</span><span class='op'>(</span><span class='va'>personnel_data</span><span class='op'>[</span>,<span class='fu'><a href='https://rdrr.io/r/base/order.html'>order</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>personnel_data</span><span class='op'>)</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 1
Columns: 9
$ `2010` &lt;list&gt; &quot;Lesotho&quot;
$ `2011` &lt;list&gt; &lt;&quot;Congo&quot;, &quot;Dominican Republic&quot;, &quot;Sierra Leone&quot;&gt;
$ `2012` &lt;list&gt; &quot;Marshall Islands&quot;
$ `2014` &lt;list&gt; &lt;&quot;Azerbaijan&quot;, &quot;Cambodia&quot;, &quot;Djibouti&quot;, &quot;Kazakhstan&quot;,~
$ `2015` &lt;list&gt; &lt;&quot;Andorra&quot;, &quot;Bahrain&quot;, &quot;Belarus&quot;, &quot;Bosnia and Herzeg~
$ `2016` &lt;list&gt; &lt;&quot;Afghanistan&quot;, &quot;Albania&quot;, &quot;Botswana&quot;, &quot;Cameroon&quot;, &quot;~
$ `2017` &lt;list&gt; &lt;&quot;Angola&quot;, &quot;Antigua and Barbuda&quot;, &quot;Argentina&quot;, &quot;Arme~
$ `2018` &lt;list&gt; &lt;&quot;Algeria&quot;, &quot;Bangladesh&quot;, &quot;Benin&quot;, &quot;Bhutan&quot;, &quot;Brazil~
$ `NA`   &lt;list&gt; &lt;&quot;Anguilla&quot;, &quot;Bermuda&quot;, &quot;Bolivia&quot;, &quot;Brunei&quot;, &quot;Cape V~</code></pre>
</div>
<p>Next, we will reorder the columns to group similar variables.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>col_order</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"continent"</span>, <span class='st'>"location"</span>,
               <span class='st'>"lat"</span>, <span class='st'>"long"</span>,
               <span class='st'>"total_cases"</span>, <span class='st'>"total_deaths"</span>, <span class='st'>"case_fatality_rate"</span>, <span class='st'>"total_tests"</span>, <span class='st'>"positive_rate"</span>,
               <span class='st'>"hospital_beds_per_thousand"</span>, <span class='st'>"num_physicians_per_thousand"</span>, <span class='st'>"year_personnel"</span>, <span class='st'>"handwashing_facilities"</span>,
               <span class='st'>"gdp_per_capita"</span>, <span class='st'>"current_health_exp_%gdp"</span>, <span class='st'>"govt_health_exp_%totalgovtexp"</span>,
               <span class='st'>"population"</span>, <span class='st'>"population_density"</span>, <span class='st'>"0_to_14(%)"</span>, <span class='st'>"15_to_64(%)"</span>, <span class='st'>"65_and_above(%)"</span>,
               <span class='st'>"extreme_poverty"</span>, <span class='st'>"human_development_index"</span>,
               <span class='st'>"annual_intl_arrivals_thousands"</span><span class='op'>)</span>

<span class='va'>covid_deaths</span> <span class='op'>&lt;-</span> <span class='va'>covid_deaths</span><span class='op'>[</span>, <span class='va'>col_order</span><span class='op'>]</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>select</span><span class='op'>(</span><span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"year_personnel"</span><span class='op'>)</span><span class='op'>)</span>

<span class='fu'>glimpse</span><span class='op'>(</span><span class='va'>covid_deaths</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 202
Columns: 23
$ continent                       &lt;chr&gt; &quot;Asia&quot;, &quot;Europe&quot;, &quot;Africa&quot;, ~
$ location                        &lt;chr&gt; &quot;Afghanistan&quot;, &quot;Albania&quot;, &quot;A~
$ lat                             &lt;dbl&gt; 33.93911, 41.15330, 28.03390~
$ long                            &lt;dbl&gt; 67.709953, 20.168300, 1.6596~
$ total_cases                     &lt;dbl&gt; 56290, 123641, 116750, 11809~
$ total_deaths                    &lt;dbl&gt; 2469, 2204, 3077, 115, 533, ~
$ case_fatality_rate              &lt;dbl&gt; 0.043862142, 0.017825802, 0.~
$ total_tests                     &lt;dbl&gt; NA, 517102, NA, 162071, NA, ~
$ positive_rate                   &lt;dbl&gt; NA, 0.173, NA, 0.094, NA, NA~
$ hospital_beds_per_thousand      &lt;dbl&gt; 0.50, 2.89, 1.90, NA, NA, NA~
$ num_physicians_per_thousand     &lt;dbl&gt; 2.78, 12.16, 17.19, 33.33, 2~
$ handwashing_facilities          &lt;dbl&gt; 37.746, NA, 83.741, NA, 26.6~
$ gdp_per_capita                  &lt;dbl&gt; 1803.987, 11803.431, 13913.8~
$ `current_health_exp_%gdp`       &lt;dbl&gt; 11.7772, NA, 6.3743, 10.3206~
$ `govt_health_exp_%totalgovtexp` &lt;dbl&gt; 2.3191, 14.6789, 10.7341, 14~
$ population                      &lt;dbl&gt; 38928341, 2877800, 43851043,~
$ population_density              &lt;dbl&gt; 54.422, 104.871, 17.348, 163~
$ `0_to_14(%)`                    &lt;dbl&gt; 42.47227, 17.39956, 30.55038~
$ `15_to_64(%)`                   &lt;dbl&gt; 54.91193, 68.39781, 62.89684~
$ `65_and_above(%)`               &lt;dbl&gt; 2.615794, 14.202631, 6.55277~
$ extreme_poverty                 &lt;dbl&gt; NA, 1.1, 0.5, NA, NA, NA, NA~
$ human_development_index         &lt;dbl&gt; 0.511, 0.795, 0.748, 0.868, ~
$ annual_intl_arrivals_thousands  &lt;dbl&gt; NA, 5340, 2657, 3042, 218, N~</code></pre>
</div>
<p>The base dataset is ready for the next step on data exploration. Before we move on to the next step, we will clear the R environment to free up memory space with the following code chunk:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span><span class='op'>(</span>list <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sets.html'>setdiff</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ls.html'>ls</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='st'>"covid_deaths"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="explore-the-data">Explore the data</h2>
<p>Let us take a look at a summary of the data.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>summarizeColumns</span><span class='op'>(</span><span class='va'>covid_deaths</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>                             name      type  na         mean
1                       continent character   0           NA
2                        location character   0           NA
3                             lat   numeric   3 1.985526e+01
4                            long   numeric   3 1.829348e+01
5                     total_cases   numeric  12 6.669787e+05
6                    total_deaths   numeric  22 1.542956e+04
7              case_fatality_rate   numeric  22 2.056034e-02
8                     total_tests   numeric  96 1.406837e+07
9                   positive_rate   numeric  93 9.666972e-02
10     hospital_beds_per_thousand   numeric  36 3.001072e+00
11    num_physicians_per_thousand   numeric  36 1.933904e+01
12         handwashing_facilities   numeric 108 5.016595e+01
13                 gdp_per_capita   numeric  16 1.925648e+04
14        current_health_exp_%gdp   numeric  38 6.529712e+00
15  govt_health_exp_%totalgovtexp   numeric  37 1.034586e+01
16                     population   numeric   1 3.859711e+07
17             population_density   numeric   8 4.616417e+02
18                     0_to_14(%)   numeric  45 2.748499e+01
19                    15_to_64(%)   numeric  45 6.339277e+01
20                65_and_above(%)   numeric  45 9.122235e+00
21                extreme_poverty   numeric  78 1.396452e+01
22        human_development_index   numeric  17 7.223892e-01
23 annual_intl_arrivals_thousands   numeric  41 7.978099e+03
           disp       median          mad           min          max
1  7.277228e-01           NA           NA  9.000000e+00 5.500000e+01
2  9.950495e-01           NA           NA  1.000000e+00 1.000000e+00
3  2.377412e+01 1.873570e+01 2.574145e+01 -4.090060e+01 6.496310e+01
4  6.269834e+01 1.937439e+01 4.091811e+01 -1.721046e+02 1.780650e+02
5  2.601232e+06 8.315900e+04 1.197807e+05  1.000000e+00 3.021868e+07
6  5.326492e+04 1.246000e+03 1.803583e+03  1.000000e+00 5.488280e+05
7  1.941648e-02 1.709511e-02 1.065804e-02  4.976115e-04 2.096246e-01
8  4.466199e+07 2.671796e+06 3.490331e+06  3.659700e+04 3.635135e+08
9  8.789104e-02 7.300000e-02 7.413000e-02  0.000000e+00 3.530000e-01
10 2.453240e+00 2.358500e+00 1.865852e+00  1.000000e-01 1.380000e+01
11 1.752972e+01 1.567500e+01 1.971858e+01  2.300000e-01 8.422000e+01
12 3.204417e+01 4.875300e+01 4.622524e+01  1.188000e+00 9.899900e+01
13 2.069661e+04 1.203878e+04 1.385404e+04  6.612400e+02 1.169356e+05
14 2.538743e+00 6.303600e+00 2.692402e+00  1.772700e+00 1.640290e+01
15 4.972039e+00 9.991500e+00 5.204964e+00  2.106200e+00 2.690710e+01
16 1.454664e+08 7.976985e+06 1.124365e+07  8.090000e+02 1.439324e+09
17 2.156326e+03 8.430400e+01 9.032740e+01  1.980000e+00 2.054677e+04
18 1.055023e+01 2.618512e+01 1.378944e+01  1.233150e+01 4.984217e+01
19 6.382057e+00 6.463752e+01 5.079144e+00  4.756112e+01 8.488094e+01
20 6.610569e+00 6.711584e+00 5.690908e+00  1.156549e+00 2.800205e+01
21 2.030972e+01 2.350000e+00 3.187590e+00  1.000000e-01 7.760000e+01
22 1.510628e-01 7.420000e-01 1.749468e-01  3.940000e-01 9.570000e-01
23 1.511262e+04 2.077000e+03 2.846592e+03  7.000000e+00 8.932200e+04
   nlevs
1      6
2    202
3      0
4      0
5      0
6      0
7      0
8      0
9      0
10     0
11     0
12     0
13     0
14     0
15     0
16     0
17     0
18     0
19     0
20     0
21     0
22     0
23     0</code></pre>
</div>
<p>Note that there are a number of variables with missing values. As it is challenging to explore the data in numbers, we will employ visualisation to aid in data exploration in the following three areas:</p>
<ul>
<li>Missingness</li>
<li>Distribution</li>
<li>Outliers</li>
<li>Correlation</li>
</ul>
<h3 id="missingness">Missingness</h3>
<p><em>ggplot</em> is used to visualise missing values in the dataset with the code chunk below:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>missing_values</span> <span class='op'>&lt;-</span> <span class='va'>covid_deaths</span> <span class='op'>%&gt;%</span>
  <span class='fu'>gather</span><span class='op'>(</span>key <span class='op'>=</span> <span class='st'>"key"</span>, value <span class='op'>=</span> <span class='st'>"val"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>isna <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>val</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>key</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>total <span class='op'>=</span> <span class='fu'>n</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>key</span>, <span class='va'>total</span>, <span class='va'>isna</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>summarise</span><span class='op'>(</span>num.isna <span class='op'>=</span> <span class='fu'>n</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>pct <span class='op'>=</span> <span class='va'>num.isna</span> <span class='op'>/</span> <span class='va'>total</span> <span class='op'>*</span> <span class='fl'>100</span><span class='op'>)</span>

<span class='va'>levels</span> <span class='op'>&lt;-</span> <span class='op'>(</span><span class='va'>missing_values</span> <span class='op'>%&gt;%</span> 
             <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>isna</span> <span class='op'>==</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
             <span class='fu'>arrange</span><span class='op'>(</span><span class='va'>pct</span><span class='op'>)</span><span class='op'>)</span><span class='op'>$</span><span class='va'>key</span>

<span class='va'>percentage_plot</span> <span class='op'>&lt;-</span> <span class='va'>missing_values</span> <span class='op'>%&gt;%</span>
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>geom_bar</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/reorder.factor.html'>reorder</a></span><span class='op'>(</span><span class='va'>key</span>, <span class='va'>pct</span><span class='op'>)</span>, y <span class='op'>=</span> <span class='va'>pct</span>, fill<span class='op'>=</span><span class='va'>isna</span><span class='op'>)</span>,
             stat <span class='op'>=</span> <span class='st'>"identity"</span>,
             alpha<span class='op'>=</span><span class='fl'>0.8</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>scale_x_discrete</span><span class='op'>(</span>limits <span class='op'>=</span> <span class='va'>levels</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>scale_fill_manual</span><span class='op'>(</span>name <span class='op'>=</span> <span class='st'>""</span>,
                      values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"lightblue"</span>,<span class='st'>"rosybrown"</span><span class='op'>)</span>,
                      labels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Present"</span>, <span class='st'>"Missing"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>coord_flip</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>labs</span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Percentage of missing values"</span>, x <span class='op'>=</span> <span class='st'>'Variable'</span>, y <span class='op'>=</span> <span class='st'>"% of missing values"</span><span class='op'>)</span>

<span class='va'>percentage_plot</span>
</code></pre>
</div>
<p><img src="covid-deaths_files/figure-html5/missing-1.png" width="624" /></p>
</div>
<p>From the above plot, <strong>handwashing facilities</strong> has the highest percentage of missing values, followed by <strong>total tests</strong> and <strong>positive rate</strong>. We can also use <em>gg_miss_upset</em> plot to understand how missing values are linked across variables.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>gg_miss_upset</span><span class='op'>(</span><span class='va'>covid_deaths</span>, 
              nsets <span class='op'>=</span> <span class='fu'>n_var_miss</span><span class='op'>(</span><span class='va'>covid_deaths</span><span class='op'>)</span>, 
              nintersects <span class='op'>=</span> <span class='cn'>NA</span>, 
              text.scale <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>0.8</span>,<span class='fl'>1</span><span class='op'>)</span>, 
              <span class='co'># intersection title, intersection tick labels, set title, set tick labels, set names, numbers above bars</span>
              set_size.show <span class='op'>=</span> <span class='cn'>TRUE</span>,
              set_size.numbers_size <span class='op'>=</span> <span class='fl'>4</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="covid-deaths_files/figure-html5/missing-upset-1.png" width="624" /></p>
</div>
<p>From the UpSet plot, 35 of the records have only missing values in handwashing facilities, while there is one record with missing values across all variables. As the missing values would pose a problem later in the analysis, the missing values are imputed using the k-Nearest Neighbour (kNN) imputation, where k = 5. Key indicators of a country, such as the population, population density and Gross Domestic Product (GDP) per capita are used to estimate the imputation value. The continent in which the country falls under is also considered.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>covid_deaths_imputed_raw</span> <span class='op'>&lt;-</span> <span class='va'>covid_deaths</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>drop_na</span><span class='op'>(</span><span class='va'>population</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>kNN</span><span class='op'>(</span>k<span class='op'>=</span><span class='fl'>5</span>,
      dist_var <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"continent"</span>, 
                   <span class='st'>"population"</span>,
                   <span class='st'>"population_density"</span>, 
                   <span class='st'>"gdp_per_capita"</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>covid_deaths_imputed</span> <span class='op'>&lt;-</span> <span class='va'>covid_deaths_imputed_raw</span> <span class='op'>%&gt;%</span>
  <span class='fu'>select</span><span class='op'>(</span><span class='va'>continent</span><span class='op'>:</span><span class='va'>annual_intl_arrivals_thousands</span><span class='op'>)</span>

<span class='fu'>summarizeColumns</span><span class='op'>(</span><span class='va'>covid_deaths_imputed</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>                             name      type na         mean
1                       continent character  0           NA
2                        location character  0           NA
3                             lat   numeric  0 1.985788e+01
4                            long   numeric  0 1.822086e+01
5                     total_cases   numeric  0 6.328611e+05
6                    total_deaths   numeric  0 1.386159e+04
7              case_fatality_rate   numeric  0 1.982965e-02
8                     total_tests   numeric  0 8.502279e+06
9                   positive_rate   numeric  0 9.246269e-02
10     hospital_beds_per_thousand   numeric  0 2.871771e+00
11    num_physicians_per_thousand   numeric  0 1.971324e+01
12         handwashing_facilities   numeric  0 6.708867e+01
13                 gdp_per_capita   numeric  0 2.003516e+04
14        current_health_exp_%gdp   numeric  0 6.474225e+00
15  govt_health_exp_%totalgovtexp   numeric  0 1.026984e+01
16                     population   numeric  0 3.859711e+07
17             population_density   numeric  0 4.555706e+02
18                     0_to_14(%)   numeric  0 2.685172e+01
19                    15_to_64(%)   numeric  0 6.380348e+01
20                65_and_above(%)   numeric  0 9.262033e+00
21                extreme_poverty   numeric  0 1.141692e+01
22        human_development_index   numeric  0 7.293433e-01
23 annual_intl_arrivals_thousands   numeric  0 7.349433e+03
           disp       median          mad           min          max
1  7.263682e-01           NA           NA  9.000000e+00 5.500000e+01
2  9.950249e-01           NA           NA  1.000000e+00 1.000000e+00
3  2.365768e+01 1.873570e+01 2.550339e+01 -4.090060e+01 6.496310e+01
4  6.238846e+01 1.914510e+01 4.057817e+01 -1.721046e+02 1.780650e+02
5  2.532741e+06 6.701100e+04 9.632304e+04  1.000000e+00 3.021868e+07
6  5.060132e+04 8.600000e+02 1.232041e+03  1.000000e+00 5.488280e+05
7  1.857345e-02 1.658023e-02 9.050984e-03  4.976115e-04 2.096246e-01
8  3.309407e+07 1.763959e+06 1.961999e+06  3.659700e+04 3.635135e+08
9  7.905915e-02 7.300000e-02 6.375180e-02  0.000000e+00 3.530000e-01
10 2.310520e+00 2.397000e+00 1.922932e+00  1.000000e-01 1.380000e+01
11 1.659314e+01 2.007000e+01 1.965928e+01  2.300000e-01 8.422000e+01
12 3.120329e+01 8.324100e+01 2.064224e+01  1.188000e+00 9.899900e+01
13 2.080873e+04 1.295184e+04 1.497528e+04  6.612400e+02 1.169356e+05
14 2.394534e+00 6.229800e+00 2.496550e+00  1.772700e+00 1.640290e+01
15 4.720623e+00 9.775500e+00 5.179315e+00  2.106200e+00 2.690710e+01
16 1.454664e+08 7.976985e+06 1.124365e+07  8.090000e+02 1.439324e+09
17 2.118683e+03 8.812500e+01 9.465363e+01  1.980000e+00 2.054677e+04
18 1.026416e+01 2.486598e+01 1.255024e+01  1.233150e+01 4.984217e+01
19 6.253606e+00 6.470614e+01 4.298276e+00  4.756112e+01 8.488094e+01
20 6.607673e+00 7.273292e+00 6.413068e+00  1.156549e+00 2.800205e+01
21 1.823734e+01 2.000000e+00 2.668680e+00  1.000000e-01 7.760000e+01
22 1.523789e-01 7.560000e-01 1.808772e-01  3.940000e-01 9.570000e-01
23 1.385114e+04 1.781000e+03 2.429981e+03  7.000000e+00 8.932200e+04
   nlevs
1      6
2    201
3      0
4      0
5      0
6      0
7      0
8      0
9      0
10     0
11     0
12     0
13     0
14     0
15     0
16     0
17     0
18     0
19     0
20     0
21     0
22     0
23     0</code></pre>
</div>
<p>There are no missing values after imputation as seen from the <strong>na</strong> column, and no zero values were imputed when compared to the previous summary table from the <strong>min</strong> column.</p>
<h3 id="distribution">Distribution</h3>
<p>The distributions are examined from the density curves of the variables using <code>ggplot()</code>. Let us compare the variable distributions before and after imputation.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>check_distribution</span> <span class='op'>&lt;-</span> <span class='va'>covid_deaths</span> <span class='op'>%&gt;%</span>
  <span class='fu'>pivot_longer</span><span class='op'>(</span>cols <span class='op'>=</span> <span class='va'>total_cases</span><span class='op'>:</span><span class='va'>annual_intl_arrivals_thousands</span>,
               names_to <span class='op'>=</span> <span class='st'>"variable"</span>,
               values_to <span class='op'>=</span> <span class='st'>"value"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>value</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_density</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>facet_wrap</span><span class='op'>(</span><span class='op'>~</span><span class='va'>variable</span>, nrow <span class='op'>=</span> <span class='fl'>5</span>, ncol <span class='op'>=</span> <span class='fl'>4</span>, scales <span class='op'>=</span> <span class='st'>"free"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggtitle</span><span class='op'>(</span><span class='st'>"Distribution before imputation"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_minimal</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme</span><span class='op'>(</span>panel.border <span class='op'>=</span> <span class='fu'>element_rect</span><span class='op'>(</span>colour<span class='op'>=</span><span class='st'>"grey60"</span>, fill <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span>,
        strip.background <span class='op'>=</span> <span class='fu'>element_rect</span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"grey80"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>check_distribution_imputed</span> <span class='op'>&lt;-</span> <span class='va'>covid_deaths_imputed</span> <span class='op'>%&gt;%</span>
  <span class='fu'>pivot_longer</span><span class='op'>(</span>cols <span class='op'>=</span> <span class='va'>total_cases</span><span class='op'>:</span><span class='va'>annual_intl_arrivals_thousands</span>,
               names_to <span class='op'>=</span> <span class='st'>"variable"</span>,
               values_to <span class='op'>=</span> <span class='st'>"value"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>value</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_density</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>facet_wrap</span><span class='op'>(</span><span class='op'>~</span><span class='va'>variable</span>, nrow <span class='op'>=</span> <span class='fl'>5</span>, ncol <span class='op'>=</span> <span class='fl'>4</span>, scales <span class='op'>=</span> <span class='st'>"free"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggtitle</span><span class='op'>(</span><span class='st'>"Distribution after imputation"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_minimal</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme</span><span class='op'>(</span>panel.border <span class='op'>=</span> <span class='fu'>element_rect</span><span class='op'>(</span>colour<span class='op'>=</span><span class='st'>"grey60"</span>, fill <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span>,
        strip.background <span class='op'>=</span> <span class='fu'>element_rect</span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"grey80"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<p><img src="covid-deaths_files/figure-html5/unnamed-chunk-2-1.png" width="1920" /></p>
</div>
<p>The distributions after imputation is similar to that before imputation, except for <em>handwashing_facilities</em> as it has the most missing values.</p>
<p>From the above distributions, we can see that the range of values differ greatly between groups of variables, which may result in issues at a later stage. We will rescale some of the data with large ranges by performing a log transformation. No variables were removed, as the transformed variables will only be used where appropriate, i.e. in regression analysis.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>covid_deaths_tidy</span> <span class='op'>&lt;-</span> <span class='va'>covid_deaths_imputed</span> <span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>total_cases_log <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>total_cases</span><span class='op'>)</span>, 
         total_deaths_log <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>total_deaths</span><span class='op'>)</span>, 
         total_tests_log <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>total_tests</span><span class='op'>)</span>,
         gdp_per_capita_log <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>gdp_per_capita</span><span class='op'>)</span>,
         population_log <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>population</span><span class='op'>)</span>, 
         population_density_log <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>population_density</span><span class='op'>)</span>,
         annual_intl_arrivals_thou_log <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>annual_intl_arrivals_thousands</span><span class='op'>)</span>
         <span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>check_distribution_tidy</span> <span class='op'>&lt;-</span> <span class='va'>covid_deaths_tidy</span> <span class='op'>%&gt;%</span>
  <span class='fu'>pivot_longer</span><span class='op'>(</span>cols <span class='op'>=</span> <span class='va'>total_cases</span><span class='op'>:</span><span class='va'>total_tests_log</span>,
               names_to <span class='op'>=</span> <span class='st'>"variable"</span>,
               values_to <span class='op'>=</span> <span class='st'>"value"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>value</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_density</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>facet_wrap</span><span class='op'>(</span><span class='op'>~</span><span class='va'>variable</span>, nrow <span class='op'>=</span> <span class='fl'>5</span>, ncol <span class='op'>=</span> <span class='fl'>5</span>, scales <span class='op'>=</span> <span class='st'>"free"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggtitle</span><span class='op'>(</span><span class='st'>"Distribution after transformation"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_minimal</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme</span><span class='op'>(</span>panel.border <span class='op'>=</span> <span class='fu'>element_rect</span><span class='op'>(</span>colour<span class='op'>=</span><span class='st'>"grey60"</span>, fill <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span>,
        strip.background <span class='op'>=</span> <span class='fu'>element_rect</span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"grey80"</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>check_distribution_tidy</span>
</code></pre>
</div>
<p><img src="covid-deaths_files/figure-html5/unnamed-chunk-3-1.png" width="960" /></p>
</div>
<p>The distributions of the log-transformed variables now approximates to the normal distribution.</p>
<h3 id="outliers">Outliers</h3>
<p>The outliers are also examined using <code>ggplot()</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>check_outlier</span> <span class='op'>&lt;-</span> <span class='va'>covid_deaths_tidy</span> <span class='op'>%&gt;%</span>
  <span class='fu'>pivot_longer</span><span class='op'>(</span>cols <span class='op'>=</span> <span class='va'>total_cases</span><span class='op'>:</span><span class='va'>annual_intl_arrivals_thou_log</span>,
               names_to <span class='op'>=</span> <span class='st'>"variable"</span>,
               values_to <span class='op'>=</span> <span class='st'>"value"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>variable</span>, y<span class='op'>=</span><span class='va'>value</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>geom_boxplot</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>facet_wrap</span><span class='op'>(</span><span class='op'>~</span><span class='va'>variable</span>, ncol <span class='op'>=</span> <span class='fl'>7</span>, scales <span class='op'>=</span> <span class='st'>"free"</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>theme_minimal</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>theme</span><span class='op'>(</span>panel.border <span class='op'>=</span> <span class='fu'>element_rect</span><span class='op'>(</span>colour<span class='op'>=</span><span class='st'>"grey60"</span>, fill <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span>,
          axis.text.x.bottom <span class='op'>=</span> <span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>check_outlier</span>
</code></pre>
</div>
<p><img src="covid-deaths_files/figure-html5/outlier-1.png" width="1440" /></p>
</div>
<p>Most of the outliers are valid as there are countries with very large numbers due to its population sizes and land area.</p>
<h3 id="correlation">Correlation</h3>
<p>Correlation between the variables is calculated with the below code chunk.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>check_correlation</span> <span class='op'>&lt;-</span> <span class='fu'>correlate</span><span class='op'>(</span><span class='va'>covid_deaths_tidy</span> <span class='op'>%&gt;%</span>
                                 <span class='fu'>select</span><span class='op'>(</span><span class='va'>total_cases</span><span class='op'>:</span><span class='va'>annual_intl_arrivals_thou_log</span><span class='op'>)</span><span class='op'>)</span>

<span class='fu'>rplot</span><span class='op'>(</span><span class='va'>check_correlation</span>,
      print_cor <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_size_continuous</span><span class='op'>(</span>range <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>4</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme</span><span class='op'>(</span>axis.text.x <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>size<span class='op'>=</span><span class='fl'>7</span>, angle<span class='op'>=</span><span class='fl'>45</span>, hjust<span class='op'>=</span><span class='fl'>0.95</span><span class='op'>)</span>,
        axis.text.y <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>size<span class='op'>=</span><span class='fl'>7</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="covid-deaths_files/figure-html5/corr-1.png" width="768" /></p>
</div>
<p>We observe that <em>total_cases</em> and <em>total_deaths</em> are strongly positively-correlated, as they are logically inter-dependent. <em>human_development_index</em> is strongly positively-correlated with <em>handwashing_facilities</em> and <em>gdp_per_capita</em>, and strongly negatively-correlated with <em>0_to_14(%)</em>. The explanation for the correlation between the Human Development Index (HDI) with GDP per capita and age group below 14 years can be found in the definition of the HDI, which is a summary measure of four indicators: (1) life expectancy; (2) expected years of schooling; (3) mean of years of schooling; and (4) gross national income per capita.</p>
<p>An interesting correlation is that between <em>0_to_14(%)</em> and <em>64_and_above(%)</em>, with correlation at -0.80.</p>
<p>No further action is taken to handle variables with high correlation values (&gt;= 0.80) as this is an exploratory analysis.</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<h1 id="prototype">Prototype</h1>
<p>The next step would be to explore the packages to build the needed plots. When there are more than one package, the criteria to evaluate the plots are:</p>
<ul>
<li>Level of customisation available</li>
<li>Ease of use and implementation of customisation in functions</li>
<li>Ease of understanding and interpretation of the plot (clarity and aesthetic)</li>
<li>Interactivity</li>
</ul>
<p>There are mainly two types of interactivity to consider: (1) able to render plot object interactive; and (2) degree to which users can interact with the plot via changing the plot arguments in a Shiny app, with the least complexity in the code.</p>
<h2 id="scatterplot">Scatterplot</h2>
<p>Two packages <em>ggstatsplot</em> and <em>car</em> will be explored for the scatterplot.</p>
<h3 id="using-ggstatsplotggscatterstats">Using <em>ggstatsplot::ggscatterstats</em></h3>
<p>The <em>ggstatsplot</em> package is an extension of the <em>ggplot</em> package, making it easier to tie in with other functions from the <em>tidyverse</em> family. <em>ggplot</em> functions can be called within <code>ggscatterstats()</code>, but the output of the function is not further modifiable with <em>ggplot</em> unless the marginal distributions are not plotted.</p>
<p>There are several key arguments that can be provided for user customisation:</p>
<ul>
<li><code>type</code>: statistical test to be performed (parametric, non-parametric, robust and bayesian)</li>
<li><code>conf.level</code>: confidence level (value between 0 to 1)</li>
<li><code>results.subtitle</code>: option to display statistical test</li>
<li><code>label.</code> arguments: set label parameters and criteria for display</li>
<li><code>point.args</code>: customisation to the point plot</li>
<li><code>marginal.type</code>: type of marginal distribution (histogram, density, densigram, boxplot and violin plot)</li>
<li>Under <code>ggplot.component</code>: Smooth line to display (from geom_smooth: “loess”, “lm”, “glm” and “gam”)</li>
<li>Other aesthetic components such as graph title, axes scale etc.</li>
</ul>
<p>The code chunk below generates a scatterplot of total deaths by hospital beds per thousand. We set some aesthetics for the points, which are coloured by continent and the size reflects the population number. Here, we use <strong>total_deaths_log</strong> to obtain a more proportionate graph.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>sp_ggstatsplot_marginal</span> <span class='op'>&lt;-</span> 
  <span class='fu'>ggscatterstats</span><span class='op'>(</span><span class='va'>covid_deaths_tidy</span>,
                 x <span class='op'>=</span> <span class='va'>hospital_beds_per_thousand</span>, <span class='co'># independent variable</span>
                 y <span class='op'>=</span> <span class='va'>total_deaths_log</span>, <span class='co'># dependent variable</span>
                 type <span class='op'>=</span> <span class='st'>"robust"</span>, <span class='co'># statistical test</span>
                 conf.level <span class='op'>=</span> <span class='fl'>0.95</span>, <span class='co'># confidence level</span>
                 results.subtitle <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='co'># set to FALSE to NOT display the statistical tests</span>
                 ggplot.component <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'>geom_smooth</span><span class='op'>(</span>method <span class='op'>=</span> <span class='st'>"loess"</span>, size <span class='op'>=</span><span class='fl'>0.05</span><span class='op'>)</span><span class='op'>)</span>, <span class='co'># regression line</span>
                 label.var <span class='op'>=</span> <span class='va'>location</span>, <span class='co'># define label to show location</span>
                 label.expression <span class='op'>=</span> <span class='va'>continent</span> <span class='op'>==</span> <span class='st'>"Asia"</span>, <span class='co'># criteria to display labels</span>
                 point.args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>colour<span class='op'>=</span><span class='va'>continent</span>, <span class='co'># set colour scale for points</span>
                                       size<span class='op'>=</span><span class='va'>population</span><span class='op'>)</span>, <span class='co'># set size scale for points</span>
                                       alpha <span class='op'>=</span> <span class='fl'>0.4</span><span class='op'>)</span>, <span class='co'># set size scale for point</span>
                 smooth.line.args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>color <span class='op'>=</span> <span class='cn'>NA</span>, 
                                         se <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>, <span class='co'># remove default regression line</span>
                 <span class='co'>#marginal.type = "densigram", # marginal distribution</span>
                 title <span class='op'>=</span> <span class='st'>"Scatterplot using ggstatsplot package"</span><span class='op'>)</span> <span class='co'># graph title</span>

<span class='va'>sp_ggstatsplot_marginal</span>
</code></pre>
</div>
<p><img src="covid-deaths_files/figure-html5/sp1-1.png" width="624" /></p>
</div>
<p>The output plots a scatterplot with marginal distribution, with the default set as ‘densigram’, a combination of density curve and histogram. The marginal distributions provides useful information on the distribution, spread, and outliers of the x and y variables.</p>
<h3 id="using-carscatterplot">Using <em>car::scatterplot</em></h3>
<p>The <em>car</em> package uses basic R graphics to generate the scatterplot. The key arguments selected for customisation are:</p>
<ul>
<li><code>boxplot</code>: axis to display marginal boxplot (x, y, xy)</li>
<li><code>regLine</code>: regression line to display (lm, loess, mgcv::gam, quantreg::rqss)</li>
<li><code>id</code>: criteria and number of points to display labels</li>
<li><code>ellipse</code>: add ellipse (to use cov.trob function in the MASS package or not, CI of ellipse)</li>
<li><code>smooth</code>: Smooth line to display (loessLine, gamline, quantregLine)</li>
<li>Other aesthetic components such as graph title, axis labels, axes scale, shape etc.</li>
</ul>
<p>A <code>scatterplot()</code> implementation of the same plot is shown below. Again, <strong>total_deaths_log</strong> is used to obtain a proportionate graph.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>sp_car</span> <span class='op'>&lt;-</span> <span class='fu'>scatterplot</span><span class='op'>(</span><span class='va'>total_deaths_log</span> <span class='op'>~</span> <span class='va'>hospital_beds_per_thousand</span> <span class='op'>|</span> <span class='va'>continent</span>, <span class='co'># group by continent</span>
                      <span class='va'>covid_deaths_tidy</span>,
                      boxplots <span class='op'>=</span> <span class='st'>"xy"</span>, <span class='co'># axis for marginal boxplot</span>
                      regLine <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>method<span class='op'>=</span><span class='va'>lm</span>, <span class='co'># regression line to display and customisation</span>
                                     lty<span class='op'>=</span><span class='fl'>1</span>, 
                                     lwd<span class='op'>=</span><span class='fl'>1</span><span class='op'>)</span>,
                      id <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>method<span class='op'>=</span><span class='st'>"mahal"</span>, n<span class='op'>=</span><span class='fl'>5</span><span class='op'>)</span>, <span class='co'># label customisation</span>
                      ellipse <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>levels<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.5</span>, <span class='fl'>.95</span><span class='op'>)</span>, <span class='co'># ellipse customisation</span>
                                     robust<span class='op'>=</span><span class='cn'>TRUE</span>, 
                                     fill<span class='op'>=</span><span class='cn'>TRUE</span>, 
                                     fill.alpha<span class='op'>=</span><span class='fl'>0.2</span><span class='op'>)</span>,
                      smooth <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>smoother<span class='op'>=</span><span class='va'>loessLine</span>, <span class='co'># smooth line to display and customisation</span>
                                    lty.var<span class='op'>=</span><span class='fl'>2</span>, 
                                    lwd.var<span class='op'>=</span><span class='fl'>0.5</span><span class='op'>)</span>, 
                      by.groups <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='co'># unable to change to FALSE when group is defined</span>
                      xlab <span class='op'>=</span> <span class='st'>"hospital beds per thousand"</span>, <span class='co'># x-axis label</span>
                      ylab <span class='op'>=</span> <span class='st'>"total deaths"</span>, <span class='co'># y-axis label</span>
                      main <span class='op'>=</span> <span class='st'>"Scatterplot using car package"</span> <span class='co'># graph title</span>
                      <span class='op'>)</span>
</code></pre>
</div>
<p><img src="covid-deaths_files/figure-html5/sp2-1.png" width="624" /></p>
</div>
<p>The grouping by continent results in individual regression lines, ellipses and smooth lines to be plotted for each continent group.</p>
<h3 id="evaluation">Evaluation</h3>
<h4 id="level-of-customisation-and-ease-of-use">Level of customisation and ease of use</h4>
<p>Both packages allow for a wide variety of options for customisation, with <em>car::scatterplot</em> having an added feature of plotting ellipses. For <em>ggstatsplot::ggscatterstats</em>, most <em>ggplot</em> functions such as <code>geom_smooth</code> and <code>scale_</code> functions are supported, which makes it fairly easy to implement for someone with basic knowledge of <em>ggplot</em>.</p>
<p>There are some limitations to the arguments in <em>car::scatterplot</em>, such as the marginal distribution is limited to the boxplot and the display of data labels is limited to the values. In addition, it is not straightforward to make changes to the arguments due to the many “hidden” lists within the arguments.</p>
<h4 id="clarity-and-aesthetic">Clarity and aesthetic</h4>
<p>The statistical test in the <em>ggstatsplot::ggscatterstats</em> scatterplot is informative to the more statistically inclined, with an option to turn off the statistical results for the non-statistically inclined. The graph is also visually appealing with the default settings for position, colour and data point opacity, thus little customisation to the aesthetics need to be done.</p>
<p>On the other hand, the scatterplot from <em>car::scatterplot</em> is visually overwhelming when groups are defined. The plots by group cannot be turned off by setting the argument <code>by.groups</code> to <code>FALSE</code>. In addition, the shape scale is automatically added which adds visual clutter to the plot. There is a need to explicitly amend <code>pch</code> to standardise the shape. The location of the marginal boxplot is near the axes labels at the bottom and left of plot, which does not give attention to the marginal boxplots.</p>
<p>In general, the scatterplot created using the <em>car</em> package is not as visually appealing than that from the <em>ggstatsplot</em> package, and requires more customisation to improve the clarity and aesthetics.</p>
<h4 id="interactivity">Interactivity</h4>
<p>There is no support for plot interactivity for both packages, despite claims from the authors of <em>ggstatplot</em> that the functions in the package are compatible with the <em>plotly</em> package, a package for rendering interactive graphics.</p>
<p>Another option is to build the scatterplot from scratch using <code>ggplot()</code>, which can be passed into <code>ggplotly()</code> to make the plot interactive. The marginal distributions are added to the base ggplot using <code>ggMarginal()</code> from the <em>ggExtra</em> package.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># base ggplot</span>
<span class='va'>sp_ggplot_base</span> <span class='op'>&lt;-</span> <span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>covid_deaths_tidy</span>, 
                    <span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>hospital_beds_per_thousand</span>, y<span class='op'>=</span><span class='va'>total_deaths_log</span>, size<span class='op'>=</span><span class='va'>population</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>colour<span class='op'>=</span><span class='va'>continent</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggtitle</span><span class='op'>(</span><span class='st'>"ggplot Scatterplot"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>xlab</span><span class='op'>(</span><span class='st'>"hospital beds per thousand"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ylab</span><span class='op'>(</span><span class='st'>"total deaths"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_smooth</span><span class='op'>(</span>method <span class='op'>=</span> <span class='st'>"loess"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>theme</span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='st'>"none"</span><span class='op'>)</span>

<span class='co'># ggplot with marginal distribution</span>
<span class='va'>sp_ggplot_marginal</span> <span class='op'>&lt;-</span> <span class='fu'>ggMarginal</span><span class='op'>(</span><span class='va'>sp_ggplot_base</span>, 
                                 type<span class='op'>=</span><span class='st'>"histogram"</span>,
                                 fill<span class='op'>=</span><span class='st'>"lightblue"</span><span class='op'>)</span>

<span class='fu'>combine_plots</span><span class='op'>(</span>plotlist <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>sp_ggplot_base</span>,
                              <span class='va'>sp_ggplot_marginal</span><span class='op'>)</span>,
              annotation.args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>title<span class='op'>=</span><span class='st'>"ggplot_base and ggplot_marginal"</span><span class='op'>)</span>,
              plotgrid.args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>nrow<span class='op'>=</span><span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="covid-deaths_files/figure-html5/sp3-1.png" width="624" /></p>
</div>
<p>The marginal distribution can also be customised.</p>
<p>The code chunk below generates an interactive scatterplot.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># interactive base ggplot</span>
<span class='va'>sp_ggplotly_base</span> <span class='op'>&lt;-</span> <span class='fu'>ggplotly</span><span class='op'>(</span><span class='va'>sp_ggplot_base</span><span class='op'>)</span>

<span class='va'>sp_ggplotly_base</span>
</code></pre>
</div>
<div id="htmlwidget-66a4d600f20281b9aae0" style="width:624px;height:384px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-66a4d600f20281b9aae0">{"x":{"data":[{"x":[1.9,1.1,0.5,1.8,0.4,0.8,1.3,2.1,1,0.4,2.2,2,0.9,0.7,1.4,1.6,2.1,0.7,2.1,0.3,6.3,1.1,0.9,0.3,0.8,1.4,0.7,0.8,3.7,0.2,1.3,0.1,1.4,3.4,1.1,0.7,2.1,0.3,0.8,0.8,2.397,2.9,0.4,3.6,0.7,0.9,2.32,1.1,0.8,0.7,0.7,2.3,0.5,2,1.7],"y":[8.03171037532204,6.27852142416584,4.49980967033027,6.22653666928747,4.97673374242057,1.79175946922805,6.58063913728495,5.10594547390058,4.15888308335967,5.07517381523383,4.98360662170834,4.90527477843843,5.44673737166631,6.59850902861452,4.18965474202643,9.37966111659289,4.62497281328427,2.19722457733622,6.50128967054039,7.93164402145431,4.70953020131233,5.09375020080676,6.60665018619822,4.75359019110636,4.11087386417331,7.6515955738576,5.75257263882563,4.44265125649032,7.86403565907245,5.9427993751267,7.01481435127554,5.92958914338989,6.10479323241498,2.30258509299405,9.08227970190866,6.63594655568665,6.23048144757848,5.22035582507832,7.62119516280984,5.70711026474888,4.68213122712422,3.52636052461616,6.94119005506837,2.99573227355399,4.36944785246702,6.19031540585315,10.871383530136,4.68213122712422,7.61480536471107,3.04452243772342,4.67282883446191,9.07165285220229,5.81413053182507,7.08840877867539,7.32580750259577],"text":["continent: Africa<br />hospital_beds_per_thousand:  1.900<br />total_deaths_log:  8.0317104<br />population:   43851043","continent: Africa<br />hospital_beds_per_thousand:  1.100<br />total_deaths_log:  6.2785214<br />population:   32866268","continent: Africa<br />hospital_beds_per_thousand:  0.500<br />total_deaths_log:  4.4998097<br />population:   12123198","continent: Africa<br />hospital_beds_per_thousand:  1.800<br />total_deaths_log:  6.2265367<br />population:    2351625","continent: Africa<br />hospital_beds_per_thousand:  0.400<br />total_deaths_log:  4.9767337<br />population:   20903278","continent: Africa<br />hospital_beds_per_thousand:  0.800<br />total_deaths_log:  1.7917595<br />population:   11890781","continent: Africa<br />hospital_beds_per_thousand:  1.300<br />total_deaths_log:  6.5806391<br />population:   26545864","continent: Africa<br />hospital_beds_per_thousand:  2.100<br />total_deaths_log:  5.1059455<br />population:     555988","continent: Africa<br />hospital_beds_per_thousand:  1.000<br />total_deaths_log:  4.1588831<br />population:    4829764","continent: Africa<br />hospital_beds_per_thousand:  0.400<br />total_deaths_log:  5.0751738<br />population:   16425859","continent: Africa<br />hospital_beds_per_thousand:  2.200<br />total_deaths_log:  4.9836066<br />population:     869595","continent: Africa<br />hospital_beds_per_thousand:  2.000<br />total_deaths_log:  4.9052748<br />population:    5518092","continent: Africa<br />hospital_beds_per_thousand:  0.900<br />total_deaths_log:  5.4467374<br />population:   26378275","continent: Africa<br />hospital_beds_per_thousand:  0.700<br />total_deaths_log:  6.5985090<br />population:   89561404","continent: Africa<br />hospital_beds_per_thousand:  1.400<br />total_deaths_log:  4.1896547<br />population:     988002","continent: Africa<br />hospital_beds_per_thousand:  1.600<br />total_deaths_log:  9.3796611<br />population:  102334403","continent: Africa<br />hospital_beds_per_thousand:  2.100<br />total_deaths_log:  4.6249728<br />population:    1402985","continent: Africa<br />hospital_beds_per_thousand:  0.700<br />total_deaths_log:  2.1972246<br />population:    3546427","continent: Africa<br />hospital_beds_per_thousand:  2.100<br />total_deaths_log:  6.5012897<br />population:    1160164","continent: Africa<br />hospital_beds_per_thousand:  0.300<br />total_deaths_log:  7.9316440<br />population:  114963583","continent: Africa<br />hospital_beds_per_thousand:  6.300<br />total_deaths_log:  4.7095302<br />population:    2225728","continent: Africa<br />hospital_beds_per_thousand:  1.100<br />total_deaths_log:  5.0937502<br />population:    2416664","continent: Africa<br />hospital_beds_per_thousand:  0.900<br />total_deaths_log:  6.6066502<br />population:   31072945","continent: Africa<br />hospital_beds_per_thousand:  0.300<br />total_deaths_log:  4.7535902<br />population:   13132792","continent: Africa<br />hospital_beds_per_thousand:  0.800<br />total_deaths_log:  4.1108739<br />population:    1967998","continent: Africa<br />hospital_beds_per_thousand:  1.400<br />total_deaths_log:  7.6515956<br />population:   53771300","continent: Africa<br />hospital_beds_per_thousand:  0.700<br />total_deaths_log:  5.7525726<br />population:    2142252","continent: Africa<br />hospital_beds_per_thousand:  0.800<br />total_deaths_log:  4.4426513<br />population:    5057677","continent: Africa<br />hospital_beds_per_thousand:  3.700<br />total_deaths_log:  7.8640357<br />population:    6871287","continent: Africa<br />hospital_beds_per_thousand:  0.200<br />total_deaths_log:  5.9427994<br />population:   27691019","continent: Africa<br />hospital_beds_per_thousand:  1.300<br />total_deaths_log:  7.0148144<br />population:   19129955","continent: Africa<br />hospital_beds_per_thousand:  0.100<br />total_deaths_log:  5.9295891<br />population:   20250834","continent: Africa<br />hospital_beds_per_thousand:  1.400<br />total_deaths_log:  6.1047932<br />population:    4649660","continent: Africa<br />hospital_beds_per_thousand:  3.400<br />total_deaths_log:  2.3025851<br />population:    1271767","continent: Africa<br />hospital_beds_per_thousand:  1.100<br />total_deaths_log:  9.0822797<br />population:   36910558","continent: Africa<br />hospital_beds_per_thousand:  0.700<br />total_deaths_log:  6.6359466<br />population:   31255435","continent: Africa<br />hospital_beds_per_thousand:  2.100<br />total_deaths_log:  6.2304814<br />population:    2540916","continent: Africa<br />hospital_beds_per_thousand:  0.300<br />total_deaths_log:  5.2203558<br />population:   24206636","continent: Africa<br />hospital_beds_per_thousand:  0.800<br />total_deaths_log:  7.6211952<br />population:  206139587","continent: Africa<br />hospital_beds_per_thousand:  0.800<br />total_deaths_log:  5.7071103<br />population:   12952209","continent: Africa<br />hospital_beds_per_thousand:  2.397<br />total_deaths_log:  4.6821312<br />population:       6071","continent: Africa<br />hospital_beds_per_thousand:  2.900<br />total_deaths_log:  3.5263605<br />population:     219161","continent: Africa<br />hospital_beds_per_thousand:  0.400<br />total_deaths_log:  6.9411901<br />population:   16743930","continent: Africa<br />hospital_beds_per_thousand:  3.600<br />total_deaths_log:  2.9957323<br />population:      98340","continent: Africa<br />hospital_beds_per_thousand:  0.700<br />total_deaths_log:  4.3694479<br />population:    7976985","continent: Africa<br />hospital_beds_per_thousand:  0.900<br />total_deaths_log:  6.1903154<br />population:   15893219","continent: Africa<br />hospital_beds_per_thousand:  2.320<br />total_deaths_log: 10.8713835<br />population:   59308690","continent: Africa<br />hospital_beds_per_thousand:  1.100<br />total_deaths_log:  4.6821312<br />population:   11193729","continent: Africa<br />hospital_beds_per_thousand:  0.800<br />total_deaths_log:  7.6148054<br />population:   43849269","continent: Africa<br />hospital_beds_per_thousand:  0.700<br />total_deaths_log:  3.0445224<br />population:   59734213","continent: Africa<br />hospital_beds_per_thousand:  0.700<br />total_deaths_log:  4.6728288<br />population:    8278737","continent: Africa<br />hospital_beds_per_thousand:  2.300<br />total_deaths_log:  9.0716529<br />population:   11818618","continent: Africa<br />hospital_beds_per_thousand:  0.500<br />total_deaths_log:  5.8141305<br />population:   45741000","continent: Africa<br />hospital_beds_per_thousand:  2.000<br />total_deaths_log:  7.0884088<br />population:   18383956","continent: Africa<br />hospital_beds_per_thousand:  1.700<br />total_deaths_log:  7.3258075<br />population:   14862927"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":[7.07801132512661,6.63513328666886,5.51382067981188,4.5432537991088,6.05686395684896,5.49711481584635,6.34590310336516,4.15067366516746,4.87412637121432,5.79827385815386,4.24381271672184,4.94954146592755,6.33778902519203,8.49349825506525,4.27444120323319,8.81844806363929,4.3693613620003,4.71746606378613,4.31586314452319,9.12033611390672,4.52252188253101,4.5537465598336,6.55613157781705,5.58459548470496,4.47816432537042,7.43211309050493,4.50845055730275,4.89965955303724,5.08516281867835,6.40067540515613,5.95812096241708,6.02104011130381,4.85351995573069,4.34108475000205,6.80573670358511,6.56427328820023,4.57340671451977,6.23021743054811,10.9312103276133,5.57214142618625,3.81566054193053,4.01228682584384,5.81772663928174,3.93508820288308,5.18630617326913,5.76527162628064,7.61558054336043,5.44600751031973,7.07794460291272,7.62931743034397,5.21266953252651,5.4918946653393,7.14834425077877,5.91521809614855,5.69982607340463],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,4.2,4.7,2,0.8,1.7,2.7,0.8,4.34,2.6,2,0.53,1.04,1.5,1.4,2.99,13.05,1.4,6.7,2,4.5,1.5,2.9,2,1.9,3.6,7,0.9,0.3,1.6,0.6,4.5,1,1.2,2.7,2.4,12.27,3.6,1.5,2.4,4.8,2.1,5.9,2.81,1.2,4,2.6,0.7],"y":[7.81156848934518,8.14612951002541,8.15017926968233,6.24027584517077,9.09031732937645,0,1.09861228866811,2.07944154167984,8.4848765899397,8.22844388300403,7.15383380157884,11.9925823512441,10.6056935775844,11.0398451074465,9.55937621211763,8.72664341559844,9.10731047165664,8.77524045873833,8.07713663853845,7.15383380157884,7.30988148582479,7.30988148582479,8.70913499158718,5.64897423816121,7.13169851046691,4.18965474202643,1.6094379124341,8.0727793331695,8.01532730902172,7.40853056689463,9.5620530240851,7.84658997529119,9.48486121415014,5.64897423816121,8.80131894766524,3.40119738166216,7.45124168498768,6.32435896238131,7.11232744471091,2.30258509299405,4.49980967033027,4.53259949315326,8.14612951002541,10.3392555225743,7.29776828253138,6.4377516497364,3.55534806148941,6.72383244082121],"text":["continent: Asia<br />hospital_beds_per_thousand:  0.500<br />total_deaths_log:  7.8115685<br />population:   38928341","continent: Asia<br />hospital_beds_per_thousand:  4.200<br />total_deaths_log:  8.1461295<br />population:    2963234","continent: Asia<br />hospital_beds_per_thousand:  4.700<br />total_deaths_log:  8.1501793<br />population:   10139175","continent: Asia<br />hospital_beds_per_thousand:  2.000<br />total_deaths_log:  6.2402758<br />population:    1701583","continent: Asia<br />hospital_beds_per_thousand:  0.800<br />total_deaths_log:  9.0903173<br />population:  164689383","continent: Asia<br />hospital_beds_per_thousand:  1.700<br />total_deaths_log:  0.0000000<br />population:     771612","continent: Asia<br />hospital_beds_per_thousand:  2.700<br />total_deaths_log:  1.0986123<br />population:     437483","continent: Asia<br />hospital_beds_per_thousand:  0.800<br />total_deaths_log:  2.0794415<br />population:   16718971","continent: Asia<br />hospital_beds_per_thousand:  4.340<br />total_deaths_log:  8.4848766<br />population: 1439323774","continent: Asia<br />hospital_beds_per_thousand:  2.600<br />total_deaths_log:  8.2284439<br />population:    3989175","continent: Asia<br />hospital_beds_per_thousand:  2.000<br />total_deaths_log:  7.1538338<br />population:    7496988","continent: Asia<br />hospital_beds_per_thousand:  0.530<br />total_deaths_log: 11.9925824<br />population: 1380004385","continent: Asia<br />hospital_beds_per_thousand:  1.040<br />total_deaths_log: 10.6056936<br />population:  273523621","continent: Asia<br />hospital_beds_per_thousand:  1.500<br />total_deaths_log: 11.0398451<br />population:   83992953","continent: Asia<br />hospital_beds_per_thousand:  1.400<br />total_deaths_log:  9.5593762<br />population:   40222503","continent: Asia<br />hospital_beds_per_thousand:  2.990<br />total_deaths_log:  8.7266434<br />population:    8655541","continent: Asia<br />hospital_beds_per_thousand: 13.050<br />total_deaths_log:  9.1073105<br />population:  126476458","continent: Asia<br />hospital_beds_per_thousand:  1.400<br />total_deaths_log:  8.7752405<br />population:   10203140","continent: Asia<br />hospital_beds_per_thousand:  6.700<br />total_deaths_log:  8.0771366<br />population:   18776707","continent: Asia<br />hospital_beds_per_thousand:  2.000<br />total_deaths_log:  7.1538338<br />population:    4270563","continent: Asia<br />hospital_beds_per_thousand:  4.500<br />total_deaths_log:  7.3098815<br />population:    6524191","continent: Asia<br />hospital_beds_per_thousand:  1.500<br />total_deaths_log:  7.3098815<br />population:    7275556","continent: Asia<br />hospital_beds_per_thousand:  2.900<br />total_deaths_log:  8.7091350<br />population:    6825442","continent: Asia<br />hospital_beds_per_thousand:  2.000<br />total_deaths_log:  5.6489742<br />population:     649342","continent: Asia<br />hospital_beds_per_thousand:  1.900<br />total_deaths_log:  7.1316985<br />population:   32365998","continent: Asia<br />hospital_beds_per_thousand:  3.600<br />total_deaths_log:  4.1896547<br />population:     540542","continent: Asia<br />hospital_beds_per_thousand:  7.000<br />total_deaths_log:  1.6094379<br />population:    3278292","continent: Asia<br />hospital_beds_per_thousand:  0.900<br />total_deaths_log:  8.0727793<br />population:   54409794","continent: Asia<br />hospital_beds_per_thousand:  0.300<br />total_deaths_log:  8.0153273<br />population:   29136808","continent: Asia<br />hospital_beds_per_thousand:  1.600<br />total_deaths_log:  7.4085306<br />population:    5106622","continent: Asia<br />hospital_beds_per_thousand:  0.600<br />total_deaths_log:  9.5620530<br />population:  220892331","continent: Asia<br />hospital_beds_per_thousand:  4.500<br />total_deaths_log:  7.8465900<br />population:    5101416","continent: Asia<br />hospital_beds_per_thousand:  1.000<br />total_deaths_log:  9.4848612<br />population:  109581085","continent: Asia<br />hospital_beds_per_thousand:  1.200<br />total_deaths_log:  5.6489742<br />population:    2881060","continent: Asia<br />hospital_beds_per_thousand:  2.700<br />total_deaths_log:  8.8013189<br />population:   34813867","continent: Asia<br />hospital_beds_per_thousand:  2.400<br />total_deaths_log:  3.4011974<br />population:    5850343","continent: Asia<br />hospital_beds_per_thousand: 12.270<br />total_deaths_log:  7.4512417<br />population:   51269183","continent: Asia<br />hospital_beds_per_thousand:  3.600<br />total_deaths_log:  6.3243590<br />population:   21413250","continent: Asia<br />hospital_beds_per_thousand:  1.500<br />total_deaths_log:  7.1123274<br />population:   17500657","continent: Asia<br />hospital_beds_per_thousand:  2.400<br />total_deaths_log:  2.3025851<br />population:   23816775","continent: Asia<br />hospital_beds_per_thousand:  4.800<br />total_deaths_log:  4.4998097<br />population:    9537642","continent: Asia<br />hospital_beds_per_thousand:  2.100<br />total_deaths_log:  4.5325995<br />population:   69799978","continent: Asia<br />hospital_beds_per_thousand:  5.900<br />total_deaths_log:  8.1461295<br />population:    1318442","continent: Asia<br />hospital_beds_per_thousand:  2.810<br />total_deaths_log: 10.3392555<br />population:   84339067","continent: Asia<br />hospital_beds_per_thousand:  1.200<br />total_deaths_log:  7.2977683<br />population:    9890400","continent: Asia<br />hospital_beds_per_thousand:  4.000<br />total_deaths_log:  6.4377516<br />population:   33469199","continent: Asia<br />hospital_beds_per_thousand:  2.600<br />total_deaths_log:  3.5553481<br />population:   97338583","continent: Asia<br />hospital_beds_per_thousand:  0.700<br />total_deaths_log:  6.7238324<br />population:   29825968"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(183,159,0,1)","opacity":1,"size":[6.88735450997278,4.63686556281505,5.36556113162774,4.42913605677999,10.1718714073081,4.21684831635912,4.10868756427674,5.81620689921915,22.6771653543307,4.77430492674755,5.14332027828177,22.2836502459282,12.0175917126267,8.34460056199348,6.9385926337155,5.24492424640618,9.38138240997443,5.37055656788136,5.93791175321987,4.80879875767793,5.05175511744858,5.12302653706471,5.08079943701085,4.1806661394092,6.61331627809765,4.145474296381,4.68130344375443,7.4537352800639,6.46823376828428,4.90506733086469,11.1827008814197,4.90449337188419,8.99381043856724,4.62489119316727,6.71852684245567,4.98425562546501,7.34611737590577,6.08447742157463,5.8632771693443,6.21040181442426,5.31779016303469,7.94106225109912,4.35130316779772,8.3539967459608,5.34598124459764,6.66120790112704,8.69391167341212,6.49984619769143],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(183,159,0,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.89,4.51,7.37,11,5.64,3.5,7.454,5.54,3.4,6.63,2.5,4.69,4.51,3.28,5.98,8,4.51,4.21,7.02,2.91,2.96,4.51,3.18,2.397,4.28,5.57,2.397,6.56,4.51,4.485,5.8,13.8,3.861,3.32,4.28,3.6,6.62,3.39,6.892,8.05,3.8,5.609,5.82,4.5,2.97,2.22,4.53,8.8,2.54,2.397],"y":[7.6980291702728,4.74493212836325,9.13032266399015,7.70120018085745,10.0375812870168,8.73552518573323,9.44541249415567,8.67795057029435,5.52146091786225,10.1572766939647,7.78904040165748,6.75693238924755,4.74493212836325,6.70563909486,11.457655854453,11.2373695723163,4.74493212836325,8.96520680277036,9.89101003102502,3.36729582998647,8.44526745184465,4.74493212836325,11.5865104432436,4.02535169073515,7.50163445788341,7.53476265703754,4.02535169073515,8.17159948034546,6.60394382460047,5.95324333428778,8.47324130388705,3.3322045101752,7.12367278520461,9.71667593046931,8.20028826028755,6.48616078894409,10.8542376804619,9.73074001817645,10.0431190516213,11.4699344531651,4.43081679884331,8.54694614956558,9.15122710748368,8.29679586577005,11.2253767169637,9.50315922853312,9.2398020821258,10.415202780487,11.7504688393894,4.02535169073515],"text":["continent: Europe<br />hospital_beds_per_thousand:  2.890<br />total_deaths_log:  7.6980292<br />population:    2877800","continent: Europe<br />hospital_beds_per_thousand:  4.510<br />total_deaths_log:  4.7449321<br />population:      77265","continent: Europe<br />hospital_beds_per_thousand:  7.370<br />total_deaths_log:  9.1303227<br />population:    9006400","continent: Europe<br />hospital_beds_per_thousand: 11.000<br />total_deaths_log:  7.7012002<br />population:    9449321","continent: Europe<br />hospital_beds_per_thousand:  5.640<br />total_deaths_log: 10.0375813<br />population:   11589616","continent: Europe<br />hospital_beds_per_thousand:  3.500<br />total_deaths_log:  8.7355252<br />population:    3280815","continent: Europe<br />hospital_beds_per_thousand:  7.454<br />total_deaths_log:  9.4454125<br />population:    6948445","continent: Europe<br />hospital_beds_per_thousand:  5.540<br />total_deaths_log:  8.6779506<br />population:    4105268","continent: Europe<br />hospital_beds_per_thousand:  3.400<br />total_deaths_log:  5.5214609<br />population:     875899","continent: Europe<br />hospital_beds_per_thousand:  6.630<br />total_deaths_log: 10.1572767<br />population:   10708982","continent: Europe<br />hospital_beds_per_thousand:  2.500<br />total_deaths_log:  7.7890404<br />population:    5792203","continent: Europe<br />hospital_beds_per_thousand:  4.690<br />total_deaths_log:  6.7569324<br />population:    1326539","continent: Europe<br />hospital_beds_per_thousand:  4.510<br />total_deaths_log:  4.7449321<br />population:      48865","continent: Europe<br />hospital_beds_per_thousand:  3.280<br />total_deaths_log:  6.7056391<br />population:    5540718","continent: Europe<br />hospital_beds_per_thousand:  5.980<br />total_deaths_log: 11.4576559<br />population:   68147687","continent: Europe<br />hospital_beds_per_thousand:  8.000<br />total_deaths_log: 11.2373696<br />population:   83783945","continent: Europe<br />hospital_beds_per_thousand:  4.510<br />total_deaths_log:  4.7449321<br />population:      33691","continent: Europe<br />hospital_beds_per_thousand:  4.210<br />total_deaths_log:  8.9652068<br />population:   10423056","continent: Europe<br />hospital_beds_per_thousand:  7.020<br />total_deaths_log:  9.8910100<br />population:    9660350","continent: Europe<br />hospital_beds_per_thousand:  2.910<br />total_deaths_log:  3.3672958<br />population:     341250","continent: Europe<br />hospital_beds_per_thousand:  2.960<br />total_deaths_log:  8.4452675<br />population:    4937796","continent: Europe<br />hospital_beds_per_thousand:  4.510<br />total_deaths_log:  4.7449321<br />population:      85032","continent: Europe<br />hospital_beds_per_thousand:  3.180<br />total_deaths_log: 11.5865104<br />population:   60461828","continent: Europe<br />hospital_beds_per_thousand:  2.397<br />total_deaths_log:  4.0253517<br />population:     101073","continent: Europe<br />hospital_beds_per_thousand:  4.280<br />total_deaths_log:  7.5016345<br />population:    1932774","continent: Europe<br />hospital_beds_per_thousand:  5.570<br />total_deaths_log:  7.5347627<br />population:    1886202","continent: Europe<br />hospital_beds_per_thousand:  2.397<br />total_deaths_log:  4.0253517<br />population:      38137","continent: Europe<br />hospital_beds_per_thousand:  6.560<br />total_deaths_log:  8.1715995<br />population:    2722291","continent: Europe<br />hospital_beds_per_thousand:  4.510<br />total_deaths_log:  6.6039438<br />population:     625976","continent: Europe<br />hospital_beds_per_thousand:  4.485<br />total_deaths_log:  5.9532433<br />population:     441539","continent: Europe<br />hospital_beds_per_thousand:  5.800<br />total_deaths_log:  8.4732413<br />population:    4033963","continent: Europe<br />hospital_beds_per_thousand: 13.800<br />total_deaths_log:  3.3322045<br />population:      39244","continent: Europe<br />hospital_beds_per_thousand:  3.861<br />total_deaths_log:  7.1236728<br />population:     628062","continent: Europe<br />hospital_beds_per_thousand:  3.320<br />total_deaths_log:  9.7166759<br />population:   17134873","continent: Europe<br />hospital_beds_per_thousand:  4.280<br />total_deaths_log:  8.2002883<br />population:    2083380","continent: Europe<br />hospital_beds_per_thousand:  3.600<br />total_deaths_log:  6.4861608<br />population:    5421242","continent: Europe<br />hospital_beds_per_thousand:  6.620<br />total_deaths_log: 10.8542377<br />population:   37846605","continent: Europe<br />hospital_beds_per_thousand:  3.390<br />total_deaths_log:  9.7307400<br />population:   10196707","continent: Europe<br />hospital_beds_per_thousand:  6.892<br />total_deaths_log: 10.0431191<br />population:   19237682","continent: Europe<br />hospital_beds_per_thousand:  8.050<br />total_deaths_log: 11.4699345<br />population:  145934460","continent: Europe<br />hospital_beds_per_thousand:  3.800<br />total_deaths_log:  4.4308168<br />population:      33938","continent: Europe<br />hospital_beds_per_thousand:  5.609<br />total_deaths_log:  8.5469461<br />population:    6804596","continent: Europe<br />hospital_beds_per_thousand:  5.820<br />total_deaths_log:  9.1512271<br />population:    5459643","continent: Europe<br />hospital_beds_per_thousand:  4.500<br />total_deaths_log:  8.2967959<br />population:    2078932","continent: Europe<br />hospital_beds_per_thousand:  2.970<br />total_deaths_log: 11.2253767<br />population:   46754783","continent: Europe<br />hospital_beds_per_thousand:  2.220<br />total_deaths_log:  9.5031592<br />population:   10099270","continent: Europe<br />hospital_beds_per_thousand:  4.530<br />total_deaths_log:  9.2398021<br />population:    8654618","continent: Europe<br />hospital_beds_per_thousand:  8.800<br />total_deaths_log: 10.4152028<br />population:   43733759","continent: Europe<br />hospital_beds_per_thousand:  2.540<br />total_deaths_log: 11.7504688<br />population:   67886004","continent: Europe<br />hospital_beds_per_thousand:  2.397<br />total_deaths_log:  4.0253517<br />population:        809"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","opacity":1,"size":[4.62441264707907,3.91725934528901,5.27433242490765,5.31065063832068,5.47522263268834,4.68165046963804,5.09247373249521,4.78867902228964,4.24549412239739,5.40952184834044,4.97825362567935,4.35305728917301,3.88872242081637,4.95193808482924,7.89151117485761,8.33891710728905,3.86985246247264,5.38761282993713,5.32765474964214,4.07016350176016,4.88630267248014,3.92408609687041,7.6526936817906,3.93725269365125,4.47188126396409,4.46348540915922,3.87576537404066,4.6012613126787,4.17337353819581,4.11021271476097,4.77987483988156,3.87718196356388,4.17403006559142,5.84138476900358,4.49836104772134,4.93922682875694,6.84386942996267,5.37005488333806,5.96424679354674,9.79688925683694,3.87019107494667,5.07881053447547,4.94332751733134,4.49759298736785,7.18547278067706,5.36243670944712,5.24484610434436,7.07359722787428,7.8836086030963,3.77952755905512],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,186,56,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.397,3.8,2.9,5.8,1.3,2.9,2.5,2.9,1.13,5.2,3.8,1.6,1.3,3.7,0.6,0.7,0.7,1.7,1.38,0.9,2.3,2.3,1.3,2.6,3,2.5,2.77],"y":[4.02535169073515,3.3322045101752,5.23644196282995,3.71357206670431,5.75890177387728,5.23644196282995,10.0358307395238,5.23644196282995,7.98309894071089,6.02586597382531,6.33859407820318,8.10228362448007,7.5999019592085,0,8.82379514872053,5.52545293913178,8.42441979126388,6.33859407820318,12.2131922409563,5.17614973257383,8.71440336070394,5.23644196282995,4.06044301054642,2.30258509299405,4.95582705760126,6.02586597382531,13.2155403745005],"text":["continent: North America<br />hospital_beds_per_thousand:  2.397<br />total_deaths_log:  4.0253517<br />population:      15002","continent: North America<br />hospital_beds_per_thousand:  3.800<br />total_deaths_log:  3.3322045<br />population:      97928","continent: North America<br />hospital_beds_per_thousand:  2.900<br />total_deaths_log:  5.2364420<br />population:     393248","continent: North America<br />hospital_beds_per_thousand:  5.800<br />total_deaths_log:  3.7135721<br />population:     287371","continent: North America<br />hospital_beds_per_thousand:  1.300<br />total_deaths_log:  5.7589018<br />population:     397621","continent: North America<br />hospital_beds_per_thousand:  2.900<br />total_deaths_log:  5.2364420<br />population:      62273","continent: North America<br />hospital_beds_per_thousand:  2.500<br />total_deaths_log: 10.0358307<br />population:   37742157","continent: North America<br />hospital_beds_per_thousand:  2.900<br />total_deaths_log:  5.2364420<br />population:      65720","continent: North America<br />hospital_beds_per_thousand:  1.130<br />total_deaths_log:  7.9830989<br />population:    5094114","continent: North America<br />hospital_beds_per_thousand:  5.200<br />total_deaths_log:  6.0258660<br />population:   11326616","continent: North America<br />hospital_beds_per_thousand:  3.800<br />total_deaths_log:  6.3385941<br />population:      71991","continent: North America<br />hospital_beds_per_thousand:  1.600<br />total_deaths_log:  8.1022836<br />population:   10847904","continent: North America<br />hospital_beds_per_thousand:  1.300<br />total_deaths_log:  7.5999020<br />population:    6486201","continent: North America<br />hospital_beds_per_thousand:  3.700<br />total_deaths_log:  0.0000000<br />population:     112519","continent: North America<br />hospital_beds_per_thousand:  0.600<br />total_deaths_log:  8.8237951<br />population:   17915567","continent: North America<br />hospital_beds_per_thousand:  0.700<br />total_deaths_log:  5.5254529<br />population:   11402533","continent: North America<br />hospital_beds_per_thousand:  0.700<br />total_deaths_log:  8.4244198<br />population:    9904608","continent: North America<br />hospital_beds_per_thousand:  1.700<br />total_deaths_log:  6.3385941<br />population:    2961161","continent: North America<br />hospital_beds_per_thousand:  1.380<br />total_deaths_log: 12.2131922<br />population:  128932753","continent: North America<br />hospital_beds_per_thousand:  0.900<br />total_deaths_log:  5.1761497<br />population:    6624554","continent: North America<br />hospital_beds_per_thousand:  2.300<br />total_deaths_log:  8.7144034<br />population:    4314768","continent: North America<br />hospital_beds_per_thousand:  2.300<br />total_deaths_log:  5.2364420<br />population:      53192","continent: North America<br />hospital_beds_per_thousand:  1.300<br />total_deaths_log:  4.0604430<br />population:     183629","continent: North America<br />hospital_beds_per_thousand:  2.600<br />total_deaths_log:  2.3025851<br />population:     110947","continent: North America<br />hospital_beds_per_thousand:  3.000<br />total_deaths_log:  4.9558271<br />population:    1399491","continent: North America<br />hospital_beds_per_thousand:  2.500<br />total_deaths_log:  6.0258660<br />population:      38718","continent: North America<br />hospital_beds_per_thousand:  2.770<br />total_deaths_log: 13.2155404<br />population:  331002647"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,196,1)","opacity":1,"size":[3.83887001208834,3.93475928790502,4.0915705798688,4.04617516767648,4.09330433184474,3.90301955314011,6.8396379756172,3.90643513339366,4.90368783614799,5.45587089258957,3.91242404163418,5.42006110459172,5.04804519383528,3.94601229409124,5.88783463482264,5.46147978241935,5.3471060730183,4.63656554294842,9.43551789581697,5.06150444730902,4.81411308910996,3.89353247451858,3.99250825688246,3.94483674463719,4.368626017523,3.87651143966548,12.8419352525742],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,191,196,1)"}},"hoveron":"points","name":"North America","legendgroup":"North America","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.84,2.3,2.7,2.61,2.61,2.61,2.61,1.4,2.61],"y":[6.81234509417748,0.693147180559945,3.52636052461616,3.52636052461616,3.25809653802148,3.66356164612965,3.66356164612965,3.66356164612965,3.66356164612965],"text":["continent: Oceania<br />hospital_beds_per_thousand:  3.840<br />total_deaths_log:  6.8123451<br />population:   25499881","continent: Oceania<br />hospital_beds_per_thousand:  2.300<br />total_deaths_log:  0.6931472<br />population:     896444","continent: Oceania<br />hospital_beds_per_thousand:  2.700<br />total_deaths_log:  3.5263605<br />population:      59194","continent: Oceania<br />hospital_beds_per_thousand:  2.610<br />total_deaths_log:  3.5263605<br />population:     115021","continent: Oceania<br />hospital_beds_per_thousand:  2.610<br />total_deaths_log:  3.2580965<br />population:    4822233","continent: Oceania<br />hospital_beds_per_thousand:  2.610<br />total_deaths_log:  3.6635616<br />population:    8947027","continent: Oceania<br />hospital_beds_per_thousand:  2.610<br />total_deaths_log:  3.6635616<br />population:     198410","continent: Oceania<br />hospital_beds_per_thousand:  1.400<br />total_deaths_log:  3.6635616<br />population:     686878","continent: Oceania<br />hospital_beds_per_thousand:  2.610<br />total_deaths_log:  3.6635616<br />population:     307150"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","opacity":1,"size":[6.2948321354234,4.25093227374482,3.89988668788819,3.94786637250358,4.8732724970146,5.26939672355823,4.00095067723417,4.19211147300379,4.055223870826],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(97,156,255,1)"}},"hoveron":"points","name":"Oceania","legendgroup":"Oceania","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[5,1.1,2.2,2.11,1.71,1.5,1.6,1.3,1.6,3.1,2.8,0.8],"y":[10.9217570885217,9.40631825521762,12.6461001979874,10.0280475724715,11.0475511041082,9.72190572207717,5.41610040220442,8.29479935899257,10.8442367232427,5.17614973257383,6.80350525760834,7.34923082461333],"text":["continent: South America<br />hospital_beds_per_thousand:  5.000<br />total_deaths_log: 10.9217571<br />population:   45195777","continent: South America<br />hospital_beds_per_thousand:  1.100<br />total_deaths_log:  9.4063183<br />population:   11673029","continent: South America<br />hospital_beds_per_thousand:  2.200<br />total_deaths_log: 12.6461002<br />population:  212559409","continent: South America<br />hospital_beds_per_thousand:  2.110<br />total_deaths_log: 10.0280476<br />population:   19116209","continent: South America<br />hospital_beds_per_thousand:  1.710<br />total_deaths_log: 11.0475511<br />population:   50882884","continent: South America<br />hospital_beds_per_thousand:  1.500<br />total_deaths_log:  9.7219057<br />population:   17643060","continent: South America<br />hospital_beds_per_thousand:  1.600<br />total_deaths_log:  5.4161004<br />population:     786559","continent: South America<br />hospital_beds_per_thousand:  1.300<br />total_deaths_log:  8.2947994<br />population:    7132530","continent: South America<br />hospital_beds_per_thousand:  1.600<br />total_deaths_log: 10.8442367<br />population:   32971846","continent: South America<br />hospital_beds_per_thousand:  3.100<br />total_deaths_log:  5.1761497<br />population:     586634","continent: South America<br />hospital_beds_per_thousand:  2.800<br />total_deaths_log:  6.8035053<br />population:    3473727","continent: South America<br />hospital_beds_per_thousand:  0.800<br />total_deaths_log:  7.3492308<br />population:   28435943"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(245,100,227,1)","opacity":1,"size":[7.12820591397582,5.48131426093833,11.041719677845,5.95733806477112,7.33265512700631,5.87173812807369,4.22106810287099,5.10975396842862,6.63971632628835,4.16077974633916,4.70780042935732,6.43569857239817],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(245,100,227,1)"}},"hoveron":"points","name":"South America","legendgroup":"South America","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.1,0.273417721518987,0.446835443037975,0.620253164556962,0.793670886075949,0.967088607594937,1.14050632911392,1.31392405063291,1.4873417721519,1.66075949367089,1.83417721518987,2.00759493670886,2.18101265822785,2.35443037974684,2.52784810126582,2.70126582278481,2.8746835443038,3.04810126582279,3.22151898734177,3.39493670886076,3.56835443037975,3.74177215189873,3.91518987341772,4.08860759493671,4.2620253164557,4.43544303797468,4.60886075949367,4.78227848101266,4.95569620253165,5.12911392405063,5.30253164556962,5.47594936708861,5.64936708860759,5.82278481012658,5.99620253164557,6.16962025316456,6.34303797468354,6.51645569620253,6.68987341772152,6.86329113924051,7.03670886075949,7.21012658227848,7.38354430379747,7.55696202531646,7.73037974683544,7.90379746835443,8.07721518987342,8.2506329113924,8.42405063291139,8.59746835443038,8.77088607594937,8.94430379746835,9.11772151898734,9.29113924050633,9.46455696202532,9.6379746835443,9.81139240506329,9.98481012658228,10.1582278481013,10.3316455696203,10.5050632911392,10.6784810126582,10.8518987341772,11.0253164556962,11.1987341772152,11.3721518987342,11.5455696202532,11.7189873417722,11.8924050632911,12.0658227848101,12.2392405063291,12.4126582278481,12.5860759493671,12.7594936708861,12.9329113924051,13.1063291139241,13.279746835443,13.453164556962,13.626582278481,13.8],"y":[5.64680974266843,5.94056443442123,6.19753818927555,6.41255684266765,6.58036203694694,6.7018340790917,6.78756660048447,6.84058415853862,6.84905967497023,6.831700361805,6.77847419523325,6.65833335611065,6.52400618224285,6.42737246063938,6.30383649173621,6.17354282389967,6.11447428725224,6.10503507011269,6.12424770722999,6.16611388827614,6.22463530292318,6.29428035183134,6.38061901678276,6.48434124490345,6.60171970329135,6.72902705904438,6.86253597926047,6.99851913103756,7.13324918147358,7.26299879766646,7.38516984587711,7.50235351362278,7.614879545355,7.72263871001962,7.82552177656248,7.92341951392941,8.01622269106626,8.10382207691886,8.18610844043306,8.26297255055469,8.33430517622959,8.3999970864036,8.45993905002257,8.51402183603233,8.56213621337872,8.60417295100758,8.64002281786475,8.66957658289607,8.69272501504738,8.70935888326452,8.71936895649333,8.72264600367964,8.71908079376931,8.70856409570816,8.69098667844203,8.66623931091678,8.63421276207822,8.59479780087221,8.54788519624459,8.4933657171412,8.43113013250786,8.36106921129043,8.28307372243474,8.19703443488663,8.10284211759195,8.00038753949653,7.8895614695462,7.77025467668682,7.64235792986422,7.50576199802424,7.36035765011271,7.20603565507549,7.0426867818584,6.87020179940729,6.688471476668,6.49738658258636,6.29683788610822,6.08671615617942,5.86691216174579,5.63731667175317],"text":["hospital_beds_per_thousand:  0.1000000<br />total_deaths_log: 5.646810<br />population: 1","hospital_beds_per_thousand:  0.2734177<br />total_deaths_log: 5.940564<br />population: 1","hospital_beds_per_thousand:  0.4468354<br />total_deaths_log: 6.197538<br />population: 1","hospital_beds_per_thousand:  0.6202532<br />total_deaths_log: 6.412557<br />population: 1","hospital_beds_per_thousand:  0.7936709<br />total_deaths_log: 6.580362<br />population: 1","hospital_beds_per_thousand:  0.9670886<br />total_deaths_log: 6.701834<br />population: 1","hospital_beds_per_thousand:  1.1405063<br />total_deaths_log: 6.787567<br />population: 1","hospital_beds_per_thousand:  1.3139241<br />total_deaths_log: 6.840584<br />population: 1","hospital_beds_per_thousand:  1.4873418<br />total_deaths_log: 6.849060<br />population: 1","hospital_beds_per_thousand:  1.6607595<br />total_deaths_log: 6.831700<br />population: 1","hospital_beds_per_thousand:  1.8341772<br />total_deaths_log: 6.778474<br />population: 1","hospital_beds_per_thousand:  2.0075949<br />total_deaths_log: 6.658333<br />population: 1","hospital_beds_per_thousand:  2.1810127<br />total_deaths_log: 6.524006<br />population: 1","hospital_beds_per_thousand:  2.3544304<br />total_deaths_log: 6.427372<br />population: 1","hospital_beds_per_thousand:  2.5278481<br />total_deaths_log: 6.303836<br />population: 1","hospital_beds_per_thousand:  2.7012658<br />total_deaths_log: 6.173543<br />population: 1","hospital_beds_per_thousand:  2.8746835<br />total_deaths_log: 6.114474<br />population: 1","hospital_beds_per_thousand:  3.0481013<br />total_deaths_log: 6.105035<br />population: 1","hospital_beds_per_thousand:  3.2215190<br />total_deaths_log: 6.124248<br />population: 1","hospital_beds_per_thousand:  3.3949367<br />total_deaths_log: 6.166114<br />population: 1","hospital_beds_per_thousand:  3.5683544<br />total_deaths_log: 6.224635<br />population: 1","hospital_beds_per_thousand:  3.7417722<br />total_deaths_log: 6.294280<br />population: 1","hospital_beds_per_thousand:  3.9151899<br />total_deaths_log: 6.380619<br />population: 1","hospital_beds_per_thousand:  4.0886076<br />total_deaths_log: 6.484341<br />population: 1","hospital_beds_per_thousand:  4.2620253<br />total_deaths_log: 6.601720<br />population: 1","hospital_beds_per_thousand:  4.4354430<br />total_deaths_log: 6.729027<br />population: 1","hospital_beds_per_thousand:  4.6088608<br />total_deaths_log: 6.862536<br />population: 1","hospital_beds_per_thousand:  4.7822785<br />total_deaths_log: 6.998519<br />population: 1","hospital_beds_per_thousand:  4.9556962<br />total_deaths_log: 7.133249<br />population: 1","hospital_beds_per_thousand:  5.1291139<br />total_deaths_log: 7.262999<br />population: 1","hospital_beds_per_thousand:  5.3025316<br />total_deaths_log: 7.385170<br />population: 1","hospital_beds_per_thousand:  5.4759494<br />total_deaths_log: 7.502354<br />population: 1","hospital_beds_per_thousand:  5.6493671<br />total_deaths_log: 7.614880<br />population: 1","hospital_beds_per_thousand:  5.8227848<br />total_deaths_log: 7.722639<br />population: 1","hospital_beds_per_thousand:  5.9962025<br />total_deaths_log: 7.825522<br />population: 1","hospital_beds_per_thousand:  6.1696203<br />total_deaths_log: 7.923420<br />population: 1","hospital_beds_per_thousand:  6.3430380<br />total_deaths_log: 8.016223<br />population: 1","hospital_beds_per_thousand:  6.5164557<br />total_deaths_log: 8.103822<br />population: 1","hospital_beds_per_thousand:  6.6898734<br />total_deaths_log: 8.186108<br />population: 1","hospital_beds_per_thousand:  6.8632911<br />total_deaths_log: 8.262973<br />population: 1","hospital_beds_per_thousand:  7.0367089<br />total_deaths_log: 8.334305<br />population: 1","hospital_beds_per_thousand:  7.2101266<br />total_deaths_log: 8.399997<br />population: 1","hospital_beds_per_thousand:  7.3835443<br />total_deaths_log: 8.459939<br />population: 1","hospital_beds_per_thousand:  7.5569620<br />total_deaths_log: 8.514022<br />population: 1","hospital_beds_per_thousand:  7.7303797<br />total_deaths_log: 8.562136<br />population: 1","hospital_beds_per_thousand:  7.9037975<br />total_deaths_log: 8.604173<br />population: 1","hospital_beds_per_thousand:  8.0772152<br />total_deaths_log: 8.640023<br />population: 1","hospital_beds_per_thousand:  8.2506329<br />total_deaths_log: 8.669577<br />population: 1","hospital_beds_per_thousand:  8.4240506<br />total_deaths_log: 8.692725<br />population: 1","hospital_beds_per_thousand:  8.5974684<br />total_deaths_log: 8.709359<br />population: 1","hospital_beds_per_thousand:  8.7708861<br />total_deaths_log: 8.719369<br />population: 1","hospital_beds_per_thousand:  8.9443038<br />total_deaths_log: 8.722646<br />population: 1","hospital_beds_per_thousand:  9.1177215<br />total_deaths_log: 8.719081<br />population: 1","hospital_beds_per_thousand:  9.2911392<br />total_deaths_log: 8.708564<br />population: 1","hospital_beds_per_thousand:  9.4645570<br />total_deaths_log: 8.690987<br />population: 1","hospital_beds_per_thousand:  9.6379747<br />total_deaths_log: 8.666239<br />population: 1","hospital_beds_per_thousand:  9.8113924<br />total_deaths_log: 8.634213<br />population: 1","hospital_beds_per_thousand:  9.9848101<br />total_deaths_log: 8.594798<br />population: 1","hospital_beds_per_thousand: 10.1582278<br />total_deaths_log: 8.547885<br />population: 1","hospital_beds_per_thousand: 10.3316456<br />total_deaths_log: 8.493366<br />population: 1","hospital_beds_per_thousand: 10.5050633<br />total_deaths_log: 8.431130<br />population: 1","hospital_beds_per_thousand: 10.6784810<br />total_deaths_log: 8.361069<br />population: 1","hospital_beds_per_thousand: 10.8518987<br />total_deaths_log: 8.283074<br />population: 1","hospital_beds_per_thousand: 11.0253165<br />total_deaths_log: 8.197034<br />population: 1","hospital_beds_per_thousand: 11.1987342<br />total_deaths_log: 8.102842<br />population: 1","hospital_beds_per_thousand: 11.3721519<br />total_deaths_log: 8.000388<br />population: 1","hospital_beds_per_thousand: 11.5455696<br />total_deaths_log: 7.889561<br />population: 1","hospital_beds_per_thousand: 11.7189873<br />total_deaths_log: 7.770255<br />population: 1","hospital_beds_per_thousand: 11.8924051<br />total_deaths_log: 7.642358<br />population: 1","hospital_beds_per_thousand: 12.0658228<br />total_deaths_log: 7.505762<br />population: 1","hospital_beds_per_thousand: 12.2392405<br />total_deaths_log: 7.360358<br />population: 1","hospital_beds_per_thousand: 12.4126582<br />total_deaths_log: 7.206036<br />population: 1","hospital_beds_per_thousand: 12.5860759<br />total_deaths_log: 7.042687<br />population: 1","hospital_beds_per_thousand: 12.7594937<br />total_deaths_log: 6.870202<br />population: 1","hospital_beds_per_thousand: 12.9329114<br />total_deaths_log: 6.688471<br />population: 1","hospital_beds_per_thousand: 13.1063291<br />total_deaths_log: 6.497387<br />population: 1","hospital_beds_per_thousand: 13.2797468<br />total_deaths_log: 6.296838<br />population: 1","hospital_beds_per_thousand: 13.4531646<br />total_deaths_log: 6.086716<br />population: 1","hospital_beds_per_thousand: 13.6265823<br />total_deaths_log: 5.866912<br />population: 1","hospital_beds_per_thousand: 13.8000000<br />total_deaths_log: 5.637317<br />population: 1"],"type":"scatter","mode":"lines","name":"fitted values","line":{"width":3.77952755905512,"color":"rgba(51,102,255,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.1,0.273417721518987,0.446835443037975,0.620253164556962,0.793670886075949,0.967088607594937,1.14050632911392,1.31392405063291,1.4873417721519,1.66075949367089,1.83417721518987,2.00759493670886,2.18101265822785,2.35443037974684,2.52784810126582,2.70126582278481,2.8746835443038,3.04810126582279,3.22151898734177,3.39493670886076,3.56835443037975,3.74177215189873,3.91518987341772,4.08860759493671,4.2620253164557,4.43544303797468,4.60886075949367,4.78227848101266,4.95569620253165,5.12911392405063,5.30253164556962,5.47594936708861,5.64936708860759,5.82278481012658,5.99620253164557,6.16962025316456,6.34303797468354,6.51645569620253,6.68987341772152,6.86329113924051,7.03670886075949,7.21012658227848,7.38354430379747,7.55696202531646,7.73037974683544,7.90379746835443,8.07721518987342,8.2506329113924,8.42405063291139,8.59746835443038,8.77088607594937,8.94430379746835,9.11772151898734,9.29113924050633,9.46455696202532,9.6379746835443,9.81139240506329,9.98481012658228,10.1582278481013,10.3316455696203,10.5050632911392,10.6784810126582,10.8518987341772,11.0253164556962,11.1987341772152,11.3721518987342,11.5455696202532,11.7189873417722,11.8924050632911,12.0658227848101,12.2392405063291,12.4126582278481,12.5860759493671,12.7594936708861,12.9329113924051,13.1063291139241,13.279746835443,13.453164556962,13.626582278481,13.8,13.8,13.8,13.626582278481,13.453164556962,13.279746835443,13.1063291139241,12.9329113924051,12.7594936708861,12.5860759493671,12.4126582278481,12.2392405063291,12.0658227848101,11.8924050632911,11.7189873417722,11.5455696202532,11.3721518987342,11.1987341772152,11.0253164556962,10.8518987341772,10.6784810126582,10.5050632911392,10.3316455696203,10.1582278481013,9.98481012658228,9.81139240506329,9.6379746835443,9.46455696202532,9.29113924050633,9.11772151898734,8.94430379746835,8.77088607594937,8.59746835443038,8.42405063291139,8.2506329113924,8.07721518987342,7.90379746835443,7.73037974683544,7.55696202531646,7.38354430379747,7.21012658227848,7.03670886075949,6.86329113924051,6.68987341772152,6.51645569620253,6.34303797468354,6.16962025316456,5.99620253164557,5.82278481012658,5.64936708860759,5.47594936708861,5.30253164556962,5.12911392405063,4.95569620253165,4.78227848101266,4.60886075949367,4.43544303797468,4.2620253164557,4.08860759493671,3.91518987341772,3.74177215189873,3.56835443037975,3.39493670886076,3.22151898734177,3.04810126582279,2.8746835443038,2.70126582278481,2.52784810126582,2.35443037974684,2.18101265822785,2.00759493670886,1.83417721518987,1.66075949367089,1.4873417721519,1.31392405063291,1.14050632911392,0.967088607594937,0.793670886075949,0.620253164556962,0.446835443037975,0.273417721518987,0.1,0.1],"y":[4.05599420416431,4.70641682984749,5.25285304552516,5.67698282079154,5.96583752474507,6.12928718427966,6.20474521085748,6.22914316150898,6.21440571467399,6.18027706150732,6.13650793554476,6.03640600376028,5.89000645503981,5.78488046223536,5.6726923013071,5.52516471158597,5.45103870960711,5.44696980255425,5.46799921204423,5.49566399135867,5.53043671083099,5.58555863602241,5.6672967088815,5.76805443980704,5.87981226159809,5.99643108954187,6.1142718883941,6.23204224760274,6.34996057039666,6.46854096685092,6.58575750689552,6.69470439072022,6.79540055441793,6.88857184586757,6.9748424614707,7.05472597570642,7.12862609282497,7.19684328566708,7.2595843080053,7.31697253123479,7.36905788002691,7.41582574059711,7.45720460629324,7.49307245915126,7.52326201453963,7.54756501944927,7.56573582097471,7.57749442702394,7.58252927551105,7.58049991523143,7.57103978201011,7.55375922645118,7.52824891301168,7.49408366301481,7.45082675698646,7.39803464707147,7.33526196369236,7.262066639847,7.17801493049899,7.08268608170639,6.9756764099344,6.8566025872616,6.72510398845019,6.58084403201773,6.4235105278067,6.25281511641302,6.06849194202147,5.87029573458925,5.65799948920892,5.43139192281815,5.19027486641176,4.93446072050583,4.66377006827653,4.37802950879489,4.07706974486689,3.76072393753985,3.42882632263935,3.08121107331872,2.71771138570136,2.33815876130187,2.33815876130187,8.93647458220447,9.01611293779021,9.09222123904011,9.16484944957709,9.23404922763287,9.2998732084691,9.36237409001969,9.42160349544027,9.47761058964515,9.53044043381367,9.58013207323032,9.62671637051952,9.6702136187844,9.71063099707094,9.74795996258003,9.7821737073772,9.81322483775554,9.84104345641929,9.86553583531926,9.88658385508132,9.904045352576,9.9177554619902,9.92752896189743,9.93316356046409,9.93444397476208,9.93114659989761,9.9230445284015,9.90991267452694,9.89153278090811,9.86769813097655,9.83821785129761,9.80292075458371,9.7616587387682,9.71430981475479,9.66078088256589,9.60101041221781,9.53497121291339,9.4626734937519,9.3841684322101,9.29955247243227,9.20897256987459,9.11263257286082,9.01080086817064,8.90381928930755,8.7921130521524,8.67620109165427,8.55670557417168,8.43435853629208,8.31000263652533,8.18458218485871,8.057456628482,7.9165377925505,7.76499601447238,7.61080007012683,7.46162302854688,7.3236271449846,7.20062804999987,7.09394132468402,7.00300206764027,6.91883389501538,6.83656378519362,6.78049620241574,6.76310033767114,6.77790986489737,6.82192093621337,6.93498068216532,7.0698644590434,7.15800590944588,7.28026070846101,7.42044045492174,7.48312366210268,7.48371363526647,7.45202515556826,7.37038799011146,7.27438097390374,7.19488654914881,7.14813086454375,7.14222333302595,7.17471203899498,7.23762528117256,4.05599420416431],"text":["hospital_beds_per_thousand:  0.1000000<br />total_deaths_log: 5.646810<br />population: 1","hospital_beds_per_thousand:  0.2734177<br />total_deaths_log: 5.940564<br />population: 1","hospital_beds_per_thousand:  0.4468354<br />total_deaths_log: 6.197538<br />population: 1","hospital_beds_per_thousand:  0.6202532<br />total_deaths_log: 6.412557<br />population: 1","hospital_beds_per_thousand:  0.7936709<br />total_deaths_log: 6.580362<br />population: 1","hospital_beds_per_thousand:  0.9670886<br />total_deaths_log: 6.701834<br />population: 1","hospital_beds_per_thousand:  1.1405063<br />total_deaths_log: 6.787567<br />population: 1","hospital_beds_per_thousand:  1.3139241<br />total_deaths_log: 6.840584<br />population: 1","hospital_beds_per_thousand:  1.4873418<br />total_deaths_log: 6.849060<br />population: 1","hospital_beds_per_thousand:  1.6607595<br />total_deaths_log: 6.831700<br />population: 1","hospital_beds_per_thousand:  1.8341772<br />total_deaths_log: 6.778474<br />population: 1","hospital_beds_per_thousand:  2.0075949<br />total_deaths_log: 6.658333<br />population: 1","hospital_beds_per_thousand:  2.1810127<br />total_deaths_log: 6.524006<br />population: 1","hospital_beds_per_thousand:  2.3544304<br />total_deaths_log: 6.427372<br />population: 1","hospital_beds_per_thousand:  2.5278481<br />total_deaths_log: 6.303836<br />population: 1","hospital_beds_per_thousand:  2.7012658<br />total_deaths_log: 6.173543<br />population: 1","hospital_beds_per_thousand:  2.8746835<br />total_deaths_log: 6.114474<br />population: 1","hospital_beds_per_thousand:  3.0481013<br />total_deaths_log: 6.105035<br />population: 1","hospital_beds_per_thousand:  3.2215190<br />total_deaths_log: 6.124248<br />population: 1","hospital_beds_per_thousand:  3.3949367<br />total_deaths_log: 6.166114<br />population: 1","hospital_beds_per_thousand:  3.5683544<br />total_deaths_log: 6.224635<br />population: 1","hospital_beds_per_thousand:  3.7417722<br />total_deaths_log: 6.294280<br />population: 1","hospital_beds_per_thousand:  3.9151899<br />total_deaths_log: 6.380619<br />population: 1","hospital_beds_per_thousand:  4.0886076<br />total_deaths_log: 6.484341<br />population: 1","hospital_beds_per_thousand:  4.2620253<br />total_deaths_log: 6.601720<br />population: 1","hospital_beds_per_thousand:  4.4354430<br />total_deaths_log: 6.729027<br />population: 1","hospital_beds_per_thousand:  4.6088608<br />total_deaths_log: 6.862536<br />population: 1","hospital_beds_per_thousand:  4.7822785<br />total_deaths_log: 6.998519<br />population: 1","hospital_beds_per_thousand:  4.9556962<br />total_deaths_log: 7.133249<br />population: 1","hospital_beds_per_thousand:  5.1291139<br />total_deaths_log: 7.262999<br />population: 1","hospital_beds_per_thousand:  5.3025316<br />total_deaths_log: 7.385170<br />population: 1","hospital_beds_per_thousand:  5.4759494<br />total_deaths_log: 7.502354<br />population: 1","hospital_beds_per_thousand:  5.6493671<br />total_deaths_log: 7.614880<br />population: 1","hospital_beds_per_thousand:  5.8227848<br />total_deaths_log: 7.722639<br />population: 1","hospital_beds_per_thousand:  5.9962025<br />total_deaths_log: 7.825522<br />population: 1","hospital_beds_per_thousand:  6.1696203<br />total_deaths_log: 7.923420<br />population: 1","hospital_beds_per_thousand:  6.3430380<br />total_deaths_log: 8.016223<br />population: 1","hospital_beds_per_thousand:  6.5164557<br />total_deaths_log: 8.103822<br />population: 1","hospital_beds_per_thousand:  6.6898734<br />total_deaths_log: 8.186108<br />population: 1","hospital_beds_per_thousand:  6.8632911<br />total_deaths_log: 8.262973<br />population: 1","hospital_beds_per_thousand:  7.0367089<br />total_deaths_log: 8.334305<br />population: 1","hospital_beds_per_thousand:  7.2101266<br />total_deaths_log: 8.399997<br />population: 1","hospital_beds_per_thousand:  7.3835443<br />total_deaths_log: 8.459939<br />population: 1","hospital_beds_per_thousand:  7.5569620<br />total_deaths_log: 8.514022<br />population: 1","hospital_beds_per_thousand:  7.7303797<br />total_deaths_log: 8.562136<br />population: 1","hospital_beds_per_thousand:  7.9037975<br />total_deaths_log: 8.604173<br />population: 1","hospital_beds_per_thousand:  8.0772152<br />total_deaths_log: 8.640023<br />population: 1","hospital_beds_per_thousand:  8.2506329<br />total_deaths_log: 8.669577<br />population: 1","hospital_beds_per_thousand:  8.4240506<br />total_deaths_log: 8.692725<br />population: 1","hospital_beds_per_thousand:  8.5974684<br />total_deaths_log: 8.709359<br />population: 1","hospital_beds_per_thousand:  8.7708861<br />total_deaths_log: 8.719369<br />population: 1","hospital_beds_per_thousand:  8.9443038<br />total_deaths_log: 8.722646<br />population: 1","hospital_beds_per_thousand:  9.1177215<br />total_deaths_log: 8.719081<br />population: 1","hospital_beds_per_thousand:  9.2911392<br />total_deaths_log: 8.708564<br />population: 1","hospital_beds_per_thousand:  9.4645570<br />total_deaths_log: 8.690987<br />population: 1","hospital_beds_per_thousand:  9.6379747<br />total_deaths_log: 8.666239<br />population: 1","hospital_beds_per_thousand:  9.8113924<br />total_deaths_log: 8.634213<br />population: 1","hospital_beds_per_thousand:  9.9848101<br />total_deaths_log: 8.594798<br />population: 1","hospital_beds_per_thousand: 10.1582278<br />total_deaths_log: 8.547885<br />population: 1","hospital_beds_per_thousand: 10.3316456<br />total_deaths_log: 8.493366<br />population: 1","hospital_beds_per_thousand: 10.5050633<br />total_deaths_log: 8.431130<br />population: 1","hospital_beds_per_thousand: 10.6784810<br />total_deaths_log: 8.361069<br />population: 1","hospital_beds_per_thousand: 10.8518987<br />total_deaths_log: 8.283074<br />population: 1","hospital_beds_per_thousand: 11.0253165<br />total_deaths_log: 8.197034<br />population: 1","hospital_beds_per_thousand: 11.1987342<br />total_deaths_log: 8.102842<br />population: 1","hospital_beds_per_thousand: 11.3721519<br />total_deaths_log: 8.000388<br />population: 1","hospital_beds_per_thousand: 11.5455696<br />total_deaths_log: 7.889561<br />population: 1","hospital_beds_per_thousand: 11.7189873<br />total_deaths_log: 7.770255<br />population: 1","hospital_beds_per_thousand: 11.8924051<br />total_deaths_log: 7.642358<br />population: 1","hospital_beds_per_thousand: 12.0658228<br />total_deaths_log: 7.505762<br />population: 1","hospital_beds_per_thousand: 12.2392405<br />total_deaths_log: 7.360358<br />population: 1","hospital_beds_per_thousand: 12.4126582<br />total_deaths_log: 7.206036<br />population: 1","hospital_beds_per_thousand: 12.5860759<br />total_deaths_log: 7.042687<br />population: 1","hospital_beds_per_thousand: 12.7594937<br />total_deaths_log: 6.870202<br />population: 1","hospital_beds_per_thousand: 12.9329114<br />total_deaths_log: 6.688471<br />population: 1","hospital_beds_per_thousand: 13.1063291<br />total_deaths_log: 6.497387<br />population: 1","hospital_beds_per_thousand: 13.2797468<br />total_deaths_log: 6.296838<br />population: 1","hospital_beds_per_thousand: 13.4531646<br />total_deaths_log: 6.086716<br />population: 1","hospital_beds_per_thousand: 13.6265823<br />total_deaths_log: 5.866912<br />population: 1","hospital_beds_per_thousand: 13.8000000<br />total_deaths_log: 5.637317<br />population: 1","hospital_beds_per_thousand: 13.8000000<br />total_deaths_log: 5.637317<br />population: 1","hospital_beds_per_thousand: 13.8000000<br />total_deaths_log: 5.637317<br />population: 1","hospital_beds_per_thousand: 13.6265823<br />total_deaths_log: 5.866912<br />population: 1","hospital_beds_per_thousand: 13.4531646<br />total_deaths_log: 6.086716<br />population: 1","hospital_beds_per_thousand: 13.2797468<br />total_deaths_log: 6.296838<br />population: 1","hospital_beds_per_thousand: 13.1063291<br />total_deaths_log: 6.497387<br />population: 1","hospital_beds_per_thousand: 12.9329114<br />total_deaths_log: 6.688471<br />population: 1","hospital_beds_per_thousand: 12.7594937<br />total_deaths_log: 6.870202<br />population: 1","hospital_beds_per_thousand: 12.5860759<br />total_deaths_log: 7.042687<br />population: 1","hospital_beds_per_thousand: 12.4126582<br />total_deaths_log: 7.206036<br />population: 1","hospital_beds_per_thousand: 12.2392405<br />total_deaths_log: 7.360358<br />population: 1","hospital_beds_per_thousand: 12.0658228<br />total_deaths_log: 7.505762<br />population: 1","hospital_beds_per_thousand: 11.8924051<br />total_deaths_log: 7.642358<br />population: 1","hospital_beds_per_thousand: 11.7189873<br />total_deaths_log: 7.770255<br />population: 1","hospital_beds_per_thousand: 11.5455696<br />total_deaths_log: 7.889561<br />population: 1","hospital_beds_per_thousand: 11.3721519<br />total_deaths_log: 8.000388<br />population: 1","hospital_beds_per_thousand: 11.1987342<br />total_deaths_log: 8.102842<br />population: 1","hospital_beds_per_thousand: 11.0253165<br />total_deaths_log: 8.197034<br />population: 1","hospital_beds_per_thousand: 10.8518987<br />total_deaths_log: 8.283074<br />population: 1","hospital_beds_per_thousand: 10.6784810<br />total_deaths_log: 8.361069<br />population: 1","hospital_beds_per_thousand: 10.5050633<br />total_deaths_log: 8.431130<br />population: 1","hospital_beds_per_thousand: 10.3316456<br />total_deaths_log: 8.493366<br />population: 1","hospital_beds_per_thousand: 10.1582278<br />total_deaths_log: 8.547885<br />population: 1","hospital_beds_per_thousand:  9.9848101<br />total_deaths_log: 8.594798<br />population: 1","hospital_beds_per_thousand:  9.8113924<br />total_deaths_log: 8.634213<br />population: 1","hospital_beds_per_thousand:  9.6379747<br />total_deaths_log: 8.666239<br />population: 1","hospital_beds_per_thousand:  9.4645570<br />total_deaths_log: 8.690987<br />population: 1","hospital_beds_per_thousand:  9.2911392<br />total_deaths_log: 8.708564<br />population: 1","hospital_beds_per_thousand:  9.1177215<br />total_deaths_log: 8.719081<br />population: 1","hospital_beds_per_thousand:  8.9443038<br />total_deaths_log: 8.722646<br />population: 1","hospital_beds_per_thousand:  8.7708861<br />total_deaths_log: 8.719369<br />population: 1","hospital_beds_per_thousand:  8.5974684<br />total_deaths_log: 8.709359<br />population: 1","hospital_beds_per_thousand:  8.4240506<br />total_deaths_log: 8.692725<br />population: 1","hospital_beds_per_thousand:  8.2506329<br />total_deaths_log: 8.669577<br />population: 1","hospital_beds_per_thousand:  8.0772152<br />total_deaths_log: 8.640023<br />population: 1","hospital_beds_per_thousand:  7.9037975<br />total_deaths_log: 8.604173<br />population: 1","hospital_beds_per_thousand:  7.7303797<br />total_deaths_log: 8.562136<br />population: 1","hospital_beds_per_thousand:  7.5569620<br />total_deaths_log: 8.514022<br />population: 1","hospital_beds_per_thousand:  7.3835443<br />total_deaths_log: 8.459939<br />population: 1","hospital_beds_per_thousand:  7.2101266<br />total_deaths_log: 8.399997<br />population: 1","hospital_beds_per_thousand:  7.0367089<br />total_deaths_log: 8.334305<br />population: 1","hospital_beds_per_thousand:  6.8632911<br />total_deaths_log: 8.262973<br />population: 1","hospital_beds_per_thousand:  6.6898734<br />total_deaths_log: 8.186108<br />population: 1","hospital_beds_per_thousand:  6.5164557<br />total_deaths_log: 8.103822<br />population: 1","hospital_beds_per_thousand:  6.3430380<br />total_deaths_log: 8.016223<br />population: 1","hospital_beds_per_thousand:  6.1696203<br />total_deaths_log: 7.923420<br />population: 1","hospital_beds_per_thousand:  5.9962025<br />total_deaths_log: 7.825522<br />population: 1","hospital_beds_per_thousand:  5.8227848<br />total_deaths_log: 7.722639<br />population: 1","hospital_beds_per_thousand:  5.6493671<br />total_deaths_log: 7.614880<br />population: 1","hospital_beds_per_thousand:  5.4759494<br />total_deaths_log: 7.502354<br />population: 1","hospital_beds_per_thousand:  5.3025316<br />total_deaths_log: 7.385170<br />population: 1","hospital_beds_per_thousand:  5.1291139<br />total_deaths_log: 7.262999<br />population: 1","hospital_beds_per_thousand:  4.9556962<br />total_deaths_log: 7.133249<br />population: 1","hospital_beds_per_thousand:  4.7822785<br />total_deaths_log: 6.998519<br />population: 1","hospital_beds_per_thousand:  4.6088608<br />total_deaths_log: 6.862536<br />population: 1","hospital_beds_per_thousand:  4.4354430<br />total_deaths_log: 6.729027<br />population: 1","hospital_beds_per_thousand:  4.2620253<br />total_deaths_log: 6.601720<br />population: 1","hospital_beds_per_thousand:  4.0886076<br />total_deaths_log: 6.484341<br />population: 1","hospital_beds_per_thousand:  3.9151899<br />total_deaths_log: 6.380619<br />population: 1","hospital_beds_per_thousand:  3.7417722<br />total_deaths_log: 6.294280<br />population: 1","hospital_beds_per_thousand:  3.5683544<br />total_deaths_log: 6.224635<br />population: 1","hospital_beds_per_thousand:  3.3949367<br />total_deaths_log: 6.166114<br />population: 1","hospital_beds_per_thousand:  3.2215190<br />total_deaths_log: 6.124248<br />population: 1","hospital_beds_per_thousand:  3.0481013<br />total_deaths_log: 6.105035<br />population: 1","hospital_beds_per_thousand:  2.8746835<br />total_deaths_log: 6.114474<br />population: 1","hospital_beds_per_thousand:  2.7012658<br />total_deaths_log: 6.173543<br />population: 1","hospital_beds_per_thousand:  2.5278481<br />total_deaths_log: 6.303836<br />population: 1","hospital_beds_per_thousand:  2.3544304<br />total_deaths_log: 6.427372<br />population: 1","hospital_beds_per_thousand:  2.1810127<br />total_deaths_log: 6.524006<br />population: 1","hospital_beds_per_thousand:  2.0075949<br />total_deaths_log: 6.658333<br />population: 1","hospital_beds_per_thousand:  1.8341772<br />total_deaths_log: 6.778474<br />population: 1","hospital_beds_per_thousand:  1.6607595<br />total_deaths_log: 6.831700<br />population: 1","hospital_beds_per_thousand:  1.4873418<br />total_deaths_log: 6.849060<br />population: 1","hospital_beds_per_thousand:  1.3139241<br />total_deaths_log: 6.840584<br />population: 1","hospital_beds_per_thousand:  1.1405063<br />total_deaths_log: 6.787567<br />population: 1","hospital_beds_per_thousand:  0.9670886<br />total_deaths_log: 6.701834<br />population: 1","hospital_beds_per_thousand:  0.7936709<br />total_deaths_log: 6.580362<br />population: 1","hospital_beds_per_thousand:  0.6202532<br />total_deaths_log: 6.412557<br />population: 1","hospital_beds_per_thousand:  0.4468354<br />total_deaths_log: 6.197538<br />population: 1","hospital_beds_per_thousand:  0.2734177<br />total_deaths_log: 5.940564<br />population: 1","hospital_beds_per_thousand:  0.1000000<br />total_deaths_log: 5.646810<br />population: 1","hospital_beds_per_thousand:  0.1000000<br />total_deaths_log: 5.646810<br />population: 1"],"type":"scatter","mode":"lines","line":{"width":3.77952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(153,153,153,0.4)","hoveron":"points","hoverinfo":"x+y","showlegend":false,"xaxis":"x","yaxis":"y","frame":null}],"layout":{"margin":{"t":45.4063926940639,"r":7.30593607305936,"b":41.8264840182648,"l":37.2602739726027},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"ggplot Scatterplot","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.585,14.485],"tickmode":"array","ticktext":["0","5","10"],"tickvals":[0,5,10],"categoryorder":"array","categoryarray":["0","5","10"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"hospital beds per thousand","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.660777018725024,13.8763173932255],"tickmode":"array","ticktext":["0","5","10"],"tickvals":[0,5,10],"categoryorder":"array","categoryarray":["0","5","10"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"total deaths","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"425846c648f7":{"colour":{},"x":{},"y":{},"size":{},"type":"scatter"},"425861655155":{"x":{},"y":{},"size":{}}},"cur_data":"425846c648f7","visdat":{"425846c648f7":["function (y) ","x"],"425861655155":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<p>However, an error message is encountered when rendering the plot with marginal distributions.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>ggplotly</span><span class='op'>(</span><span class='va'>sp_ggplot_marginal</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<pre><code>Error in UseMethod(&quot;ggplotly&quot;, p) : no applicable method for &#39;ggplotly&#39; applied 
to an object of class &quot;c(&#39;ggExtraPlot&#39;, &#39;gtable&#39;, &#39;gTree&#39;, &#39;grob&#39;, &#39;gDesc&#39;)&quot;</code></pre>
<p>From the angle of providing interactivity on the Shiny app, the arguments in the <code>ggscatterstats()</code> functions can mostly be manipulated at the first level, whereas the <code>scatterplot()</code> function utilises lists embedded in its arguments for more customisations e.g. <code>smooth = list(smoother=loessLine,lty.var=2, lwd.var=0.5)</code>. This makes the former easier to code parameters to be passed into the function as arguments in the Shiny app. The same goes for the <code>ggplot()</code> function.</p>
<h4 id="conclusion">Conclusion</h4>
<p>As the aim of the assignment is for users to explore and compare the number of COVID-19 deaths across countries, interactivity is an important consideration, which is provided by <em>ggplot</em>. The trade-off is the lost of information provided by the statistical tests and marginal distributions.</p>
<p><code>ggscatterstats()</code> provide a nice visualisation with statistical analysis, and is able to sufficiently provide customisation for the user to interact with in a Shiny app. However, it is not supported by existing packages that renders interactive graphics. The key purpose of providing interactivity here is to allow users to compare and discover patterns between countries, and this would be achieved mainly through the identification of locations in a scatterplot with many data points. An alternative to the desired interactivity would be to provide options for users to select countries or continent to display static labels on the graph. As such, <code>ggscatterstats()</code> is chosen as the function to plot the scatterplot in the final product.</p>
<h2 id="funnel-plot">Funnel Plot</h2>
<p>Two packages <em>FunnelPlotR</em> and <em>funnelR</em> will be explored to plot a funnel plot of case fatality rate (defined as the total number of deaths divided by the total number of cases) against total number of cases. Other rates can possibly be plotted using the funnel plot, which can be provided by options for user to select in the Shiny app.</p>
<h3 id="using-funnelplotrfunnel_plot">Using <em>FunnelPlotR::funnel_plot</em></h3>
<p>The <em>FunnelPlotR</em> package uses <em>ggplot</em> to generate funnel plots. It requires a numerator (events of interest), denominator (population to be considered) and group. The key arguments selected for customisation are:</p>
<ul>
<li><code>limit</code>: plot limits (95 or 99)</li>
<li><code>label_outliers</code>: to label outliers (true or false)</li>
<li><code>Poisson_limits</code>: to add Poisson limits to the plot</li>
<li><code>OD_adjust</code>: to add overdispersed limits to the plot</li>
<li><code>xrange</code> and <code>yrange</code>: to specify the range to display for axes, acts like a zoom function</li>
<li>Other aesthetic components such as graph title, axis labels etc.</li>
</ul>
<p>The code chunk below plots a funnel plot. Two points to note here:</p>
<ul>
<li><code>group</code> in this function is different from the scatterplot. Here, it defines the level of the points to be plotted i.e. location or continent. If continent is chosen, there are only six data points.<br />
</li>
<li>There are no arguments available to customise the funnel plot using <em>ggplot</em> functions</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>fp_funnelplotR</span> <span class='op'>&lt;-</span> <span class='fu'>funnel_plot</span><span class='op'>(</span>numerator <span class='op'>=</span> <span class='va'>covid_deaths_tidy</span><span class='op'>$</span><span class='va'>total_deaths</span>, <span class='co'># dependent variable</span>
                              denominator <span class='op'>=</span> <span class='va'>covid_deaths_tidy</span><span class='op'>$</span><span class='va'>total_cases</span>, <span class='co'># independent variable</span>
                              group <span class='op'>=</span> <span class='va'>covid_deaths_tidy</span><span class='op'>$</span><span class='va'>location</span>, <span class='co'># level of plotted points</span>
                              data_type <span class='op'>=</span> <span class='st'>"PR"</span>, <span class='co'># to plot proportions</span>
                              limit <span class='op'>=</span> <span class='fl'>99</span>, <span class='co'># define CI limits</span>
                              label_outliers <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='co'># to label outliers</span>
                              Poisson_limits <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='co'># to show Poisson limits</span>
                              OD_adjust <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='co'># to show overdispersion limits</span>
                              title <span class='op'>=</span> <span class='st'>"Case Fatality Rate by Total Number of COVID-19 Cases"</span>,
                              x_label <span class='op'>=</span> <span class='st'>"Total Number of COVID-19 Cases"</span>,
                              y_label <span class='op'>=</span> <span class='st'>"Case Fatality Rate"</span>,
                              xrange <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>32000000</span><span class='op'>)</span>, <span class='co'># to change x-axis range</span>
                              yrange <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0.25</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># to change y-axis range</span>
<span class='va'>fp_funnelplotR</span>
</code></pre>
</div>
<p><img src="covid-deaths_files/figure-html5/fp1-1.png" width="624" /></p>
<pre><code>A funnel plot object with 201 points of which 59 are outliers. 
Plot is adjusted for overdispersion. </code></pre>
</div>
<p>The above plot is highly skewed due to the presence of outliers in the data.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>fp_funnelplotR</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;funnelplot&quot;</code></pre>
</div>
<p>As the output is a “funnelplot” object, it cannot be passed to ggplotly to render the plot interactive so as to allow user to take a closer look at the plot area with high concentration of data points. We can change <code>xrange</code> and <code>yrange</code> to zoom-in on the cluster of points, with the following code chunk.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>fp_funnelplotR_zoom</span> <span class='op'>&lt;-</span> <span class='fu'>funnel_plot</span><span class='op'>(</span>numerator <span class='op'>=</span> <span class='va'>covid_deaths_tidy</span><span class='op'>$</span><span class='va'>total_deaths</span>, <span class='co'># dependent variable</span>
                              denominator <span class='op'>=</span> <span class='va'>covid_deaths_tidy</span><span class='op'>$</span><span class='va'>total_cases</span>, <span class='co'># independent variable</span>
                              group <span class='op'>=</span> <span class='va'>covid_deaths_tidy</span><span class='op'>$</span><span class='va'>location</span>, <span class='co'># level of plotted points</span>
                              data_type <span class='op'>=</span> <span class='st'>"PR"</span>, <span class='co'># to plot proportions</span>
                              limit <span class='op'>=</span> <span class='fl'>99</span>, <span class='co'># define CI limits</span>
                              label_outliers <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='co'># to label outliers</span>
                              Poisson_limits <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='co'># to show Poisson limits</span>
                              OD_adjust <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='co'># to show overdispersion limits</span>
                              title <span class='op'>=</span> <span class='st'>"Case Fatality Rate by Total Number of COVID-19 Cases"</span>,
                              x_label <span class='op'>=</span> <span class='st'>"Total Number of COVID-19 Cases"</span>,
                              y_label <span class='op'>=</span> <span class='st'>"Case Fatality Rate"</span>,
                              xrange <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>10000</span><span class='op'>)</span>, <span class='co'># to change x-axis range</span>
                              yrange <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0.05</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># to change y-axis range</span>
<span class='va'>fp_funnelplotR_zoom</span>
</code></pre>
</div>
<p><img src="covid-deaths_files/figure-html5/fp2-1.png" width="624" /></p>
<pre><code>A funnel plot object with 201 points of which 59 are outliers. 
Plot is adjusted for overdispersion. </code></pre>
</div>
<p>Zoom control can be provided to users by allowing users to change the <code>xrange</code> and <code>yrange</code> or via a button that changes the values by a fix amount.</p>
<p>An alternative will be to use the log transformed variables. This is proposed as the scale of the graph axes cannot be changed to a log scale explicitly in the arguments.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>fp_funnelplotR_log</span> <span class='op'>&lt;-</span> <span class='fu'>funnel_plot</span><span class='op'>(</span>numerator <span class='op'>=</span> <span class='va'>covid_deaths_tidy</span><span class='op'>$</span><span class='va'>total_deaths_log</span>, <span class='co'># dependent variable</span>
                                  denominator <span class='op'>=</span> <span class='va'>covid_deaths_tidy</span><span class='op'>$</span><span class='va'>total_cases_log</span>, <span class='co'># independent variable</span>
                                  group <span class='op'>=</span> <span class='va'>covid_deaths_tidy</span><span class='op'>$</span><span class='va'>location</span>, <span class='co'># level of plotted points</span>
                                  data_type <span class='op'>=</span> <span class='st'>"PR"</span>, <span class='co'># to plot proportions</span>
                                  limit <span class='op'>=</span> <span class='fl'>99</span>, <span class='co'># define CI limits</span>
                                  label_outliers <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='co'># to label outliers</span>
                                  Poisson_limits <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='co'># to show Poisson limits</span>
                                  OD_adjust <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='co'># to show overdispersion limits</span>
                                  title <span class='op'>=</span> <span class='st'>"Case Fatality Rate by Total Number of COVID-19 Cases"</span>,
                                  x_label <span class='op'>=</span> <span class='st'>"Total Number of COVID-19 Cases - log"</span>,
                                  y_label <span class='op'>=</span> <span class='st'>"Case Fatality Rate"</span>,
                                  xrange <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>20</span><span class='op'>)</span>, <span class='co'># to change x-axis range</span>
                                  yrange <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>2.5</span>, <span class='fl'>10</span><span class='op'>)</span> <span class='co'># to change y-axis range</span>
                                  <span class='op'>)</span>

<span class='va'>fp_funnelplotR_log</span>
</code></pre>
</div>
<p><img src="covid-deaths_files/figure-html5/fp3-1.png" width="624" /></p>
<pre><code>A funnel plot object with 201 points of which 3 are outliers. 
Plot is not adjusted for overdispersion. </code></pre>
</div>
<p>The scale on the x-axis is shorter now, but there is a point that has an extremely large <strong>case_fatality_rate</strong> value as seen from the top left corner of the plot area. We can also “zoom-in” on the cluster of points.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>fp_funnelplotR_log_zoom</span> <span class='op'>&lt;-</span> <span class='fu'>funnel_plot</span><span class='op'>(</span>numerator <span class='op'>=</span> <span class='va'>covid_deaths_tidy</span><span class='op'>$</span><span class='va'>total_deaths_log</span>, <span class='co'># dependent variable</span>
                                      denominator <span class='op'>=</span> <span class='va'>covid_deaths_tidy</span><span class='op'>$</span><span class='va'>total_cases_log</span>, <span class='co'># independent variable</span>
                                      group <span class='op'>=</span> <span class='va'>covid_deaths_tidy</span><span class='op'>$</span><span class='va'>location</span>, <span class='co'># level of plotted points</span>
                                      data_type <span class='op'>=</span> <span class='st'>"PR"</span>, <span class='co'># to plot proportions</span>
                                      limit <span class='op'>=</span> <span class='fl'>99</span>, <span class='co'># define CI limits</span>
                                      label_outliers <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='co'># to label outliers</span>
                                      Poisson_limits <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='co'># to show Poisson limits</span>
                                      OD_adjust <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='co'># to show overdispersion limits</span>
                                      title <span class='op'>=</span> <span class='st'>"Case Fatality Rate by Total Number of COVID-19 Cases"</span>,
                                      x_label <span class='op'>=</span> <span class='st'>"Total Number of COVID-19 Cases - log"</span>,
                                      y_label <span class='op'>=</span> <span class='st'>"Case Fatality Rate"</span>,
                                      xrange <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>18</span><span class='op'>)</span>, <span class='co'># to change x-axis range</span>
                                      yrange <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>0.5</span>, <span class='fl'>2</span><span class='op'>)</span> <span class='co'># to change y-axis range</span>
                                      <span class='op'>)</span>
<span class='va'>fp_funnelplotR_log_zoom</span>
</code></pre>
</div>
<p><img src="covid-deaths_files/figure-html5/fp4-1.png" width="624" /></p>
<pre><code>A funnel plot object with 201 points of which 3 are outliers. 
Plot is not adjusted for overdispersion. </code></pre>
</div>
<p>A checkbox can be provided to the user to select whether to use log transformation in the plot.</p>
<h3 id="using-funnelrfunplot">Using <em>funnelR::funplot</em></h3>
<p>The <em>funnelR</em> package plots funnel plot using a simple two-step process: (1) calculate limits with <code>fundata()</code>; and (2) plot the funnel plot with <code>funplot()</code>. It requires specifically for the numerator to be named <em>n</em> and the denominator to be named <em>d</em> in the data frame.</p>
<p>The key arguments that are available for customisation are:</p>
<ul>
<li><code>alpha</code> and <code>alpha2</code>: confidence interval limits</li>
<li><code>method</code>: specify the confidence interval limits smoothing (exact, approximate)</li>
</ul>
<p>There are no arguments within the function to customise the graph e.g. axes range and labels, opacity and size of points, title and legend.</p>
<p>Let us plot the funnel plot. As the value of the untransformed variable is too large, thus resulting in runtime error, we will plot based on the log-transformed variables instead.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Rename variables</span>
<span class='va'>covid_deaths_fR_log</span> <span class='op'>&lt;-</span> <span class='va'>covid_deaths_tidy</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>rename</span><span class='op'>(</span>n <span class='op'>=</span> <span class='va'>total_deaths_log</span>, d <span class='op'>=</span> <span class='va'>total_cases_log</span><span class='op'>)</span>

<span class='va'>funnelR_limits</span> <span class='op'>&lt;-</span> <span class='fu'>fundata</span><span class='op'>(</span>input <span class='op'>=</span> <span class='va'>covid_deaths_fR_log</span>,
                          alpha <span class='op'>=</span> <span class='fl'>0.95</span>, <span class='co'># to define first limits</span>
                          alpha2 <span class='op'>=</span> <span class='fl'>0.998</span>, <span class='co'># to define second limits (optional)</span>
                          method <span class='op'>=</span> <span class='st'>'approximate'</span><span class='op'>)</span> <span class='co'># to define limits smoothing</span>

<span class='va'>fp_funnelR_log</span> <span class='op'>&lt;-</span> <span class='fu'>funplot</span><span class='op'>(</span><span class='va'>covid_deaths_fR_log</span>, <span class='va'>funnelR_limits</span>, <span class='st'>"continent"</span><span class='op'>)</span>

<span class='va'>fp_funnelR_log</span>
</code></pre>
</div>
<p><img src="covid-deaths_files/figure-html5/fp5-1.png" width="624" /></p>
</div>
<p>The data points are now more spread out across the plot area, however there are some data points that are cut off towards the top left corner of the graph. As <code>funplot()</code> returns a ggplot object, the funnel plot can be passed into <code>ggplotly</code> to render an interactive graphic.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>fp_funnelR_log_ggplotly</span> <span class='op'>&lt;-</span> <span class='fu'>ggplotly</span><span class='op'>(</span><span class='va'>fp_funnelR_log</span><span class='op'>)</span>

<span class='va'>fp_funnelR_log_ggplotly</span>
</code></pre>
</div>
<div id="htmlwidget-5ac3cf2de245cc240cd0" style="width:624px;height:384px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-5ac3cf2de245cc240cd0">{"x":{"data":[{"x":[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5,10,10.5,11,11.5,12,12.5,13,13.5,14,14.5,15,15.5,16,16.5,17],"y":[1.57909841808562,1.40606316619439,1.30291363553038,1.23252095420342,1.18055923553377,1.14017461127988,1.10762150292504,1.08065728627507,1.05784636061284,1.03822145199393,1.02110387697942,1.00600150939712,0.992547635313826,0.980462643466322,0.969529111647417,0.959575083274033,0.950462531204843,0.942079208595246,0.934332770983937,0.927146457520738,0.920455865019342,0.914206502377066,0.908351911649112,0.902852206870825,0.897672925119696,0.892784113907766,0.888159599522167,0.883776395386223,0.879614219836213,0.875655100176663,0.871883045344746,0.868283773562265,0.864844484381803],"text":["fundata$d:  1.0<br />fundata$up: 1.5790984<br />input$d:  1.0<br />input$n/input$d: 1.5790984","fundata$d:  1.5<br />fundata$up: 1.4060632<br />input$d:  1.5<br />input$n/input$d: 1.4060632","fundata$d:  2.0<br />fundata$up: 1.3029136<br />input$d:  2.0<br />input$n/input$d: 1.3029136","fundata$d:  2.5<br />fundata$up: 1.2325210<br />input$d:  2.5<br />input$n/input$d: 1.2325210","fundata$d:  3.0<br />fundata$up: 1.1805592<br />input$d:  3.0<br />input$n/input$d: 1.1805592","fundata$d:  3.5<br />fundata$up: 1.1401746<br />input$d:  3.5<br />input$n/input$d: 1.1401746","fundata$d:  4.0<br />fundata$up: 1.1076215<br />input$d:  4.0<br />input$n/input$d: 1.1076215","fundata$d:  4.5<br />fundata$up: 1.0806573<br />input$d:  4.5<br />input$n/input$d: 1.0806573","fundata$d:  5.0<br />fundata$up: 1.0578464<br />input$d:  5.0<br />input$n/input$d: 1.0578464","fundata$d:  5.5<br />fundata$up: 1.0382215<br />input$d:  5.5<br />input$n/input$d: 1.0382215","fundata$d:  6.0<br />fundata$up: 1.0211039<br />input$d:  6.0<br />input$n/input$d: 1.0211039","fundata$d:  6.5<br />fundata$up: 1.0060015<br />input$d:  6.5<br />input$n/input$d: 1.0060015","fundata$d:  7.0<br />fundata$up: 0.9925476<br />input$d:  7.0<br />input$n/input$d: 0.9925476","fundata$d:  7.5<br />fundata$up: 0.9804626<br />input$d:  7.5<br />input$n/input$d: 0.9804626","fundata$d:  8.0<br />fundata$up: 0.9695291<br />input$d:  8.0<br />input$n/input$d: 0.9695291","fundata$d:  8.5<br />fundata$up: 0.9595751<br />input$d:  8.5<br />input$n/input$d: 0.9595751","fundata$d:  9.0<br />fundata$up: 0.9504625<br />input$d:  9.0<br />input$n/input$d: 0.9504625","fundata$d:  9.5<br />fundata$up: 0.9420792<br />input$d:  9.5<br />input$n/input$d: 0.9420792","fundata$d: 10.0<br />fundata$up: 0.9343328<br />input$d: 10.0<br />input$n/input$d: 0.9343328","fundata$d: 10.5<br />fundata$up: 0.9271465<br />input$d: 10.5<br />input$n/input$d: 0.9271465","fundata$d: 11.0<br />fundata$up: 0.9204559<br />input$d: 11.0<br />input$n/input$d: 0.9204559","fundata$d: 11.5<br />fundata$up: 0.9142065<br />input$d: 11.5<br />input$n/input$d: 0.9142065","fundata$d: 12.0<br />fundata$up: 0.9083519<br />input$d: 12.0<br />input$n/input$d: 0.9083519","fundata$d: 12.5<br />fundata$up: 0.9028522<br />input$d: 12.5<br />input$n/input$d: 0.9028522","fundata$d: 13.0<br />fundata$up: 0.8976729<br />input$d: 13.0<br />input$n/input$d: 0.8976729","fundata$d: 13.5<br />fundata$up: 0.8927841<br />input$d: 13.5<br />input$n/input$d: 0.8927841","fundata$d: 14.0<br />fundata$up: 0.8881596<br />input$d: 14.0<br />input$n/input$d: 0.8881596","fundata$d: 14.5<br />fundata$up: 0.8837764<br />input$d: 14.5<br />input$n/input$d: 0.8837764","fundata$d: 15.0<br />fundata$up: 0.8796142<br />input$d: 15.0<br />input$n/input$d: 0.8796142","fundata$d: 15.5<br />fundata$up: 0.8756551<br />input$d: 15.5<br />input$n/input$d: 0.8756551","fundata$d: 16.0<br />fundata$up: 0.8718830<br />input$d: 16.0<br />input$n/input$d: 0.8718830","fundata$d: 16.5<br />fundata$up: 0.8682838<br />input$d: 16.5<br />input$n/input$d: 0.8682838","fundata$d: 17.0<br />fundata$up: 0.8648445<br />input$d: 17.0<br />input$n/input$d: 0.8648445"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(255,165,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5,10,10.5,11,11.5,12,12.5,13,13.5,14,14.5,15,15.5,16,16.5,17],"y":[-0.30680924255671,-0.133773990665479,-0.03062446000147,0.03976822132549,0.0917299399951416,0.132114564249031,0.164667672603872,0.191631889253838,0.214442814916069,0.234067723534977,0.251185298549488,0.266287666131787,0.279741540215083,0.291826532062588,0.302760063881492,0.312714092254877,0.321826644324067,0.330209966933664,0.337956404544972,0.345142718008171,0.351833310509568,0.358082673151844,0.363937263879798,0.369436968658085,0.374616250409214,0.379505061621143,0.384129576006743,0.388512780142686,0.392674955692697,0.396634075352247,0.400406130184164,0.404005401966645,0.407444691147107],"text":["fundata$d:  1.0<br />fundata$lo: -0.30680924<br />input$d:  1.0<br />input$n/input$d: -0.30680924","fundata$d:  1.5<br />fundata$lo: -0.13377399<br />input$d:  1.5<br />input$n/input$d: -0.13377399","fundata$d:  2.0<br />fundata$lo: -0.03062446<br />input$d:  2.0<br />input$n/input$d: -0.03062446","fundata$d:  2.5<br />fundata$lo:  0.03976822<br />input$d:  2.5<br />input$n/input$d:  0.03976822","fundata$d:  3.0<br />fundata$lo:  0.09172994<br />input$d:  3.0<br />input$n/input$d:  0.09172994","fundata$d:  3.5<br />fundata$lo:  0.13211456<br />input$d:  3.5<br />input$n/input$d:  0.13211456","fundata$d:  4.0<br />fundata$lo:  0.16466767<br />input$d:  4.0<br />input$n/input$d:  0.16466767","fundata$d:  4.5<br />fundata$lo:  0.19163189<br />input$d:  4.5<br />input$n/input$d:  0.19163189","fundata$d:  5.0<br />fundata$lo:  0.21444281<br />input$d:  5.0<br />input$n/input$d:  0.21444281","fundata$d:  5.5<br />fundata$lo:  0.23406772<br />input$d:  5.5<br />input$n/input$d:  0.23406772","fundata$d:  6.0<br />fundata$lo:  0.25118530<br />input$d:  6.0<br />input$n/input$d:  0.25118530","fundata$d:  6.5<br />fundata$lo:  0.26628767<br />input$d:  6.5<br />input$n/input$d:  0.26628767","fundata$d:  7.0<br />fundata$lo:  0.27974154<br />input$d:  7.0<br />input$n/input$d:  0.27974154","fundata$d:  7.5<br />fundata$lo:  0.29182653<br />input$d:  7.5<br />input$n/input$d:  0.29182653","fundata$d:  8.0<br />fundata$lo:  0.30276006<br />input$d:  8.0<br />input$n/input$d:  0.30276006","fundata$d:  8.5<br />fundata$lo:  0.31271409<br />input$d:  8.5<br />input$n/input$d:  0.31271409","fundata$d:  9.0<br />fundata$lo:  0.32182664<br />input$d:  9.0<br />input$n/input$d:  0.32182664","fundata$d:  9.5<br />fundata$lo:  0.33020997<br />input$d:  9.5<br />input$n/input$d:  0.33020997","fundata$d: 10.0<br />fundata$lo:  0.33795640<br />input$d: 10.0<br />input$n/input$d:  0.33795640","fundata$d: 10.5<br />fundata$lo:  0.34514272<br />input$d: 10.5<br />input$n/input$d:  0.34514272","fundata$d: 11.0<br />fundata$lo:  0.35183331<br />input$d: 11.0<br />input$n/input$d:  0.35183331","fundata$d: 11.5<br />fundata$lo:  0.35808267<br />input$d: 11.5<br />input$n/input$d:  0.35808267","fundata$d: 12.0<br />fundata$lo:  0.36393726<br />input$d: 12.0<br />input$n/input$d:  0.36393726","fundata$d: 12.5<br />fundata$lo:  0.36943697<br />input$d: 12.5<br />input$n/input$d:  0.36943697","fundata$d: 13.0<br />fundata$lo:  0.37461625<br />input$d: 13.0<br />input$n/input$d:  0.37461625","fundata$d: 13.5<br />fundata$lo:  0.37950506<br />input$d: 13.5<br />input$n/input$d:  0.37950506","fundata$d: 14.0<br />fundata$lo:  0.38412958<br />input$d: 14.0<br />input$n/input$d:  0.38412958","fundata$d: 14.5<br />fundata$lo:  0.38851278<br />input$d: 14.5<br />input$n/input$d:  0.38851278","fundata$d: 15.0<br />fundata$lo:  0.39267496<br />input$d: 15.0<br />input$n/input$d:  0.39267496","fundata$d: 15.5<br />fundata$lo:  0.39663408<br />input$d: 15.5<br />input$n/input$d:  0.39663408","fundata$d: 16.0<br />fundata$lo:  0.40040613<br />input$d: 16.0<br />input$n/input$d:  0.40040613","fundata$d: 16.5<br />fundata$lo:  0.40400540<br />input$d: 16.5<br />input$n/input$d:  0.40400540","fundata$d: 17.0<br />fundata$lo:  0.40744469<br />input$d: 17.0<br />input$n/input$d:  0.40744469"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(255,165,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5,10,10.5,11,11.5,12,12.5,13,13.5,14,14.5,15,15.5,16,16.5,17],"y":[2.12287924853781,1.85005835503264,1.68742474822237,1.57643814863677,1.4945112443755,1.43083769142952,1.37951191815113,1.33699802806973,1.30103254096332,1.27009037717964,1.24310147139855,1.21928989905815,1.19807747032821,1.17902332825136,1.16178466799341,1.14609036937437,1.13172280802224,1.11850500679449,1.10629136820061,1.09496086508862,1.08441195436459,1.07455872109988,1.06532791606998,1.05665665194762,1.04849059179737,1.04078251018718,1.03349113959699,1.02658023759457,1.02001782652476,1.01377556923206,1.00782825295779,1.00215335993494,0.996730707978301],"text":["fundata$d:  1.0<br />fundata$up2: 2.1228792<br />input$d:  1.0<br />input$n/input$d: 2.1228792","fundata$d:  1.5<br />fundata$up2: 1.8500584<br />input$d:  1.5<br />input$n/input$d: 1.8500584","fundata$d:  2.0<br />fundata$up2: 1.6874247<br />input$d:  2.0<br />input$n/input$d: 1.6874247","fundata$d:  2.5<br />fundata$up2: 1.5764381<br />input$d:  2.5<br />input$n/input$d: 1.5764381","fundata$d:  3.0<br />fundata$up2: 1.4945112<br />input$d:  3.0<br />input$n/input$d: 1.4945112","fundata$d:  3.5<br />fundata$up2: 1.4308377<br />input$d:  3.5<br />input$n/input$d: 1.4308377","fundata$d:  4.0<br />fundata$up2: 1.3795119<br />input$d:  4.0<br />input$n/input$d: 1.3795119","fundata$d:  4.5<br />fundata$up2: 1.3369980<br />input$d:  4.5<br />input$n/input$d: 1.3369980","fundata$d:  5.0<br />fundata$up2: 1.3010325<br />input$d:  5.0<br />input$n/input$d: 1.3010325","fundata$d:  5.5<br />fundata$up2: 1.2700904<br />input$d:  5.5<br />input$n/input$d: 1.2700904","fundata$d:  6.0<br />fundata$up2: 1.2431015<br />input$d:  6.0<br />input$n/input$d: 1.2431015","fundata$d:  6.5<br />fundata$up2: 1.2192899<br />input$d:  6.5<br />input$n/input$d: 1.2192899","fundata$d:  7.0<br />fundata$up2: 1.1980775<br />input$d:  7.0<br />input$n/input$d: 1.1980775","fundata$d:  7.5<br />fundata$up2: 1.1790233<br />input$d:  7.5<br />input$n/input$d: 1.1790233","fundata$d:  8.0<br />fundata$up2: 1.1617847<br />input$d:  8.0<br />input$n/input$d: 1.1617847","fundata$d:  8.5<br />fundata$up2: 1.1460904<br />input$d:  8.5<br />input$n/input$d: 1.1460904","fundata$d:  9.0<br />fundata$up2: 1.1317228<br />input$d:  9.0<br />input$n/input$d: 1.1317228","fundata$d:  9.5<br />fundata$up2: 1.1185050<br />input$d:  9.5<br />input$n/input$d: 1.1185050","fundata$d: 10.0<br />fundata$up2: 1.1062914<br />input$d: 10.0<br />input$n/input$d: 1.1062914","fundata$d: 10.5<br />fundata$up2: 1.0949609<br />input$d: 10.5<br />input$n/input$d: 1.0949609","fundata$d: 11.0<br />fundata$up2: 1.0844120<br />input$d: 11.0<br />input$n/input$d: 1.0844120","fundata$d: 11.5<br />fundata$up2: 1.0745587<br />input$d: 11.5<br />input$n/input$d: 1.0745587","fundata$d: 12.0<br />fundata$up2: 1.0653279<br />input$d: 12.0<br />input$n/input$d: 1.0653279","fundata$d: 12.5<br />fundata$up2: 1.0566567<br />input$d: 12.5<br />input$n/input$d: 1.0566567","fundata$d: 13.0<br />fundata$up2: 1.0484906<br />input$d: 13.0<br />input$n/input$d: 1.0484906","fundata$d: 13.5<br />fundata$up2: 1.0407825<br />input$d: 13.5<br />input$n/input$d: 1.0407825","fundata$d: 14.0<br />fundata$up2: 1.0334911<br />input$d: 14.0<br />input$n/input$d: 1.0334911","fundata$d: 14.5<br />fundata$up2: 1.0265802<br />input$d: 14.5<br />input$n/input$d: 1.0265802","fundata$d: 15.0<br />fundata$up2: 1.0200178<br />input$d: 15.0<br />input$n/input$d: 1.0200178","fundata$d: 15.5<br />fundata$up2: 1.0137756<br />input$d: 15.5<br />input$n/input$d: 1.0137756","fundata$d: 16.0<br />fundata$up2: 1.0078283<br />input$d: 16.0<br />input$n/input$d: 1.0078283","fundata$d: 16.5<br />fundata$up2: 1.0021534<br />input$d: 16.5<br />input$n/input$d: 1.0021534","fundata$d: 17.0<br />fundata$up2: 0.9967307<br />input$d: 17.0<br />input$n/input$d: 0.9967307"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,255,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5,10,10.5,11,11.5,12,12.5,13,13.5,14,14.5,15,15.5,16,16.5,17],"y":[-0.850590073008898,-0.577769179503731,-0.415135572693465,-0.304148973107863,-0.222222068846588,-0.158548515900612,-0.107222742622222,-0.0647088525408248,-0.0287433654344067,0.00219879834926617,0.0291877041303621,0.0529992764707566,0.0742117052007022,0.0932658472775505,0.110504507535495,0.126198806154539,0.14056636750667,0.153784168734424,0.165997807328296,0.177328310440289,0.187877221164316,0.197730454429034,0.206961259458934,0.215632523581287,0.223798583731541,0.231506665341726,0.238798035931922,0.245708937934338,0.252271349004153,0.258513606296853,0.264460922571117,0.270135815593966,0.275558467550609],"text":["fundata$d:  1.0<br />fundata$lo2: -0.850590073<br />input$d:  1.0<br />input$n/input$d: -0.850590073","fundata$d:  1.5<br />fundata$lo2: -0.577769180<br />input$d:  1.5<br />input$n/input$d: -0.577769180","fundata$d:  2.0<br />fundata$lo2: -0.415135573<br />input$d:  2.0<br />input$n/input$d: -0.415135573","fundata$d:  2.5<br />fundata$lo2: -0.304148973<br />input$d:  2.5<br />input$n/input$d: -0.304148973","fundata$d:  3.0<br />fundata$lo2: -0.222222069<br />input$d:  3.0<br />input$n/input$d: -0.222222069","fundata$d:  3.5<br />fundata$lo2: -0.158548516<br />input$d:  3.5<br />input$n/input$d: -0.158548516","fundata$d:  4.0<br />fundata$lo2: -0.107222743<br />input$d:  4.0<br />input$n/input$d: -0.107222743","fundata$d:  4.5<br />fundata$lo2: -0.064708853<br />input$d:  4.5<br />input$n/input$d: -0.064708853","fundata$d:  5.0<br />fundata$lo2: -0.028743365<br />input$d:  5.0<br />input$n/input$d: -0.028743365","fundata$d:  5.5<br />fundata$lo2:  0.002198798<br />input$d:  5.5<br />input$n/input$d:  0.002198798","fundata$d:  6.0<br />fundata$lo2:  0.029187704<br />input$d:  6.0<br />input$n/input$d:  0.029187704","fundata$d:  6.5<br />fundata$lo2:  0.052999276<br />input$d:  6.5<br />input$n/input$d:  0.052999276","fundata$d:  7.0<br />fundata$lo2:  0.074211705<br />input$d:  7.0<br />input$n/input$d:  0.074211705","fundata$d:  7.5<br />fundata$lo2:  0.093265847<br />input$d:  7.5<br />input$n/input$d:  0.093265847","fundata$d:  8.0<br />fundata$lo2:  0.110504508<br />input$d:  8.0<br />input$n/input$d:  0.110504508","fundata$d:  8.5<br />fundata$lo2:  0.126198806<br />input$d:  8.5<br />input$n/input$d:  0.126198806","fundata$d:  9.0<br />fundata$lo2:  0.140566368<br />input$d:  9.0<br />input$n/input$d:  0.140566368","fundata$d:  9.5<br />fundata$lo2:  0.153784169<br />input$d:  9.5<br />input$n/input$d:  0.153784169","fundata$d: 10.0<br />fundata$lo2:  0.165997807<br />input$d: 10.0<br />input$n/input$d:  0.165997807","fundata$d: 10.5<br />fundata$lo2:  0.177328310<br />input$d: 10.5<br />input$n/input$d:  0.177328310","fundata$d: 11.0<br />fundata$lo2:  0.187877221<br />input$d: 11.0<br />input$n/input$d:  0.187877221","fundata$d: 11.5<br />fundata$lo2:  0.197730454<br />input$d: 11.5<br />input$n/input$d:  0.197730454","fundata$d: 12.0<br />fundata$lo2:  0.206961259<br />input$d: 12.0<br />input$n/input$d:  0.206961259","fundata$d: 12.5<br />fundata$lo2:  0.215632524<br />input$d: 12.5<br />input$n/input$d:  0.215632524","fundata$d: 13.0<br />fundata$lo2:  0.223798584<br />input$d: 13.0<br />input$n/input$d:  0.223798584","fundata$d: 13.5<br />fundata$lo2:  0.231506665<br />input$d: 13.5<br />input$n/input$d:  0.231506665","fundata$d: 14.0<br />fundata$lo2:  0.238798036<br />input$d: 14.0<br />input$n/input$d:  0.238798036","fundata$d: 14.5<br />fundata$lo2:  0.245708938<br />input$d: 14.5<br />input$n/input$d:  0.245708938","fundata$d: 15.0<br />fundata$lo2:  0.252271349<br />input$d: 15.0<br />input$n/input$d:  0.252271349","fundata$d: 15.5<br />fundata$lo2:  0.258513606<br />input$d: 15.5<br />input$n/input$d:  0.258513606","fundata$d: 16.0<br />fundata$lo2:  0.264460923<br />input$d: 16.0<br />input$n/input$d:  0.264460923","fundata$d: 16.5<br />fundata$lo2:  0.270135816<br />input$d: 16.5<br />input$n/input$d:  0.270135816","fundata$d: 17.0<br />fundata$lo2:  0.275558468<br />input$d: 17.0<br />input$n/input$d:  0.275558468"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,255,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,-0.861198546672445,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213,18.0851694801213],"y":[0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455,0.636144587764455],"text":"fundata$benchmark: 0.6361446","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(255,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[11.6677901755311,10.0002058314126,8.86785006302941,10.5575300132153,9.44722902508206,7.88495294575981,10.7720365704248,9.7420268864095,8.53464010501996,8.41205487329293,8.21338173703457,9.17792048072007,10.6657176005333,10.2359159094003,8.88861880730088,12.2028875785854,8.83956650365795,8.07340296898641,9.75950170200775,12.2000243916626,9.84038799559281,8.5876516550648,11.4107487644786,9.87822102528824,8.1969879272589,11.7701225564093,9.27668975251772,7.62168499872461,11.9583545996494,10.061516416761,10.4180461998912,9.18737876033884,9.78447876595393,6.7696419768525,13.1110152300607,11.1126120640017,10.6804932283068,8.5115774526306,11.998365586153,9.96974334831319,9.21820933035488,7.7007477945118,10.5572700095738,8.29304913976844,8.2845042272585,9.29081375612606,14.2501887775018,9.21820933035488,10.3547860769875,6.23244801655052,9.17740387172992,12.428027490613,10.6156282095886,11.3803421941647,10.5137421350065],"y":[0.688366027713249,0.627839219513243,0.50742960676458,0.5897721021388,0.526792960052892,0.227237813789566,0.610900185332867,0.524115313315709,0.487294488365534,0.603321529837706,0.606766710870991,0.534464728556199,0.510677066060139,0.644642754690342,0.471350480075167,0.768642754117727,0.523212627154328,0.272155940410352,0.666149755289548,0.650133456034294,0.478591921723166,0.593148209243279,0.578984808320779,0.48121925789443,0.501510298740674,0.650086312796379,0.620110491165706,0.582896204347692,0.657618537194325,0.590646491937026,0.673333004738334,0.645405974660308,0.623926258970199,0.34013395403587,0.692721314294942,0.59715452293914,0.58335147210858,0.613324128709528,0.635186109981951,0.572443047464655,0.507921989979801,0.457924427434092,0.657479637138559,0.361234115831808,0.527424180446457,0.666283446029844,0.762894000906126,0.507921989979801,0.735389925788449,0.488495440256953,0.509166742552988,0.729935048748017,0.547695380530889,0.622864291577277,0.696784019288793],"text":["continent: Africa<br />input$d: 11.667790<br />input$n/input$d: 0.6883660","continent: Africa<br />input$d: 10.000206<br />input$n/input$d: 0.6278392","continent: Africa<br />input$d:  8.867850<br />input$n/input$d: 0.5074296","continent: Africa<br />input$d: 10.557530<br />input$n/input$d: 0.5897721","continent: Africa<br />input$d:  9.447229<br />input$n/input$d: 0.5267930","continent: Africa<br />input$d:  7.884953<br />input$n/input$d: 0.2272378","continent: Africa<br />input$d: 10.772037<br />input$n/input$d: 0.6109002","continent: Africa<br />input$d:  9.742027<br />input$n/input$d: 0.5241153","continent: Africa<br />input$d:  8.534640<br />input$n/input$d: 0.4872945","continent: Africa<br />input$d:  8.412055<br />input$n/input$d: 0.6033215","continent: Africa<br />input$d:  8.213382<br />input$n/input$d: 0.6067667","continent: Africa<br />input$d:  9.177920<br />input$n/input$d: 0.5344647","continent: Africa<br />input$d: 10.665718<br />input$n/input$d: 0.5106771","continent: Africa<br />input$d: 10.235916<br />input$n/input$d: 0.6446428","continent: Africa<br />input$d:  8.888619<br />input$n/input$d: 0.4713505","continent: Africa<br />input$d: 12.202888<br />input$n/input$d: 0.7686428","continent: Africa<br />input$d:  8.839567<br />input$n/input$d: 0.5232126","continent: Africa<br />input$d:  8.073403<br />input$n/input$d: 0.2721559","continent: Africa<br />input$d:  9.759502<br />input$n/input$d: 0.6661498","continent: Africa<br />input$d: 12.200024<br />input$n/input$d: 0.6501335","continent: Africa<br />input$d:  9.840388<br />input$n/input$d: 0.4785919","continent: Africa<br />input$d:  8.587652<br />input$n/input$d: 0.5931482","continent: Africa<br />input$d: 11.410749<br />input$n/input$d: 0.5789848","continent: Africa<br />input$d:  9.878221<br />input$n/input$d: 0.4812193","continent: Africa<br />input$d:  8.196988<br />input$n/input$d: 0.5015103","continent: Africa<br />input$d: 11.770123<br />input$n/input$d: 0.6500863","continent: Africa<br />input$d:  9.276690<br />input$n/input$d: 0.6201105","continent: Africa<br />input$d:  7.621685<br />input$n/input$d: 0.5828962","continent: Africa<br />input$d: 11.958355<br />input$n/input$d: 0.6576185","continent: Africa<br />input$d: 10.061516<br />input$n/input$d: 0.5906465","continent: Africa<br />input$d: 10.418046<br />input$n/input$d: 0.6733330","continent: Africa<br />input$d:  9.187379<br />input$n/input$d: 0.6454060","continent: Africa<br />input$d:  9.784479<br />input$n/input$d: 0.6239263","continent: Africa<br />input$d:  6.769642<br />input$n/input$d: 0.3401340","continent: Africa<br />input$d: 13.111015<br />input$n/input$d: 0.6927213","continent: Africa<br />input$d: 11.112612<br />input$n/input$d: 0.5971545","continent: Africa<br />input$d: 10.680493<br />input$n/input$d: 0.5833515","continent: Africa<br />input$d:  8.511577<br />input$n/input$d: 0.6133241","continent: Africa<br />input$d: 11.998366<br />input$n/input$d: 0.6351861","continent: Africa<br />input$d:  9.969743<br />input$n/input$d: 0.5724430","continent: Africa<br />input$d:  9.218209<br />input$n/input$d: 0.5079220","continent: Africa<br />input$d:  7.700748<br />input$n/input$d: 0.4579244","continent: Africa<br />input$d: 10.557270<br />input$n/input$d: 0.6574796","continent: Africa<br />input$d:  8.293049<br />input$n/input$d: 0.3612341","continent: Africa<br />input$d:  8.284504<br />input$n/input$d: 0.5274242","continent: Africa<br />input$d:  9.290814<br />input$n/input$d: 0.6662834","continent: Africa<br />input$d: 14.250189<br />input$n/input$d: 0.7628940","continent: Africa<br />input$d:  9.218209<br />input$n/input$d: 0.5079220","continent: Africa<br />input$d: 10.354786<br />input$n/input$d: 0.7353899","continent: Africa<br />input$d:  6.232448<br />input$n/input$d: 0.4884954","continent: Africa<br />input$d:  9.177404<br />input$n/input$d: 0.5091667","continent: Africa<br />input$d: 12.428027<br />input$n/input$d: 0.7299350","continent: Africa<br />input$d: 10.615628<br />input$n/input$d: 0.5476954","continent: Africa<br />input$d: 11.380342<br />input$n/input$d: 0.6228643","continent: Africa<br />input$d: 10.513742<br />input$n/input$d: 0.6967840"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":17.007874015748,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[10.9382721784581,12.1523553630242,12.4465451789662,11.8552235554442,13.2909341574572,6.7696419768525,5.32787616878958,7.67182679787878,11.5294187006973,12.5423162845964,12.3334891301548,16.2980497408461,14.2156294002275,14.4290315690866,13.6257497987933,13.6308458581536,13.0531483383829,13.2744542229431,12.5803635139467,12.3334891301548,11.3844782687449,3.89182029811063,13.035362182181,12.0846674327035,12.7385873514111,10.0606194982564,8.80881748310064,11.8662337480608,12.5308698505709,11.9436553796581,13.3917658921004,12.3662678773324,13.4764537843027,12.0846674327035,12.8682295497783,11.006888357936,11.5303428970073,11.4277923229924,9.81771177551472,6.92755790627832,9.49612063713837,10.2631530203974,6.17378610390194,14.9721134141364,13.0237997107468,11.3162534308618,7.8578675593318,8.28626945278307],"y":[0.714150129188534,0.670333385313231,0.654814581274778,0.526373527752252,0.683948714340453,0,0.206200792560406,0.271049072986735,0.735932730886644,0.65605456729788,0.580033251425021,0.735829288898803,0.746058670987489,0.765113379549239,0.701566985544107,0.640212904350204,0.697709873171099,0.661062241155762,0.642043183377337,0.580033251425021,0.642091917896094,1.87826798924234,0.668116073022682,0.467449705969894,0.559850029970307,0.416441029576014,0.182707601278122,0.680315212439562,0.639646521319233,0.620290047845192,0.714024804579774,0.634515607548348,0.703809872089499,0.467449705969894,0.683957254074388,0.309006257813987,0.646228976149673,0.553419136752852,0.72443840350345,0.332380490231234,0.473857677495373,0.44163810908256,1.31947064134226,0.690567539570746,0.560340948464489,0.568894262493211,0.452457111887458,0.81144264969116],"text":["continent: Asia<br />input$d: 10.938272<br />input$n/input$d: 0.7141501","continent: Asia<br />input$d: 12.152355<br />input$n/input$d: 0.6703334","continent: Asia<br />input$d: 12.446545<br />input$n/input$d: 0.6548146","continent: Asia<br />input$d: 11.855224<br />input$n/input$d: 0.5263735","continent: Asia<br />input$d: 13.290934<br />input$n/input$d: 0.6839487","continent: Asia<br />input$d:  6.769642<br />input$n/input$d: 0.0000000","continent: Asia<br />input$d:  5.327876<br />input$n/input$d: 0.2062008","continent: Asia<br />input$d:  7.671827<br />input$n/input$d: 0.2710491","continent: Asia<br />input$d: 11.529419<br />input$n/input$d: 0.7359327","continent: Asia<br />input$d: 12.542316<br />input$n/input$d: 0.6560546","continent: Asia<br />input$d: 12.333489<br />input$n/input$d: 0.5800333","continent: Asia<br />input$d: 16.298050<br />input$n/input$d: 0.7358293","continent: Asia<br />input$d: 14.215629<br />input$n/input$d: 0.7460587","continent: Asia<br />input$d: 14.429032<br />input$n/input$d: 0.7651134","continent: Asia<br />input$d: 13.625750<br />input$n/input$d: 0.7015670","continent: Asia<br />input$d: 13.630846<br />input$n/input$d: 0.6402129","continent: Asia<br />input$d: 13.053148<br />input$n/input$d: 0.6977099","continent: Asia<br />input$d: 13.274454<br />input$n/input$d: 0.6610622","continent: Asia<br />input$d: 12.580364<br />input$n/input$d: 0.6420432","continent: Asia<br />input$d: 12.333489<br />input$n/input$d: 0.5800333","continent: Asia<br />input$d: 11.384478<br />input$n/input$d: 0.6420919","continent: Asia<br />input$d:  3.891820<br />input$n/input$d: 1.8782680","continent: Asia<br />input$d: 13.035362<br />input$n/input$d: 0.6681161","continent: Asia<br />input$d: 12.084667<br />input$n/input$d: 0.4674497","continent: Asia<br />input$d: 12.738587<br />input$n/input$d: 0.5598500","continent: Asia<br />input$d: 10.060619<br />input$n/input$d: 0.4164410","continent: Asia<br />input$d:  8.808817<br />input$n/input$d: 0.1827076","continent: Asia<br />input$d: 11.866234<br />input$n/input$d: 0.6803152","continent: Asia<br />input$d: 12.530870<br />input$n/input$d: 0.6396465","continent: Asia<br />input$d: 11.943655<br />input$n/input$d: 0.6202900","continent: Asia<br />input$d: 13.391766<br />input$n/input$d: 0.7140248","continent: Asia<br />input$d: 12.366268<br />input$n/input$d: 0.6345156","continent: Asia<br />input$d: 13.476454<br />input$n/input$d: 0.7038099","continent: Asia<br />input$d: 12.084667<br />input$n/input$d: 0.4674497","continent: Asia<br />input$d: 12.868230<br />input$n/input$d: 0.6839573","continent: Asia<br />input$d: 11.006888<br />input$n/input$d: 0.3090063","continent: Asia<br />input$d: 11.530343<br />input$n/input$d: 0.6462290","continent: Asia<br />input$d: 11.427792<br />input$n/input$d: 0.5534191","continent: Asia<br />input$d:  9.817712<br />input$n/input$d: 0.7244384","continent: Asia<br />input$d:  6.927558<br />input$n/input$d: 0.3323805","continent: Asia<br />input$d:  9.496121<br />input$n/input$d: 0.4738577","continent: Asia<br />input$d: 10.263153<br />input$n/input$d: 0.4416381","continent: Asia<br />input$d:  6.173786<br />input$n/input$d: 1.3194706","continent: Asia<br />input$d: 14.972113<br />input$n/input$d: 0.6905675","continent: Asia<br />input$d: 13.023800<br />input$n/input$d: 0.5603409","continent: Asia<br />input$d: 11.316253<br />input$n/input$d: 0.5688943","continent: Asia<br />input$d:  7.857868<br />input$n/input$d: 0.4524571","continent: Asia<br />input$d:  8.286269<br />input$n/input$d: 0.8114426"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(183,159,0,1)","opacity":1,"size":17.007874015748,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(183,159,0,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[11.7251374842108,9.37661723160128,13.1877502885573,12.6686456106448,13.6717129331664,11.9955491255721,12.7000674218847,12.4908793380364,10.6988528164814,14.228296139239,12.3359642973271,11.539937337217,9.29081375612606,11.2324837841739,15.33484081397,14.8390130908096,9.29081375612606,12.439522899833,13.3451532661873,8.72631895096224,12.3628071273215,9.29081375612606,15.0718252117517,7.72046169459972,11.3406176033585,11.5200599538708,7.88193748927207,12.2711438372736,11.0098199642194,10.2684084053287,12.3267847206924,7.72046169459972,11.4045827291332,14.0496984949008,11.7458609187469,11.4346287321951,14.6137944791463,13.617110837441,13.7452801353124,15.3107373478581,8.43446354381724,13.2735674344854,12.7854490430723,12.2645302151017,14.9958023678416,13.5670722753226,13.2916284007557,14.3428740738085,15.28409110827,3.29583686600433],"y":[0.656540631667568,0.50603879961867,0.692333602336429,0.607894515131638,0.734186077200794,0.728230537367469,0.743729318938841,0.694742966883752,0.516079715514595,0.713878639758756,0.631409123269363,0.585525916805113,0.510712221008046,0.596986314309925,0.747164968547643,0.757285508378992,0.510712221008046,0.720703428496498,0.741168709997952,0.385878151934289,0.683118919907827,0.510712221008046,0.768752973210536,0.521387431214222,0.661483767485627,0.654055854501504,0.510705863401475,0.665919949167595,0.59982305306195,0.579763007010745,0.687384544784285,0.431606896321499,0.624632479275815,0.691593199241671,0.698142802559456,0.567238424688142,0.742739176738165,0.714596520094503,0.730659466577185,0.749143179232298,0.525322894079169,0.643907238332943,0.715753281457266,0.676487050075014,0.748567928651582,0.700457625321168,0.695159524742694,0.72615869921818,0.768803899175356,1.22134433662526],"text":["continent: Europe<br />input$d: 11.725137<br />input$n/input$d: 0.6565406","continent: Europe<br />input$d:  9.376617<br />input$n/input$d: 0.5060388","continent: Europe<br />input$d: 13.187750<br />input$n/input$d: 0.6923336","continent: Europe<br />input$d: 12.668646<br />input$n/input$d: 0.6078945","continent: Europe<br />input$d: 13.671713<br />input$n/input$d: 0.7341861","continent: Europe<br />input$d: 11.995549<br />input$n/input$d: 0.7282305","continent: Europe<br />input$d: 12.700067<br />input$n/input$d: 0.7437293","continent: Europe<br />input$d: 12.490879<br />input$n/input$d: 0.6947430","continent: Europe<br />input$d: 10.698853<br />input$n/input$d: 0.5160797","continent: Europe<br />input$d: 14.228296<br />input$n/input$d: 0.7138786","continent: Europe<br />input$d: 12.335964<br />input$n/input$d: 0.6314091","continent: Europe<br />input$d: 11.539937<br />input$n/input$d: 0.5855259","continent: Europe<br />input$d:  9.290814<br />input$n/input$d: 0.5107122","continent: Europe<br />input$d: 11.232484<br />input$n/input$d: 0.5969863","continent: Europe<br />input$d: 15.334841<br />input$n/input$d: 0.7471650","continent: Europe<br />input$d: 14.839013<br />input$n/input$d: 0.7572855","continent: Europe<br />input$d:  9.290814<br />input$n/input$d: 0.5107122","continent: Europe<br />input$d: 12.439523<br />input$n/input$d: 0.7207034","continent: Europe<br />input$d: 13.345153<br />input$n/input$d: 0.7411687","continent: Europe<br />input$d:  8.726319<br />input$n/input$d: 0.3858782","continent: Europe<br />input$d: 12.362807<br />input$n/input$d: 0.6831189","continent: Europe<br />input$d:  9.290814<br />input$n/input$d: 0.5107122","continent: Europe<br />input$d: 15.071825<br />input$n/input$d: 0.7687530","continent: Europe<br />input$d:  7.720462<br />input$n/input$d: 0.5213874","continent: Europe<br />input$d: 11.340618<br />input$n/input$d: 0.6614838","continent: Europe<br />input$d: 11.520060<br />input$n/input$d: 0.6540559","continent: Europe<br />input$d:  7.881937<br />input$n/input$d: 0.5107059","continent: Europe<br />input$d: 12.271144<br />input$n/input$d: 0.6659199","continent: Europe<br />input$d: 11.009820<br />input$n/input$d: 0.5998231","continent: Europe<br />input$d: 10.268408<br />input$n/input$d: 0.5797630","continent: Europe<br />input$d: 12.326785<br />input$n/input$d: 0.6873845","continent: Europe<br />input$d:  7.720462<br />input$n/input$d: 0.4316069","continent: Europe<br />input$d: 11.404583<br />input$n/input$d: 0.6246325","continent: Europe<br />input$d: 14.049698<br />input$n/input$d: 0.6915932","continent: Europe<br />input$d: 11.745861<br />input$n/input$d: 0.6981428","continent: Europe<br />input$d: 11.434629<br />input$n/input$d: 0.5672384","continent: Europe<br />input$d: 14.613794<br />input$n/input$d: 0.7427392","continent: Europe<br />input$d: 13.617111<br />input$n/input$d: 0.7145965","continent: Europe<br />input$d: 13.745280<br />input$n/input$d: 0.7306595","continent: Europe<br />input$d: 15.310737<br />input$n/input$d: 0.7491432","continent: Europe<br />input$d:  8.434464<br />input$n/input$d: 0.5253229","continent: Europe<br />input$d: 13.273567<br />input$n/input$d: 0.6439072","continent: Europe<br />input$d: 12.785449<br />input$n/input$d: 0.7157533","continent: Europe<br />input$d: 12.264530<br />input$n/input$d: 0.6764871","continent: Europe<br />input$d: 14.995802<br />input$n/input$d: 0.7485679","continent: Europe<br />input$d: 13.567072<br />input$n/input$d: 0.7004576","continent: Europe<br />input$d: 13.291628<br />input$n/input$d: 0.6951595","continent: Europe<br />input$d: 14.342874<br />input$n/input$d: 0.7261587","continent: Europe<br />input$d: 15.284091<br />input$n/input$d: 0.7688039","continent: Europe<br />input$d:  3.295837<br />input$n/input$d: 1.2213443"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","opacity":1,"size":17.007874015748,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,186,56,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[7.72046169459972,7.02286808608264,9.09773142759353,8.19118600464279,9.42666069794227,8.98143022576764,13.7807969525242,8.98143022576764,12.2792208715606,11.1786268642899,5.08140436498446,12.4355242591188,11.0629754119225,5.04342511691925,12.1707045016924,9.45218790808416,12.1389441065235,10.5386612813206,14.6152243265842,8.79920924224139,12.7756302777198,3.78418963391826,8.34069464792507,7.45182223652793,8.98143022576764,9.37661723160128,17.2239709334489],"y":[0.521387431214222,0.474479154290069,0.575576670349683,0.453361950833426,0.610916416577334,0.583029855067698,0.728247486273686,0.583029855067698,0.650130739092756,0.539052429871772,1.24740989358806,0.651543389378118,0.686967264793712,0,0.725002825226226,0.584568672656839,0.693999388854305,0.601461030865289,0.835648633783969,0.588251692859542,0.68211142395859,1.38376838092228,0.486823122287128,0.308996245469605,0.551785955357426,0.642648177374332,0.767276049498896],"text":["continent: North America<br />input$d:  7.720462<br />input$n/input$d: 0.5213874","continent: North America<br />input$d:  7.022868<br />input$n/input$d: 0.4744792","continent: North America<br />input$d:  9.097731<br />input$n/input$d: 0.5755767","continent: North America<br />input$d:  8.191186<br />input$n/input$d: 0.4533620","continent: North America<br />input$d:  9.426661<br />input$n/input$d: 0.6109164","continent: North America<br />input$d:  8.981430<br />input$n/input$d: 0.5830299","continent: North America<br />input$d: 13.780797<br />input$n/input$d: 0.7282475","continent: North America<br />input$d:  8.981430<br />input$n/input$d: 0.5830299","continent: North America<br />input$d: 12.279221<br />input$n/input$d: 0.6501307","continent: North America<br />input$d: 11.178627<br />input$n/input$d: 0.5390524","continent: North America<br />input$d:  5.081404<br />input$n/input$d: 1.2474099","continent: North America<br />input$d: 12.435524<br />input$n/input$d: 0.6515434","continent: North America<br />input$d: 11.062975<br />input$n/input$d: 0.6869673","continent: North America<br />input$d:  5.043425<br />input$n/input$d: 0.0000000","continent: North America<br />input$d: 12.170705<br />input$n/input$d: 0.7250028","continent: North America<br />input$d:  9.452188<br />input$n/input$d: 0.5845687","continent: North America<br />input$d: 12.138944<br />input$n/input$d: 0.6939994","continent: North America<br />input$d: 10.538661<br />input$n/input$d: 0.6014610","continent: North America<br />input$d: 14.615224<br />input$n/input$d: 0.8356486","continent: North America<br />input$d:  8.799209<br />input$n/input$d: 0.5882517","continent: North America<br />input$d: 12.775630<br />input$n/input$d: 0.6821114","continent: North America<br />input$d:  3.784190<br />input$n/input$d: 1.3837684","continent: North America<br />input$d:  8.340695<br />input$n/input$d: 0.4868231","continent: North America<br />input$d:  7.451822<br />input$n/input$d: 0.3089962","continent: North America<br />input$d:  8.981430<br />input$n/input$d: 0.5517860","continent: North America<br />input$d:  9.376617<br />input$n/input$d: 0.6426482","continent: North America<br />input$d: 17.223971<br />input$n/input$d: 0.7672760"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,196,1)","opacity":1,"size":17.007874015748,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,191,196,1)"}},"hoveron":"points","name":"North America","legendgroup":"North America","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[10.2839424976401,4.20469261939097,1.38629436111989,0,7.81681996576455,8.44677072711969,1.09861228866811,2.89037175789616,1.09861228866811],"y":[0.662425436134121,0.16485085672216,2.54373142062517,null,0.416805881712898,0.433723344042855,3.33471751947279,1.26750534291003,3.33471751947279],"text":["continent: Oceania<br />input$d: 10.283942<br />input$n/input$d: 0.6624254","continent: Oceania<br />input$d:  4.204693<br />input$n/input$d: 0.1648509","continent: Oceania<br />input$d:  1.386294<br />input$n/input$d: 2.5437314","continent: Oceania<br />input$d:  0.000000<br />input$n/input$d:       Inf","continent: Oceania<br />input$d:  7.816820<br />input$n/input$d: 0.4168059","continent: Oceania<br />input$d:  8.446771<br />input$n/input$d: 0.4337233","continent: Oceania<br />input$d:  1.098612<br />input$n/input$d: 3.3347175","continent: Oceania<br />input$d:  2.890372<br />input$n/input$d: 1.2675053","continent: Oceania<br />input$d:  1.098612<br />input$n/input$d: 3.3347175"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","opacity":1,"size":17.007874015748,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(97,156,255,1)"}},"hoveron":"points","name":"Oceania","legendgroup":"Oceania","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[14.6490234116608,12.5035887054338,16.3404678648683,13.7849616557355,14.6807568066001,12.6844752791818,9.21751457572418,12.2385253147491,14.2348608196046,9.11548009095222,11.4645542130448,11.9554486931017],"y":[0.745562129406379,0.752289480789608,0.77391298110725,0.727462855748982,0.752519182058889,0.766441299943489,0.587587940079704,0.677761343435407,0.761808412507112,0.567841702348901,0.593438273410322,0.61471810998226],"text":["continent: South America<br />input$d: 14.649023<br />input$n/input$d: 0.7455621","continent: South America<br />input$d: 12.503589<br />input$n/input$d: 0.7522895","continent: South America<br />input$d: 16.340468<br />input$n/input$d: 0.7739130","continent: South America<br />input$d: 13.784962<br />input$n/input$d: 0.7274629","continent: South America<br />input$d: 14.680757<br />input$n/input$d: 0.7525192","continent: South America<br />input$d: 12.684475<br />input$n/input$d: 0.7664413","continent: South America<br />input$d:  9.217515<br />input$n/input$d: 0.5875879","continent: South America<br />input$d: 12.238525<br />input$n/input$d: 0.6777613","continent: South America<br />input$d: 14.234861<br />input$n/input$d: 0.7618084","continent: South America<br />input$d:  9.115480<br />input$n/input$d: 0.5678417","continent: South America<br />input$d: 11.464554<br />input$n/input$d: 0.5934383","continent: South America<br />input$d: 11.955449<br />input$n/input$d: 0.6147181"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(245,100,227,1)","opacity":1,"size":17.007874015748,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(245,100,227,1)"}},"hoveron":"points","name":"South America","legendgroup":"South America","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":27.8721461187215,"r":7.30593607305936,"b":41.8264840182648,"l":43.1050228310502},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.861198546672445,18.0851694801213],"tickmode":"array","ticktext":["0","5","10","15"],"tickvals":[0,5,10,15],"categoryorder":"array","categoryarray":["0","5","10","15"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"input$d","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.05,1.05],"tickmode":"array","ticktext":["0.0","0.1","0.2","0.3","0.4","0.5","0.6","0.7","0.8","0.9","1.0"],"tickvals":[0,0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1],"categoryorder":"array","categoryarray":["0.0","0.1","0.2","0.3","0.4","0.5","0.6","0.7","0.8","0.9","1.0"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"input$n/input$d","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":0.959399606299213},"annotations":[{"text":"continent","x":1.02,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"left","yanchor":"bottom","legendTitle":true}],"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"425821924ded":{"x":{},"y":{},"x.1":{},"y.1":{},"type":"scatter"},"425871313e86":{"x":{},"y":{},"x.1":{},"y.1":{}},"4258cac909":{"x":{},"y":{},"x.1":{},"y.1":{}},"42584a885030":{"x":{},"y":{},"x.1":{},"y.1":{}},"425876853c41":{"yintercept":{}},"4258240f445f":{"colour":{},"x":{},"y":{}}},"cur_data":"425821924ded","visdat":{"425821924ded":["function (y) ","x"],"425871313e86":["function (y) ","x"],"4258cac909":["function (y) ","x"],"42584a885030":["function (y) ","x"],"425876853c41":["function (y) ","x"],"4258240f445f":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<p>With the interactive graph, we can pan to see the data points that were cut off.</p>
<h3 id="drawing-from-scratch-using-ggplot">Drawing from scratch using <em>ggplot</em></h3>
<p>To plot the funnel plot from scratch, the control limits needs to be calculated and overlaid on the base point plot. Similar to <em>funnelR</em>, runtime error is encountered when using the untransformed variables to plot the funnel plot using <em>ggplot</em>. Therefore, the log-transformed variables are also used here.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># case_fatality rate is used directly as it is the same value as dividing the log-transformed deaths by cases</span>
<span class='va'>rate</span> <span class='op'>&lt;-</span> <span class='va'>covid_deaths_tidy</span><span class='op'>$</span><span class='va'>case_fatality_rate</span>
<span class='va'>number</span> <span class='op'>&lt;-</span> <span class='va'>covid_deaths_tidy</span><span class='op'>$</span><span class='va'>total_cases_log</span>

<span class='va'>rate.se</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='op'>(</span><span class='va'>rate</span><span class='op'>*</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>-</span><span class='va'>rate</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>/</span> <span class='op'>(</span><span class='va'>number</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>df</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span><span class='va'>rate</span>, <span class='va'>number</span>, <span class='va'>rate.se</span><span class='op'>)</span>

<span class='co'># Calculate common effect (fixed effect model)</span>
<span class='va'>rate.fem</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/weighted.mean.html'>weighted.mean</a></span><span class='op'>(</span><span class='va'>rate</span>, <span class='fl'>1</span><span class='op'>/</span><span class='va'>rate.se</span><span class='op'>^</span><span class='fl'>2</span><span class='op'>)</span>

<span class='co'># Calculate lower and upper limits for 95% and 99.9% CI</span>
<span class='va'>number.seq</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span><span class='op'>(</span><span class='va'>number</span><span class='op'>)</span>, <span class='fl'>1</span><span class='op'>)</span>
<span class='va'>number.ll95</span> <span class='op'>&lt;-</span> <span class='va'>rate.fem</span> <span class='op'>-</span> <span class='fl'>1.96</span> <span class='op'>*</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='op'>(</span><span class='va'>rate.fem</span><span class='op'>*</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>-</span><span class='va'>rate.fem</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>/</span> <span class='op'>(</span><span class='va'>number.seq</span><span class='op'>)</span><span class='op'>)</span> 
<span class='va'>number.ul95</span> <span class='op'>&lt;-</span> <span class='va'>rate.fem</span> <span class='op'>+</span> <span class='fl'>1.96</span> <span class='op'>*</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='op'>(</span><span class='va'>rate.fem</span><span class='op'>*</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>-</span><span class='va'>rate.fem</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>/</span> <span class='op'>(</span><span class='va'>number.seq</span><span class='op'>)</span><span class='op'>)</span> 
<span class='va'>number.ll999</span> <span class='op'>&lt;-</span> <span class='va'>rate.fem</span> <span class='op'>-</span> <span class='fl'>3.29</span> <span class='op'>*</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='op'>(</span><span class='va'>rate.fem</span><span class='op'>*</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>-</span><span class='va'>rate.fem</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>/</span> <span class='op'>(</span><span class='va'>number.seq</span><span class='op'>)</span><span class='op'>)</span> 
<span class='va'>number.ul999</span> <span class='op'>&lt;-</span> <span class='va'>rate.fem</span> <span class='op'>+</span> <span class='fl'>3.29</span> <span class='op'>*</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='op'>(</span><span class='va'>rate.fem</span><span class='op'>*</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>-</span><span class='va'>rate.fem</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>/</span> <span class='op'>(</span><span class='va'>number.seq</span><span class='op'>)</span><span class='op'>)</span> 
<span class='va'>dfCI</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span><span class='va'>number.ll95</span>, <span class='va'>number.ul95</span>, <span class='va'>number.ll999</span>, <span class='va'>number.ul999</span>, <span class='va'>number.seq</span>, <span class='va'>rate.fem</span><span class='op'>)</span>

<span class='co'># Draw funnel plot</span>
<span class='va'>fp_ggplot</span> <span class='op'>&lt;-</span> <span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>covid_deaths_tidy</span>, 
                    <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>total_cases_log</span>, y <span class='op'>=</span> <span class='va'>case_fatality_rate</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>colour<span class='op'>=</span><span class='va'>continent</span>, <span class='co'># add colour aesthetic</span>
                 size<span class='op'>=</span><span class='va'>population</span>, <span class='co'># add size aesthetic</span>
                 label<span class='op'>=</span><span class='va'>location</span><span class='op'>)</span>, <span class='co'># add label aesthetic</span>
             alpha<span class='op'>=</span><span class='fl'>0.4</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_line</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>dfCI</span>, <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>number.seq</span>, y <span class='op'>=</span> <span class='va'>number.ll95</span><span class='op'>)</span>, 
            size <span class='op'>=</span> <span class='fl'>0.4</span>, colour <span class='op'>=</span> <span class='st'>"grey40"</span>, linetype <span class='op'>=</span> <span class='st'>"dashed"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_line</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>dfCI</span>, <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>number.seq</span>, y <span class='op'>=</span> <span class='va'>number.ul95</span><span class='op'>)</span>, 
            size <span class='op'>=</span> <span class='fl'>0.4</span>, colour <span class='op'>=</span> <span class='st'>"grey40"</span>, linetype <span class='op'>=</span> <span class='st'>"dashed"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_line</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>dfCI</span>, <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>number.seq</span>, y <span class='op'>=</span> <span class='va'>number.ll999</span><span class='op'>)</span>, 
            size <span class='op'>=</span> <span class='fl'>0.4</span>, colour <span class='op'>=</span> <span class='st'>"grey40"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_line</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>dfCI</span>, <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>number.seq</span>, y <span class='op'>=</span> <span class='va'>number.ul999</span><span class='op'>)</span>, 
            size <span class='op'>=</span> <span class='fl'>0.4</span>, colour <span class='op'>=</span> <span class='st'>"grey40"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_hline</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>dfCI</span>, <span class='fu'>aes</span><span class='op'>(</span>yintercept <span class='op'>=</span> <span class='va'>rate.fem</span><span class='op'>)</span>, 
             size <span class='op'>=</span> <span class='fl'>0.4</span>, colour <span class='op'>=</span> <span class='st'>"grey40"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>annotate</span><span class='op'>(</span><span class='st'>"text"</span>, x <span class='op'>=</span> <span class='fl'>0</span>, y <span class='op'>=</span> <span class='op'>-</span><span class='fl'>0.05</span>, label <span class='op'>=</span> <span class='st'>"95%"</span>, size <span class='op'>=</span> <span class='fl'>3</span>, colour <span class='op'>=</span> <span class='st'>"grey40"</span><span class='op'>)</span> <span class='op'>+</span> <span class='co'># label 95% CI</span>
  <span class='fu'>annotate</span><span class='op'>(</span><span class='st'>"text"</span>, x <span class='op'>=</span> <span class='fl'>20</span>, y <span class='op'>=</span> <span class='op'>-</span><span class='fl'>0.15</span>, label <span class='op'>=</span> <span class='st'>"99%"</span>, size <span class='op'>=</span> <span class='fl'>3</span>, colour <span class='op'>=</span> <span class='st'>"grey40"</span><span class='op'>)</span> <span class='op'>+</span> <span class='co'># label 99% CI</span>
  <span class='fu'>ggtitle</span><span class='op'>(</span><span class='st'>"Case Fatality Rate by Total Number of COVID-19 Cases"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>xlab</span><span class='op'>(</span><span class='st'>"Total Number of COVID-19 Cases - log "</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>ylab</span><span class='op'>(</span><span class='st'>"Case Fatality Rate"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_light</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_size_continuous</span><span class='op'>(</span>guide <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>+</span> <span class='co'># remove size legend</span>
  <span class='fu'>scale_colour_discrete</span><span class='op'>(</span>name <span class='op'>=</span><span class='st'>"Continent"</span><span class='op'>)</span> <span class='co'># rename colour legend title</span>

<span class='va'>fp_ggplot</span>
</code></pre>
</div>
<p><img src="covid-deaths_files/figure-html5/fp7-1.png" width="624" /></p>
</div>
<p>The graph can be made interactive with <code>ggplotly()</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>fp_ggplotly</span> <span class='op'>&lt;-</span> <span class='fu'>ggplotly</span><span class='op'>(</span><span class='va'>fp_ggplot</span>,
                        tooltip <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"colour"</span>, <span class='st'>"label"</span>, <span class='st'>"x"</span>, <span class='st'>"y"</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>fp_ggplotly</span>
</code></pre>
</div>
<div id="htmlwidget-0545021cff212632f043" style="width:624px;height:384px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-0545021cff212632f043">{"x":{"data":[{"x":[11.6677901755311,10.0002058314126,8.86785006302941,10.5575300132153,9.44722902508206,7.88495294575981,10.7720365704248,9.7420268864095,8.53464010501996,8.41205487329293,8.21338173703457,9.17792048072007,10.6657176005333,10.2359159094003,8.88861880730088,12.2028875785854,8.83956650365795,8.07340296898641,9.75950170200775,12.2000243916626,9.84038799559281,8.5876516550648,11.4107487644786,9.87822102528824,8.1969879272589,11.7701225564093,9.27668975251772,7.62168499872461,11.9583545996494,10.061516416761,10.4180461998912,9.18737876033884,9.78447876595393,6.7696419768525,13.1110152300607,11.1126120640017,10.6804932283068,8.5115774526306,11.998365586153,9.96974334831319,9.21820933035488,7.7007477945118,10.5572700095738,8.29304913976844,8.2845042272585,9.29081375612606,14.2501887775018,9.21820933035488,10.3547860769875,6.23244801655052,9.17740387172992,12.428027490613,10.6156282095886,11.3803421941647,10.5137421350065],"y":[0.026355460385439,0.0241931823339839,0.0126760563380282,0.0131544740810066,0.011441647597254,0.00225818592397441,0.0151251337347123,0.00969561640615819,0.0125786163522013,0.0355476560764275,0.0395663956639566,0.0139448404090487,0.00541284617717739,0.026320507763474,0.00910470409711684,0.0594139363174896,0.0147783251231527,0.00280548628428928,0.0384570966624322,0.0140044468142902,0.00591148745806039,0.0303821062441752,0.00819608581523364,0.00594841290190247,0.0168044077134986,0.0162684605273332,0.0294778214486244,0.0416258570029383,0.0166670936995567,0.016265368852459,0.0332655867057206,0.0384733449299089,0.0252309078621311,0.0114810562571757,0.0177968193090837,0.0113712674038591,0.0116784293891814,0.0372083668543846,0.0125608502729416,0.01408516612073,0.0124223602484472,0.0153846153846154,0.0268878718535469,0.005005005005005,0.0199394245330641,0.0450267577043735,0.0340881573307538,0.0107153487449152,0.0645715923201834,0.0412573673870334,0.0110582885489872,0.0348614153614494,0.0082174307650796,0.0136784535811744,0.0412569938616981],"text":["continent: Africa<br />location: Algeria<br />total_cases_log: 11.667790<br />case_fatality_rate: 0.0263554604","continent: Africa<br />location: Angola<br />total_cases_log: 10.000206<br />case_fatality_rate: 0.0241931823","continent: Africa<br />location: Benin<br />total_cases_log:  8.867850<br />case_fatality_rate: 0.0126760563","continent: Africa<br />location: Botswana<br />total_cases_log: 10.557530<br />case_fatality_rate: 0.0131544741","continent: Africa<br />location: Burkina Faso<br />total_cases_log:  9.447229<br />case_fatality_rate: 0.0114416476","continent: Africa<br />location: Burundi<br />total_cases_log:  7.884953<br />case_fatality_rate: 0.0022581859","continent: Africa<br />location: Cameroon<br />total_cases_log: 10.772037<br />case_fatality_rate: 0.0151251337","continent: Africa<br />location: Cape Verde<br />total_cases_log:  9.742027<br />case_fatality_rate: 0.0096956164","continent: Africa<br />location: Central African Republic<br />total_cases_log:  8.534640<br />case_fatality_rate: 0.0125786164","continent: Africa<br />location: Chad<br />total_cases_log:  8.412055<br />case_fatality_rate: 0.0355476561","continent: Africa<br />location: Comoros<br />total_cases_log:  8.213382<br />case_fatality_rate: 0.0395663957","continent: Africa<br />location: Congo<br />total_cases_log:  9.177920<br />case_fatality_rate: 0.0139448404","continent: Africa<br />location: Cote d'Ivoire<br />total_cases_log: 10.665718<br />case_fatality_rate: 0.0054128462","continent: Africa<br />location: Democratic Republic of Congo<br />total_cases_log: 10.235916<br />case_fatality_rate: 0.0263205078","continent: Africa<br />location: Djibouti<br />total_cases_log:  8.888619<br />case_fatality_rate: 0.0091047041","continent: Africa<br />location: Egypt<br />total_cases_log: 12.202888<br />case_fatality_rate: 0.0594139363","continent: Africa<br />location: Equatorial Guinea<br />total_cases_log:  8.839567<br />case_fatality_rate: 0.0147783251","continent: Africa<br />location: Eritrea<br />total_cases_log:  8.073403<br />case_fatality_rate: 0.0028054863","continent: Africa<br />location: Eswatini<br />total_cases_log:  9.759502<br />case_fatality_rate: 0.0384570967","continent: Africa<br />location: Ethiopia<br />total_cases_log: 12.200024<br />case_fatality_rate: 0.0140044468","continent: Africa<br />location: Gabon<br />total_cases_log:  9.840388<br />case_fatality_rate: 0.0059114875","continent: Africa<br />location: Gambia<br />total_cases_log:  8.587652<br />case_fatality_rate: 0.0303821062","continent: Africa<br />location: Ghana<br />total_cases_log: 11.410749<br />case_fatality_rate: 0.0081960858","continent: Africa<br />location: Guinea<br />total_cases_log:  9.878221<br />case_fatality_rate: 0.0059484129","continent: Africa<br />location: Guinea-Bissau<br />total_cases_log:  8.196988<br />case_fatality_rate: 0.0168044077","continent: Africa<br />location: Kenya<br />total_cases_log: 11.770123<br />case_fatality_rate: 0.0162684605","continent: Africa<br />location: Lesotho<br />total_cases_log:  9.276690<br />case_fatality_rate: 0.0294778214","continent: Africa<br />location: Liberia<br />total_cases_log:  7.621685<br />case_fatality_rate: 0.0416258570","continent: Africa<br />location: Libya<br />total_cases_log: 11.958355<br />case_fatality_rate: 0.0166670937","continent: Africa<br />location: Madagascar<br />total_cases_log: 10.061516<br />case_fatality_rate: 0.0162653689","continent: Africa<br />location: Malawi<br />total_cases_log: 10.418046<br />case_fatality_rate: 0.0332655867","continent: Africa<br />location: Mali<br />total_cases_log:  9.187379<br />case_fatality_rate: 0.0384733449","continent: Africa<br />location: Mauritania<br />total_cases_log:  9.784479<br />case_fatality_rate: 0.0252309079","continent: Africa<br />location: Mauritius<br />total_cases_log:  6.769642<br />case_fatality_rate: 0.0114810563","continent: Africa<br />location: Morocco<br />total_cases_log: 13.111015<br />case_fatality_rate: 0.0177968193","continent: Africa<br />location: Mozambique<br />total_cases_log: 11.112612<br />case_fatality_rate: 0.0113712674","continent: Africa<br />location: Namibia<br />total_cases_log: 10.680493<br />case_fatality_rate: 0.0116784294","continent: Africa<br />location: Niger<br />total_cases_log:  8.511577<br />case_fatality_rate: 0.0372083669","continent: Africa<br />location: Nigeria<br />total_cases_log: 11.998366<br />case_fatality_rate: 0.0125608503","continent: Africa<br />location: Rwanda<br />total_cases_log:  9.969743<br />case_fatality_rate: 0.0140851661","continent: Africa<br />location: Saint Helena<br />total_cases_log:  9.218209<br />case_fatality_rate: 0.0124223602","continent: Africa<br />location: Sao Tome and Principe<br />total_cases_log:  7.700748<br />case_fatality_rate: 0.0153846154","continent: Africa<br />location: Senegal<br />total_cases_log: 10.557270<br />case_fatality_rate: 0.0268878719","continent: Africa<br />location: Seychelles<br />total_cases_log:  8.293049<br />case_fatality_rate: 0.0050050050","continent: Africa<br />location: Sierra Leone<br />total_cases_log:  8.284504<br />case_fatality_rate: 0.0199394245","continent: Africa<br />location: Somalia<br />total_cases_log:  9.290814<br />case_fatality_rate: 0.0450267577","continent: Africa<br />location: South Africa<br />total_cases_log: 14.250189<br />case_fatality_rate: 0.0340881573","continent: Africa<br />location: South Sudan<br />total_cases_log:  9.218209<br />case_fatality_rate: 0.0107153487","continent: Africa<br />location: Sudan<br />total_cases_log: 10.354786<br />case_fatality_rate: 0.0645715923","continent: Africa<br />location: Tanzania<br />total_cases_log:  6.232448<br />case_fatality_rate: 0.0412573674","continent: Africa<br />location: Togo<br />total_cases_log:  9.177404<br />case_fatality_rate: 0.0110582885","continent: Africa<br />location: Tunisia<br />total_cases_log: 12.428027<br />case_fatality_rate: 0.0348614154","continent: Africa<br />location: Uganda<br />total_cases_log: 10.615628<br />case_fatality_rate: 0.0082174308","continent: Africa<br />location: Zambia<br />total_cases_log: 11.380342<br />case_fatality_rate: 0.0136784536","continent: Africa<br />location: Zimbabwe<br />total_cases_log: 10.513742<br />case_fatality_rate: 0.0412569939"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":0.4,"size":[7.07801132512661,6.63513328666886,5.51382067981188,4.5432537991088,6.05686395684896,5.49711481584635,6.34590310336516,4.15067366516746,4.87412637121432,5.79827385815386,4.24381271672184,4.94954146592755,6.33778902519203,8.49349825506525,4.27444120323319,8.81844806363929,4.3693613620003,4.71746606378613,4.31586314452319,9.12033611390672,4.52252188253101,4.5537465598336,6.55613157781705,5.58459548470496,4.47816432537042,7.43211309050493,4.50845055730275,4.89965955303724,5.08516281867835,6.40067540515613,5.95812096241708,6.02104011130381,4.85351995573069,4.34108475000205,6.80573670358511,6.56427328820023,4.57340671451977,6.23021743054811,10.9312103276133,5.57214142618625,3.81566054193053,4.01228682584384,5.81772663928174,3.93508820288308,5.18630617326913,5.76527162628064,7.61558054336043,5.44600751031973,7.07794460291272,7.62931743034397,5.21266953252651,5.4918946653393,7.14834425077877,5.91521809614855,5.69982607340463],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[10.9382721784581,12.1523553630242,12.4465451789662,11.8552235554442,13.2909341574572,6.7696419768525,5.32787616878958,7.67182679787878,11.5294187006973,12.5423162845964,12.3334891301548,16.2980497408461,14.2156294002275,14.4290315690866,13.6257497987933,13.6308458581536,13.0531483383829,13.2744542229431,12.5803635139467,12.3334891301548,11.3844782687449,3.89182029811063,13.035362182181,12.0846674327035,12.7385873514111,10.0606194982564,8.80881748310064,11.8662337480608,12.5308698505709,11.9436553796581,13.3917658921004,12.3662678773324,13.4764537843027,12.0846674327035,12.8682295497783,11.006888357936,11.5303428970073,11.4277923229924,9.81771177551472,6.92755790627832,9.49612063713837,10.2631530203974,6.17378610390194,14.9721134141364,13.0237997107468,11.3162534308618,7.8578675593318,8.28626945278307],"y":[0.0438621424764612,0.0182019626464071,0.0136179580925424,0.00364300018463549,0.0149863299797569,0.00114810562571757,0.0145631067961165,0.00372612948299953,0.0476181108171114,0.013381630086877,0.00364300018463549,0.0134945768427074,0.0270535830380924,0.0337361113592716,0.0171394306038636,0.0074153548966,0.0193350094199497,0.0111177342634759,0.0110732069658037,0.00562994656172693,0.0169990676096696,0.0111177342634759,0.0132173199691058,0.00325998909658352,0.00367247726352006,0.00282015126265863,0.000747049155834454,0.0225176819289632,0.0109376693766938,0.0107255684551281,0.0217158500498785,0.0108925315657641,0.0184702754750562,0.00160329692042792,0.0171302289359815,0.000497611464968153,0.0169226687107521,0.00607585012903015,0.0668446284593593,0.00980392156862745,0.00676284941388638,0.00324528038524619,0.0111177342634759,0.00972692085690515,0.00325998909658352,0.0076084045479999,0.0135344160866203,0.209624590576972],"text":["continent: Asia<br />location: Afghanistan<br />total_cases_log: 10.938272<br />case_fatality_rate: 0.0438621425","continent: Asia<br />location: Armenia<br />total_cases_log: 12.152355<br />case_fatality_rate: 0.0182019626","continent: Asia<br />location: Azerbaijan<br />total_cases_log: 12.446545<br />case_fatality_rate: 0.0136179581","continent: Asia<br />location: Bahrain<br />total_cases_log: 11.855224<br />case_fatality_rate: 0.0036430002","continent: Asia<br />location: Bangladesh<br />total_cases_log: 13.290934<br />case_fatality_rate: 0.0149863300","continent: Asia<br />location: Bhutan<br />total_cases_log:  6.769642<br />case_fatality_rate: 0.0011481056","continent: Asia<br />location: Brunei<br />total_cases_log:  5.327876<br />case_fatality_rate: 0.0145631068","continent: Asia<br />location: Cambodia<br />total_cases_log:  7.671827<br />case_fatality_rate: 0.0037261295","continent: Asia<br />location: China<br />total_cases_log: 11.529419<br />case_fatality_rate: 0.0476181108","continent: Asia<br />location: Georgia<br />total_cases_log: 12.542316<br />case_fatality_rate: 0.0133816301","continent: Asia<br />location: Hong Kong<br />total_cases_log: 12.333489<br />case_fatality_rate: 0.0036430002","continent: Asia<br />location: India<br />total_cases_log: 16.298050<br />case_fatality_rate: 0.0134945768","continent: Asia<br />location: Indonesia<br />total_cases_log: 14.215629<br />case_fatality_rate: 0.0270535830","continent: Asia<br />location: Iran<br />total_cases_log: 14.429032<br />case_fatality_rate: 0.0337361114","continent: Asia<br />location: Iraq<br />total_cases_log: 13.625750<br />case_fatality_rate: 0.0171394306","continent: Asia<br />location: Israel<br />total_cases_log: 13.630846<br />case_fatality_rate: 0.0074153549","continent: Asia<br />location: Japan<br />total_cases_log: 13.053148<br />case_fatality_rate: 0.0193350094","continent: Asia<br />location: Jordan<br />total_cases_log: 13.274454<br />case_fatality_rate: 0.0111177343","continent: Asia<br />location: Kazakhstan<br />total_cases_log: 12.580364<br />case_fatality_rate: 0.0110732070","continent: Asia<br />location: Kuwait<br />total_cases_log: 12.333489<br />case_fatality_rate: 0.0056299466","continent: Asia<br />location: Kyrgyzstan<br />total_cases_log: 11.384478<br />case_fatality_rate: 0.0169990676","continent: Asia<br />location: Laos<br />total_cases_log:  3.891820<br />case_fatality_rate: 0.0111177343","continent: Asia<br />location: Lebanon<br />total_cases_log: 13.035362<br />case_fatality_rate: 0.0132173200","continent: Asia<br />location: Macao<br />total_cases_log: 12.084667<br />case_fatality_rate: 0.0032599891","continent: Asia<br />location: Malaysia<br />total_cases_log: 12.738587<br />case_fatality_rate: 0.0036724773","continent: Asia<br />location: Maldives<br />total_cases_log: 10.060619<br />case_fatality_rate: 0.0028201513","continent: Asia<br />location: Mongolia<br />total_cases_log:  8.808817<br />case_fatality_rate: 0.0007470492","continent: Asia<br />location: Myanmar<br />total_cases_log: 11.866234<br />case_fatality_rate: 0.0225176819","continent: Asia<br />location: Nepal<br />total_cases_log: 12.530870<br />case_fatality_rate: 0.0109376694","continent: Asia<br />location: Oman<br />total_cases_log: 11.943655<br />case_fatality_rate: 0.0107255685","continent: Asia<br />location: Pakistan<br />total_cases_log: 13.391766<br />case_fatality_rate: 0.0217158500","continent: Asia<br />location: Palestine<br />total_cases_log: 12.366268<br />case_fatality_rate: 0.0108925316","continent: Asia<br />location: Philippines<br />total_cases_log: 13.476454<br />case_fatality_rate: 0.0184702755","continent: Asia<br />location: Qatar<br />total_cases_log: 12.084667<br />case_fatality_rate: 0.0016032969","continent: Asia<br />location: Saudi Arabia<br />total_cases_log: 12.868230<br />case_fatality_rate: 0.0171302289","continent: Asia<br />location: Singapore<br />total_cases_log: 11.006888<br />case_fatality_rate: 0.0004976115","continent: Asia<br />location: South Korea<br />total_cases_log: 11.530343<br />case_fatality_rate: 0.0169226687","continent: Asia<br />location: Sri Lanka<br />total_cases_log: 11.427792<br />case_fatality_rate: 0.0060758501","continent: Asia<br />location: Syria<br />total_cases_log:  9.817712<br />case_fatality_rate: 0.0668446285","continent: Asia<br />location: Taiwan<br />total_cases_log:  6.927558<br />case_fatality_rate: 0.0098039216","continent: Asia<br />location: Tajikistan<br />total_cases_log:  9.496121<br />case_fatality_rate: 0.0067628494","continent: Asia<br />location: Thailand<br />total_cases_log: 10.263153<br />case_fatality_rate: 0.0032452804","continent: Asia<br />location: Timor<br />total_cases_log:  6.173786<br />case_fatality_rate: 0.0111177343","continent: Asia<br />location: Turkey<br />total_cases_log: 14.972113<br />case_fatality_rate: 0.0097269209","continent: Asia<br />location: United Arab Emirates<br />total_cases_log: 13.023800<br />case_fatality_rate: 0.0032599891","continent: Asia<br />location: Uzbekistan<br />total_cases_log: 11.316253<br />case_fatality_rate: 0.0076084045","continent: Asia<br />location: Vietnam<br />total_cases_log:  7.857868<br />case_fatality_rate: 0.0135344161","continent: Asia<br />location: Yemen<br />total_cases_log:  8.286269<br />case_fatality_rate: 0.2096245906"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(183,159,0,1)","opacity":0.4,"size":[6.88735450997278,4.63686556281505,5.36556113162774,4.42913605677999,10.1718714073081,4.21684831635912,4.10868756427674,5.81620689921915,22.6771653543307,4.77430492674755,5.14332027828177,22.2836502459282,12.0175917126267,8.34460056199348,6.9385926337155,5.24492424640618,9.38138240997443,5.37055656788136,5.93791175321987,4.80879875767793,5.05175511744858,5.12302653706471,5.08079943701085,4.1806661394092,6.61331627809765,4.145474296381,4.68130344375443,7.4537352800639,6.46823376828428,4.90506733086469,11.1827008814197,4.90449337188419,8.99381043856724,4.62489119316727,6.71852684245567,4.98425562546501,7.34611737590577,6.08447742157463,5.8632771693443,6.21040181442426,5.31779016303469,7.94106225109912,4.35130316779772,8.3539967459608,5.34598124459764,6.66120790112704,8.69391167341212,6.49984619769143],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(183,159,0,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[11.7251374842108,9.37661723160128,13.1877502885573,12.6686456106448,13.6717129331664,11.9955491255721,12.7000674218847,12.4908793380364,10.6988528164814,14.228296139239,12.3359642973271,11.539937337217,9.29081375612606,11.2324837841739,15.33484081397,14.8390130908096,9.29081375612606,12.439522899833,13.3451532661873,8.72631895096224,12.3628071273215,9.29081375612606,15.0718252117517,7.72046169459972,11.3406176033585,11.5200599538708,7.88193748927207,12.2711438372736,11.0098199642194,10.2684084053287,12.3267847206924,7.72046169459972,11.4045827291332,14.0496984949008,11.7458609187469,11.4346287321951,14.6137944791463,13.617110837441,13.7452801353124,15.3107373478581,8.43446354381724,13.2735674344854,12.7854490430723,12.2645302151017,14.9958023678416,13.5670722753226,13.2916284007557,14.3428740738085,15.28409110827,3.29583686600433],"y":[0.0178258021206558,0.00973833516809213,0.0172934471867003,0.00696090746809978,0.0264068549285676,0.0383874790164906,0.0385941361320438,0.0220834069822979,0.00564270398374901,0.0170599879154558,0.0105997602539727,0.00837080729622924,0.0124223602484472,0.0108147461777748,0.0207090399906854,0.0272788522867127,0.0124223602484472,0.0309830159547092,0.0316143788443594,0.00470550056790524,0.0198899703766399,0.0124223602484472,0.0306441111098141,0.0124223602484472,0.0215154683267595,0.0185869176694865,0.0211400528501321,0.0165802283470838,0.0122054080873232,0.0133643432379894,0.0212044668971018,0.0124223602484472,0.0138300717692685,0.0131278078175019,0.0288520953814466,0.00709426943083628,0.0232940620463829,0.0205196806992813,0.0246701545518618,0.0214763511725991,0.0182489680643059,0.00885634360756305,0.026404470776083,0.0189162422184493,0.0230422532442239,0.0171816547823255,0.017390584870073,0.0196894702084854,0.0291989576027627,0.0124223602484472],"text":["continent: Europe<br />location: Albania<br />total_cases_log: 11.725137<br />case_fatality_rate: 0.0178258021","continent: Europe<br />location: Andorra<br />total_cases_log:  9.376617<br />case_fatality_rate: 0.0097383352","continent: Europe<br />location: Austria<br />total_cases_log: 13.187750<br />case_fatality_rate: 0.0172934472","continent: Europe<br />location: Belarus<br />total_cases_log: 12.668646<br />case_fatality_rate: 0.0069609075","continent: Europe<br />location: Belgium<br />total_cases_log: 13.671713<br />case_fatality_rate: 0.0264068549","continent: Europe<br />location: Bosnia and Herzegovina<br />total_cases_log: 11.995549<br />case_fatality_rate: 0.0383874790","continent: Europe<br />location: Bulgaria<br />total_cases_log: 12.700067<br />case_fatality_rate: 0.0385941361","continent: Europe<br />location: Croatia<br />total_cases_log: 12.490879<br />case_fatality_rate: 0.0220834070","continent: Europe<br />location: Cyprus<br />total_cases_log: 10.698853<br />case_fatality_rate: 0.0056427040","continent: Europe<br />location: Czechia<br />total_cases_log: 14.228296<br />case_fatality_rate: 0.0170599879","continent: Europe<br />location: Denmark<br />total_cases_log: 12.335964<br />case_fatality_rate: 0.0105997603","continent: Europe<br />location: Estonia<br />total_cases_log: 11.539937<br />case_fatality_rate: 0.0083708073","continent: Europe<br />location: Faeroe Islands<br />total_cases_log:  9.290814<br />case_fatality_rate: 0.0124223602","continent: Europe<br />location: Finland<br />total_cases_log: 11.232484<br />case_fatality_rate: 0.0108147462","continent: Europe<br />location: France<br />total_cases_log: 15.334841<br />case_fatality_rate: 0.0207090400","continent: Europe<br />location: Germany<br />total_cases_log: 14.839013<br />case_fatality_rate: 0.0272788523","continent: Europe<br />location: Gibraltar<br />total_cases_log:  9.290814<br />case_fatality_rate: 0.0124223602","continent: Europe<br />location: Greece<br />total_cases_log: 12.439523<br />case_fatality_rate: 0.0309830160","continent: Europe<br />location: Hungary<br />total_cases_log: 13.345153<br />case_fatality_rate: 0.0316143788","continent: Europe<br />location: Iceland<br />total_cases_log:  8.726319<br />case_fatality_rate: 0.0047055006","continent: Europe<br />location: Ireland<br />total_cases_log: 12.362807<br />case_fatality_rate: 0.0198899704","continent: Europe<br />location: Isle of Man<br />total_cases_log:  9.290814<br />case_fatality_rate: 0.0124223602","continent: Europe<br />location: Italy<br />total_cases_log: 15.071825<br />case_fatality_rate: 0.0306441111","continent: Europe<br />location: Jersey<br />total_cases_log:  7.720462<br />case_fatality_rate: 0.0124223602","continent: Europe<br />location: Kosovo<br />total_cases_log: 11.340618<br />case_fatality_rate: 0.0215154683","continent: Europe<br />location: Latvia<br />total_cases_log: 11.520060<br />case_fatality_rate: 0.0185869177","continent: Europe<br />location: Liechtenstein<br />total_cases_log:  7.881937<br />case_fatality_rate: 0.0211400529","continent: Europe<br />location: Lithuania<br />total_cases_log: 12.271144<br />case_fatality_rate: 0.0165802283","continent: Europe<br />location: Luxembourg<br />total_cases_log: 11.009820<br />case_fatality_rate: 0.0122054081","continent: Europe<br />location: Malta<br />total_cases_log: 10.268408<br />case_fatality_rate: 0.0133643432","continent: Europe<br />location: Moldova<br />total_cases_log: 12.326785<br />case_fatality_rate: 0.0212044669","continent: Europe<br />location: Monaco<br />total_cases_log:  7.720462<br />case_fatality_rate: 0.0124223602","continent: Europe<br />location: Montenegro<br />total_cases_log: 11.404583<br />case_fatality_rate: 0.0138300718","continent: Europe<br />location: Netherlands<br />total_cases_log: 14.049698<br />case_fatality_rate: 0.0131278078","continent: Europe<br />location: North Macedonia<br />total_cases_log: 11.745861<br />case_fatality_rate: 0.0288520954","continent: Europe<br />location: Norway<br />total_cases_log: 11.434629<br />case_fatality_rate: 0.0070942694","continent: Europe<br />location: Poland<br />total_cases_log: 14.613794<br />case_fatality_rate: 0.0232940620","continent: Europe<br />location: Portugal<br />total_cases_log: 13.617111<br />case_fatality_rate: 0.0205196807","continent: Europe<br />location: Romania<br />total_cases_log: 13.745280<br />case_fatality_rate: 0.0246701546","continent: Europe<br />location: Russia<br />total_cases_log: 15.310737<br />case_fatality_rate: 0.0214763512","continent: Europe<br />location: San Marino<br />total_cases_log:  8.434464<br />case_fatality_rate: 0.0182489681","continent: Europe<br />location: Serbia<br />total_cases_log: 13.273567<br />case_fatality_rate: 0.0088563436","continent: Europe<br />location: Slovakia<br />total_cases_log: 12.785449<br />case_fatality_rate: 0.0264044708","continent: Europe<br />location: Slovenia<br />total_cases_log: 12.264530<br />case_fatality_rate: 0.0189162422","continent: Europe<br />location: Spain<br />total_cases_log: 14.995802<br />case_fatality_rate: 0.0230422532","continent: Europe<br />location: Sweden<br />total_cases_log: 13.567072<br />case_fatality_rate: 0.0171816548","continent: Europe<br />location: Switzerland<br />total_cases_log: 13.291628<br />case_fatality_rate: 0.0173905849","continent: Europe<br />location: Ukraine<br />total_cases_log: 14.342874<br />case_fatality_rate: 0.0196894702","continent: Europe<br />location: United Kingdom<br />total_cases_log: 15.284091<br />case_fatality_rate: 0.0291989576","continent: Europe<br />location: Vatican<br />total_cases_log:  3.295837<br />case_fatality_rate: 0.0124223602"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","opacity":0.4,"size":[4.62441264707907,3.91725934528901,5.27433242490765,5.31065063832068,5.47522263268834,4.68165046963804,5.09247373249521,4.78867902228964,4.24549412239739,5.40952184834044,4.97825362567935,4.35305728917301,3.88872242081637,4.95193808482924,7.89151117485761,8.33891710728905,3.86985246247264,5.38761282993713,5.32765474964214,4.07016350176016,4.88630267248014,3.92408609687041,7.6526936817906,3.93725269365125,4.47188126396409,4.46348540915922,3.87576537404066,4.6012613126787,4.17337353819581,4.11021271476097,4.77987483988156,3.87718196356388,4.17403006559142,5.84138476900358,4.49836104772134,4.93922682875694,6.84386942996267,5.37005488333806,5.96424679354674,9.79688925683694,3.87019107494667,5.07881053447547,4.94332751733134,4.49759298736785,7.18547278067706,5.36243670944712,5.24484610434436,7.07359722787428,7.8836086030963,3.77952755905512],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,186,56,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[7.72046169459972,7.02286808608264,9.09773142759353,8.19118600464279,9.42666069794227,8.98143022576764,13.7807969525242,8.98143022576764,12.2792208715606,11.1786268642899,5.08140436498446,12.4355242591188,11.0629754119225,5.04342511691925,12.1707045016924,9.45218790808416,12.1389441065235,10.5386612813206,14.6152243265842,8.79920924224139,12.7756302777198,3.78418963391826,8.34069464792507,7.45182223652793,8.98143022576764,9.37661723160128,17.2239709334489],"y":[0.0124223602484472,0.0249554367201426,0.0210408505875769,0.0113604876697146,0.0255336286749899,0.0210408505875769,0.0236364276381587,0.0210408505875769,0.0136212809859744,0.00578341528833259,0.0255336286749899,0.0131249453458515,0.0313333124235486,0.00645161290322581,0.0351929551929552,0.0197079145728643,0.0243670293826698,0.0149945691048295,0.0905337938176209,0.0267008598581988,0.0172278689776717,0.0178526527533317,0.0138391791935099,0.00580383052814858,0.0178526527533317,0.0211400528501321,0.0181618768759711],"text":["continent: North America<br />location: Anguilla<br />total_cases_log:  7.720462<br />case_fatality_rate: 0.0124223602","continent: North America<br />location: Antigua and Barbuda<br />total_cases_log:  7.022868<br />case_fatality_rate: 0.0249554367","continent: North America<br />location: Bahamas<br />total_cases_log:  9.097731<br />case_fatality_rate: 0.0210408506","continent: North America<br />location: Barbados<br />total_cases_log:  8.191186<br />case_fatality_rate: 0.0113604877","continent: North America<br />location: Belize<br />total_cases_log:  9.426661<br />case_fatality_rate: 0.0255336287","continent: North America<br />location: Bermuda<br />total_cases_log:  8.981430<br />case_fatality_rate: 0.0210408506","continent: North America<br />location: Canada<br />total_cases_log: 13.780797<br />case_fatality_rate: 0.0236364276","continent: North America<br />location: Cayman Islands<br />total_cases_log:  8.981430<br />case_fatality_rate: 0.0210408506","continent: North America<br />location: Costa Rica<br />total_cases_log: 12.279221<br />case_fatality_rate: 0.0136212810","continent: North America<br />location: Cuba<br />total_cases_log: 11.178627<br />case_fatality_rate: 0.0057834153","continent: North America<br />location: Dominica<br />total_cases_log:  5.081404<br />case_fatality_rate: 0.0255336287","continent: North America<br />location: Dominican Republic<br />total_cases_log: 12.435524<br />case_fatality_rate: 0.0131249453","continent: North America<br />location: El Salvador<br />total_cases_log: 11.062975<br />case_fatality_rate: 0.0313333124","continent: North America<br />location: Grenada<br />total_cases_log:  5.043425<br />case_fatality_rate: 0.0064516129","continent: North America<br />location: Guatemala<br />total_cases_log: 12.170705<br />case_fatality_rate: 0.0351929552","continent: North America<br />location: Haiti<br />total_cases_log:  9.452188<br />case_fatality_rate: 0.0197079146","continent: North America<br />location: Honduras<br />total_cases_log: 12.138944<br />case_fatality_rate: 0.0243670294","continent: North America<br />location: Jamaica<br />total_cases_log: 10.538661<br />case_fatality_rate: 0.0149945691","continent: North America<br />location: Mexico<br />total_cases_log: 14.615224<br />case_fatality_rate: 0.0905337938","continent: North America<br />location: Nicaragua<br />total_cases_log:  8.799209<br />case_fatality_rate: 0.0267008599","continent: North America<br />location: Panama<br />total_cases_log: 12.775630<br />case_fatality_rate: 0.0172278690","continent: North America<br />location: Saint Kitts and Nevis<br />total_cases_log:  3.784190<br />case_fatality_rate: 0.0178526528","continent: North America<br />location: Saint Lucia<br />total_cases_log:  8.340695<br />case_fatality_rate: 0.0138391792","continent: North America<br />location: Saint Vincent and the Grenadines<br />total_cases_log:  7.451822<br />case_fatality_rate: 0.0058038305","continent: North America<br />location: Trinidad and Tobago<br />total_cases_log:  8.981430<br />case_fatality_rate: 0.0178526528","continent: North America<br />location: Turks and Caicos Islands<br />total_cases_log:  9.376617<br />case_fatality_rate: 0.0211400529","continent: North America<br />location: United States<br />total_cases_log: 17.223971<br />case_fatality_rate: 0.0181618769"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,196,1)","opacity":0.4,"size":[3.83887001208834,3.93475928790502,4.0915705798688,4.04617516767648,4.09330433184474,3.90301955314011,6.8396379756172,3.90643513339366,4.90368783614799,5.45587089258957,3.91242404163418,5.42006110459172,5.04804519383528,3.94601229409124,5.88783463482264,5.46147978241935,5.3471060730183,4.63656554294842,9.43551789581697,5.06150444730902,4.81411308910996,3.89353247451858,3.99250825688246,3.94483674463719,4.368626017523,3.87651143966548,12.8419352525742],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,191,196,1)"}},"hoveron":"points","name":"North America","legendgroup":"North America","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[10.2839424976401,4.20469261939097,1.38629436111989,0,7.81681996576455,8.44677072711969,1.09861228866811,2.89037175789616,1.09861228866811],"y":[0.0310673638880345,0.0298507462686567,0.0153846153846154,0.0153846153846154,0.0104754230459307,0.00836909871244635,0.0104754230459307,0.0104754230459307,0.0104754230459307],"text":["continent: Oceania<br />location: Australia<br />total_cases_log: 10.283942<br />case_fatality_rate: 0.0310673639","continent: Oceania<br />location: Fiji<br />total_cases_log:  4.204693<br />case_fatality_rate: 0.0298507463","continent: Oceania<br />location: Marshall Islands<br />total_cases_log:  1.386294<br />case_fatality_rate: 0.0153846154","continent: Oceania<br />location: Micronesia (country)<br />total_cases_log:  0.000000<br />case_fatality_rate: 0.0153846154","continent: Oceania<br />location: New Zealand<br />total_cases_log:  7.816820<br />case_fatality_rate: 0.0104754230","continent: Oceania<br />location: Papua New Guinea<br />total_cases_log:  8.446771<br />case_fatality_rate: 0.0083690987","continent: Oceania<br />location: Samoa<br />total_cases_log:  1.098612<br />case_fatality_rate: 0.0104754230","continent: Oceania<br />location: Solomon Islands<br />total_cases_log:  2.890372<br />case_fatality_rate: 0.0104754230","continent: Oceania<br />location: Vanuatu<br />total_cases_log:  1.098612<br />case_fatality_rate: 0.0104754230"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","opacity":0.4,"size":[6.2948321354234,4.25093227374482,3.89988668788819,3.94786637250358,4.8732724970146,5.26939672355823,4.00095067723417,4.19211147300379,4.055223870826],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(97,156,255,1)"}},"hoveron":"points","name":"Oceania","legendgroup":"Oceania","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[14.6490234116608,12.5035887054338,16.3404678648683,13.7849616557355,14.6807568066001,12.6844752791818,9.21751457572418,12.2385253147491,14.2348608196046,9.11548009095222,11.4645542130448,11.9554486931017],"y":[0.024058514227712,0.0451723344052402,0.0248631704989815,0.0233557030372827,0.0264313175121475,0.0516859364299239,0.0223391580619539,0.019375886387508,0.0336876460002906,0.0194612424409016,0.00945653771069922,0.00998952866127468],"text":["continent: South America<br />location: Argentina<br />total_cases_log: 14.649023<br />case_fatality_rate: 0.0240585142","continent: South America<br />location: Bolivia<br />total_cases_log: 12.503589<br />case_fatality_rate: 0.0451723344","continent: South America<br />location: Brazil<br />total_cases_log: 16.340468<br />case_fatality_rate: 0.0248631705","continent: South America<br />location: Chile<br />total_cases_log: 13.784962<br />case_fatality_rate: 0.0233557030","continent: South America<br />location: Colombia<br />total_cases_log: 14.680757<br />case_fatality_rate: 0.0264313175","continent: South America<br />location: Ecuador<br />total_cases_log: 12.684475<br />case_fatality_rate: 0.0516859364","continent: South America<br />location: Guyana<br />total_cases_log:  9.217515<br />case_fatality_rate: 0.0223391581","continent: South America<br />location: Paraguay<br />total_cases_log: 12.238525<br />case_fatality_rate: 0.0193758864","continent: South America<br />location: Peru<br />total_cases_log: 14.234861<br />case_fatality_rate: 0.0336876460","continent: South America<br />location: Suriname<br />total_cases_log:  9.115480<br />case_fatality_rate: 0.0194612424","continent: South America<br />location: Uruguay<br />total_cases_log: 11.464554<br />case_fatality_rate: 0.0094565377","continent: South America<br />location: Venezuela<br />total_cases_log: 11.955449<br />case_fatality_rate: 0.0099895287"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(245,100,227,1)","opacity":0.4,"size":[7.12820591397582,5.48131426093833,11.041719677845,5.95733806477112,7.33265512700631,5.87173812807369,4.22106810287099,5.10975396842862,6.63971632628835,4.16077974633916,4.70780042935732,6.43569857239817],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(245,100,227,1)"}},"hoveron":"points","name":"South America","legendgroup":"South America","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],"y":[-0.186899515072338,-0.129164876173499,-0.103587481806828,-0.0883403214987723,-0.0779351505804279,-0.0702543724970168,-0.0642848752437008,-0.0594730020493524,-0.0554872569742502,-0.052115435133586,-0.0492145578749382,-0.046684304866017,-0.0444519319402636,-0.0424632328779228,-0.0406768766353468,-0.0390607247119892,-0.0375893591580897],"text":["number.seq:  1<br />number.ll95: -0.18689952<br />total_cases_log:  1<br />case_fatality_rate: -0.18689952","number.seq:  2<br />number.ll95: -0.12916488<br />total_cases_log:  2<br />case_fatality_rate: -0.12916488","number.seq:  3<br />number.ll95: -0.10358748<br />total_cases_log:  3<br />case_fatality_rate: -0.10358748","number.seq:  4<br />number.ll95: -0.08834032<br />total_cases_log:  4<br />case_fatality_rate: -0.08834032","number.seq:  5<br />number.ll95: -0.07793515<br />total_cases_log:  5<br />case_fatality_rate: -0.07793515","number.seq:  6<br />number.ll95: -0.07025437<br />total_cases_log:  6<br />case_fatality_rate: -0.07025437","number.seq:  7<br />number.ll95: -0.06428488<br />total_cases_log:  7<br />case_fatality_rate: -0.06428488","number.seq:  8<br />number.ll95: -0.05947300<br />total_cases_log:  8<br />case_fatality_rate: -0.05947300","number.seq:  9<br />number.ll95: -0.05548726<br />total_cases_log:  9<br />case_fatality_rate: -0.05548726","number.seq: 10<br />number.ll95: -0.05211544<br />total_cases_log: 10<br />case_fatality_rate: -0.05211544","number.seq: 11<br />number.ll95: -0.04921456<br />total_cases_log: 11<br />case_fatality_rate: -0.04921456","number.seq: 12<br />number.ll95: -0.04668430<br />total_cases_log: 12<br />case_fatality_rate: -0.04668430","number.seq: 13<br />number.ll95: -0.04445193<br />total_cases_log: 13<br />case_fatality_rate: -0.04445193","number.seq: 14<br />number.ll95: -0.04246323<br />total_cases_log: 14<br />case_fatality_rate: -0.04246323","number.seq: 15<br />number.ll95: -0.04067688<br />total_cases_log: 15<br />case_fatality_rate: -0.04067688","number.seq: 16<br />number.ll95: -0.03906072<br />total_cases_log: 16<br />case_fatality_rate: -0.03906072","number.seq: 17<br />number.ll95: -0.03758936<br />total_cases_log: 17<br />case_fatality_rate: -0.03758936"],"type":"scatter","mode":"lines","line":{"width":1.51181102362205,"color":"rgba(102,102,102,1)","dash":"dash"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],"y":[0.207337259221926,0.149602620323086,0.124025225956416,0.10877806564836,0.0983728947300156,0.0906921166466046,0.0847226193932886,0.0799107461989401,0.075925001123838,0.0725531792831737,0.0696523020245259,0.0671220490156047,0.0648896760898514,0.0629009770275105,0.0611146207849345,0.059498468861577,0.0580271033076775],"text":["number.seq:  1<br />number.ul95: 0.20733726<br />total_cases_log:  1<br />case_fatality_rate: 0.20733726","number.seq:  2<br />number.ul95: 0.14960262<br />total_cases_log:  2<br />case_fatality_rate: 0.14960262","number.seq:  3<br />number.ul95: 0.12402523<br />total_cases_log:  3<br />case_fatality_rate: 0.12402523","number.seq:  4<br />number.ul95: 0.10877807<br />total_cases_log:  4<br />case_fatality_rate: 0.10877807","number.seq:  5<br />number.ul95: 0.09837289<br />total_cases_log:  5<br />case_fatality_rate: 0.09837289","number.seq:  6<br />number.ul95: 0.09069212<br />total_cases_log:  6<br />case_fatality_rate: 0.09069212","number.seq:  7<br />number.ul95: 0.08472262<br />total_cases_log:  7<br />case_fatality_rate: 0.08472262","number.seq:  8<br />number.ul95: 0.07991075<br />total_cases_log:  8<br />case_fatality_rate: 0.07991075","number.seq:  9<br />number.ul95: 0.07592500<br />total_cases_log:  9<br />case_fatality_rate: 0.07592500","number.seq: 10<br />number.ul95: 0.07255318<br />total_cases_log: 10<br />case_fatality_rate: 0.07255318","number.seq: 11<br />number.ul95: 0.06965230<br />total_cases_log: 11<br />case_fatality_rate: 0.06965230","number.seq: 12<br />number.ul95: 0.06712205<br />total_cases_log: 12<br />case_fatality_rate: 0.06712205","number.seq: 13<br />number.ul95: 0.06488968<br />total_cases_log: 13<br />case_fatality_rate: 0.06488968","number.seq: 14<br />number.ul95: 0.06290098<br />total_cases_log: 14<br />case_fatality_rate: 0.06290098","number.seq: 15<br />number.ul95: 0.06111462<br />total_cases_log: 15<br />case_fatality_rate: 0.06111462","number.seq: 16<br />number.ul95: 0.05949847<br />total_cases_log: 16<br />case_fatality_rate: 0.05949847","number.seq: 17<br />number.ul95: 0.05802710<br />total_cases_log: 17<br />case_fatality_rate: 0.05802710"],"type":"scatter","mode":"lines","line":{"width":1.51181102362205,"color":"rgba(102,102,102,1)","dash":"dash"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],"y":[-0.320658420636464,-0.223746705341983,-0.180813221940785,-0.155219774280835,-0.1377539516679,-0.124861217027888,-0.114840989495537,-0.106763916633594,-0.100073558828959,-0.0944137150249866,-0.0895443853408278,-0.0852971749329958,-0.0815499775219098,-0.0782118040958377,-0.0752132775457994,-0.0725004511030206,-0.0700306589232608],"text":["number.seq:  1<br />number.ll999: -0.32065842<br />total_cases_log:  1<br />case_fatality_rate: -0.32065842","number.seq:  2<br />number.ll999: -0.22374671<br />total_cases_log:  2<br />case_fatality_rate: -0.22374671","number.seq:  3<br />number.ll999: -0.18081322<br />total_cases_log:  3<br />case_fatality_rate: -0.18081322","number.seq:  4<br />number.ll999: -0.15521977<br />total_cases_log:  4<br />case_fatality_rate: -0.15521977","number.seq:  5<br />number.ll999: -0.13775395<br />total_cases_log:  5<br />case_fatality_rate: -0.13775395","number.seq:  6<br />number.ll999: -0.12486122<br />total_cases_log:  6<br />case_fatality_rate: -0.12486122","number.seq:  7<br />number.ll999: -0.11484099<br />total_cases_log:  7<br />case_fatality_rate: -0.11484099","number.seq:  8<br />number.ll999: -0.10676392<br />total_cases_log:  8<br />case_fatality_rate: -0.10676392","number.seq:  9<br />number.ll999: -0.10007356<br />total_cases_log:  9<br />case_fatality_rate: -0.10007356","number.seq: 10<br />number.ll999: -0.09441372<br />total_cases_log: 10<br />case_fatality_rate: -0.09441372","number.seq: 11<br />number.ll999: -0.08954439<br />total_cases_log: 11<br />case_fatality_rate: -0.08954439","number.seq: 12<br />number.ll999: -0.08529717<br />total_cases_log: 12<br />case_fatality_rate: -0.08529717","number.seq: 13<br />number.ll999: -0.08154998<br />total_cases_log: 13<br />case_fatality_rate: -0.08154998","number.seq: 14<br />number.ll999: -0.07821180<br />total_cases_log: 14<br />case_fatality_rate: -0.07821180","number.seq: 15<br />number.ll999: -0.07521328<br />total_cases_log: 15<br />case_fatality_rate: -0.07521328","number.seq: 16<br />number.ll999: -0.07250045<br />total_cases_log: 16<br />case_fatality_rate: -0.07250045","number.seq: 17<br />number.ll999: -0.07003066<br />total_cases_log: 17<br />case_fatality_rate: -0.07003066"],"type":"scatter","mode":"lines","line":{"width":1.51181102362205,"color":"rgba(102,102,102,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],"y":[0.341096164786052,0.244184449491571,0.201250966090373,0.175657518430423,0.158191695817488,0.145298961177476,0.135278733645124,0.127201660783182,0.120511302978547,0.114851459174574,0.109982129490416,0.105734919082584,0.101987721671498,0.0986495482454254,0.0956510216953871,0.0929381952526084,0.0904684030728485],"text":["number.seq:  1<br />number.ul999: 0.34109616<br />total_cases_log:  1<br />case_fatality_rate: 0.34109616","number.seq:  2<br />number.ul999: 0.24418445<br />total_cases_log:  2<br />case_fatality_rate: 0.24418445","number.seq:  3<br />number.ul999: 0.20125097<br />total_cases_log:  3<br />case_fatality_rate: 0.20125097","number.seq:  4<br />number.ul999: 0.17565752<br />total_cases_log:  4<br />case_fatality_rate: 0.17565752","number.seq:  5<br />number.ul999: 0.15819170<br />total_cases_log:  5<br />case_fatality_rate: 0.15819170","number.seq:  6<br />number.ul999: 0.14529896<br />total_cases_log:  6<br />case_fatality_rate: 0.14529896","number.seq:  7<br />number.ul999: 0.13527873<br />total_cases_log:  7<br />case_fatality_rate: 0.13527873","number.seq:  8<br />number.ul999: 0.12720166<br />total_cases_log:  8<br />case_fatality_rate: 0.12720166","number.seq:  9<br />number.ul999: 0.12051130<br />total_cases_log:  9<br />case_fatality_rate: 0.12051130","number.seq: 10<br />number.ul999: 0.11485146<br />total_cases_log: 10<br />case_fatality_rate: 0.11485146","number.seq: 11<br />number.ul999: 0.10998213<br />total_cases_log: 11<br />case_fatality_rate: 0.10998213","number.seq: 12<br />number.ul999: 0.10573492<br />total_cases_log: 12<br />case_fatality_rate: 0.10573492","number.seq: 13<br />number.ul999: 0.10198772<br />total_cases_log: 13<br />case_fatality_rate: 0.10198772","number.seq: 14<br />number.ul999: 0.09864955<br />total_cases_log: 14<br />case_fatality_rate: 0.09864955","number.seq: 15<br />number.ul999: 0.09565102<br />total_cases_log: 15<br />case_fatality_rate: 0.09565102","number.seq: 16<br />number.ul999: 0.09293820<br />total_cases_log: 16<br />case_fatality_rate: 0.09293820","number.seq: 17<br />number.ul999: 0.09046840<br />total_cases_log: 17<br />case_fatality_rate: 0.09046840"],"type":"scatter","mode":"lines","line":{"width":1.51181102362205,"color":"rgba(102,102,102,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21],"y":[0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939,0.0102188720747939],"text":"","type":"scatter","mode":"lines","line":{"width":1.51181102362205,"color":"rgba(102,102,102,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0],"y":[-0.05],"text":"95%","hovertext":"x: 0<br />y: -0.05","textfont":{"size":11.3385826771654,"color":"rgba(102,102,102,1)"},"type":"scatter","mode":"text","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[20],"y":[-0.15],"text":"99%","hovertext":"x: 20<br />y: -0.15","textfont":{"size":11.3385826771654,"color":"rgba(102,102,102,1)"},"type":"scatter","mode":"text","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":45.4063926940639,"r":7.30593607305936,"b":41.8264840182648,"l":48.9497716894977},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Case Fatality Rate by Total Number of COVID-19 Cases","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-1,21],"tickmode":"array","ticktext":["0","5","10","15","20"],"tickvals":[0,5,10,15,20],"categoryorder":"array","categoryarray":["0","5","10","15","20"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"y","title":{"text":"Total Number of COVID-19 Cases - log ","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.35374614990759,0.374183894057178],"tickmode":"array","ticktext":["-0.2","0.0","0.2"],"tickvals":[-0.2,0,0.2],"categoryorder":"array","categoryarray":["-0.2","0.0","0.2"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"x","title":{"text":"Case Fatality Rate","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(179,179,179,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":0.959399606299213},"annotations":[{"text":"Continent","x":1.02,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"left","yanchor":"bottom","legendTitle":true}],"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"425846625e69":{"colour":{},"size":{},"label":{},"x":{},"y":{},"type":"scatter"},"425830a26ceb":{"x":{},"y":{},"x.1":{},"y.1":{}},"425852d77a":{"x":{},"y":{},"x.1":{},"y.1":{}},"42581d5ccd0":{"x":{},"y":{},"x.1":{},"y.1":{}},"425878ea384e":{"x":{},"y":{},"x.1":{},"y.1":{}},"42586eda5d2b":{"yintercept":{}},"4258522f2c64":{"x":{},"y":{}},"425811926305":{"x":{},"y":{}}},"cur_data":"425846625e69","visdat":{"425846625e69":["function (y) ","x"],"425830a26ceb":["function (y) ","x"],"425852d77a":["function (y) ","x"],"42581d5ccd0":["function (y) ","x"],"425878ea384e":["function (y) ","x"],"42586eda5d2b":["function (y) ","x"],"4258522f2c64":["function (y) ","x"],"425811926305":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<h3 id="evaluation-1">Evaluation</h3>
<h4 id="level-of-customisation-and-ease-of-use-1">Level of customisation and ease of use</h4>
<p>Both <em>FunnelPlotR</em> and <em>funnelR</em> packages are easy to use. There are limited arguments that can be passed into the functions for both packages, with <em>FunnelPlotR</em> offering slightly more customisation e.g. able to indicate control limits to be plotted. However, one key point to note for <em>FunnelPlotR</em> is that vectors have to be passed in the numerator, denominator and group arguments, and there is no argument to take in a dataframe. This means that there is limited customisation that can be done to the plot to make it more informative.</p>
<p>On the other hand, drawing from scratch with <em>ggplot</em> is relatively straightforward once the control limits are calculated, and offers the most customisation.</p>
<h4 id="clarity-and-aesthetic-1">Clarity and aesthetic</h4>
<p>The funnel plot from <em>FunnelPlotR</em> provides more information (and thus clarity) than that from <em>funnelR</em>. As mentioned earlier, the function from <em>funnelR</em> does not allow customisation to improve the clarity and aesthetics of the graph, which is the reason for not choosing it for the final product.</p>
<p>Between <em>FunnelPlotR</em> and <em>ggplot</em>, the former allows plotting of control limits based on the Poisson distribution, and the latter provides more information i.e. colour by continent and size by population numbers.</p>
<h4 id="interactivity-1">Interactivity</h4>
<p>Unlike the scatterplot, the interactive plot value-adds to the exploration analysis, and thus plays a crucial factor in the evaluation of the graphs. <em>FunnelPlotR</em> does not return a ggplot object, whereas both <em>funnelR</em> and <em>ggplot</em> returns a ggplot object. As such, the funnel plots from <em>funnelR</em> and <em>ggplot</em> can be made interactive after passing the ggplot object through <code>ggplotly()</code>.</p>
<p>Generally, the arguments in all three functions are straightforward to use and there are limited parameters in <em>FunnelPlotR</em> and <em>funnelR</em> that can be coded and passed as arguments into the functions.</p>
<h4 id="conclusion-1">Conclusion</h4>
<p>Although <em>FunnelPlotR</em> is relatively easy to use, the function does not allow for more customisation due to its limitation of only taking in vectors for the key variables. In addition, it cannot be rendered into an interactive graphic. As such, <code>ggplot()</code> is chosen to create the funnel plot in the final product.</p>
<h2 id="multivariate-analysis">Multivariate analysis</h2>
<p>The main analysis to explore in multivariate analysis is exploratory multiple linear regression (MLR). This assignment will explore the <em>olsrr</em> package in supporting and visualising MLR analysis.</p>
<p>There are two main parts to the <em>olsrr</em> package:</p>
<ol type="1">
<li>Model building
<ul>
<li>Least squares regression</li>
<li>Variable selection methods</li>
</ul></li>
<li>Model diagnostics
<ul>
<li>Model fit</li>
<li>Residual Diagnostics</li>
<li>Measure of influence</li>
<li>Heteroskedasticity</li>
<li>Collinearity</li>
</ul></li>
</ol>
<h3 id="model-building">Model Building</h3>
<p>MLR models can be built with two methods:</p>
<ol type="1">
<li><code>ols_regress()</code> based on least squares regression</li>
<li>base R <code>lm()</code> and pass the model into the variable selection method functions</li>
</ol>
<h4 id="least-squares-regression">Least squares regression</h4>
<p>The syntax to create the model using <code>ols_regress()</code> is simple. Users directly select the independent and dependent variables to include in the function call. There is an argument for users to indicate if there are interaction between variables in the model, in which the predictors will be scaled and centred before computing the standardised betas.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>model_lsr</span> <span class='op'>&lt;-</span> <span class='fu'>ols_regress</span><span class='op'>(</span><span class='va'>total_deaths</span> <span class='op'>~</span> <span class='va'>total_cases</span> <span class='op'>+</span> <span class='va'>positive_rate</span> <span class='op'>+</span> <span class='va'>hospital_beds_per_thousand</span>,
                      data <span class='op'>=</span> <span class='va'>covid_deaths_tidy</span>,
                      iterm <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='co'># if model includes interaction terms</span>

<span class='va'>model_lsr</span>
</code></pre>
</div>
<pre><code>                            Model Summary                             
---------------------------------------------------------------------
R                       0.958       RMSE                   14654.963 
R-Squared               0.917       Coef. Var                105.724 
Adj. R-Squared          0.916       MSE                214767943.202 
Pred R-Squared          0.894       MAE                     5102.140 
---------------------------------------------------------------------
 RMSE: Root Mean Square Error 
 MSE: Mean Square Error 
 MAE: Mean Absolute Error 

                                       ANOVA                                        
-----------------------------------------------------------------------------------
                        Sum of                                                     
                       Squares         DF         Mean Square       F         Sig. 
-----------------------------------------------------------------------------------
Regression    469789333573.923          3    156596444524.641    729.143    0.0000 
Residual       42309284810.803        197       214767943.202                      
Total         512098618384.726        200                                          
-----------------------------------------------------------------------------------

                                              Parameter Estimates                                                
----------------------------------------------------------------------------------------------------------------
                     model         Beta    Std. Error    Std. Beta      t        Sig         lower        upper 
----------------------------------------------------------------------------------------------------------------
               (Intercept)    -1526.443      2055.847                 -0.742    0.459    -5580.736     2527.850 
               total_cases        0.019         0.000        0.955    46.565    0.000        0.018        0.020 
             positive_rate    34307.250     13113.303        0.054     2.616    0.010     8446.779    60167.720 
hospital_beds_per_thousand       50.805       448.768        0.002     0.113    0.910     -834.202      935.812 
----------------------------------------------------------------------------------------------------------------</code></pre>
</div>
<p>The output of the function shows the statistical measures and parameter estimates of the model built.</p>
<h4 id="variable-selection-methods">Variable selection methods</h4>
<p>The following variable selection methods are offered:</p>
<ul>
<li>ols_step_all_possible()</li>
<li>ols_step_best_subset()</li>
<li>ols_step_forward_p()</li>
<li>ols_step_backward_p()</li>
<li>ols_step_both_p()</li>
<li>ols_step_forward_aic()</li>
<li>ols_step_backward_aic()</li>
<li>ols_step_both_aic()</li>
</ul>
<p>These methods can be provided for users to choose in training the model. The key arguments that can be made available for user to select are:</p>
<ul>
<li><code>prem</code>: the p-value threshold for variable selection (only for methods that are based on p-value)</li>
<li><code>progress</code>: to display the details of the model output (true or false)</li>
</ul>
<p>In this method, users have to first build a model using <code>lm()</code> and pass the model into the functions. Users can select can all the relevant variables or select specific variables. A sample implementation of <code>ols_step_both_p()</code> using is shown below:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Remove categorical variables, lat-long and calculated variables</span>
<span class='va'>covid_deaths_mlr</span> <span class='op'>&lt;-</span> <span class='va'>covid_deaths_tidy</span> <span class='op'>%&gt;%</span> <span class='fu'>select</span><span class='op'>(</span><span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>continent</span>,
                                               <span class='va'>location</span>,
                                               <span class='va'>case_fatality_rate</span>,
                                               <span class='va'>lat</span>,
                                               <span class='va'>long</span>,
                                               <span class='va'>total_deaths_log</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># remove the transformed counterpart</span>

<span class='va'>model</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>total_deaths</span> <span class='op'>~</span> <span class='va'>total_cases</span> <span class='op'>+</span> <span class='va'>positive_rate</span> <span class='op'>+</span> <span class='va'>hospital_beds_per_thousand</span> <span class='op'>+</span> <span class='va'>gdp_per_capita</span>, 
            data <span class='op'>=</span> <span class='va'>covid_deaths_mlr</span><span class='op'>)</span>

<span class='va'>model_mlr</span> <span class='op'>&lt;-</span> <span class='fu'>ols_step_both_p</span><span class='op'>(</span><span class='va'>model</span>,
                             prem <span class='op'>=</span> <span class='fl'>0.05</span>,
                             progress <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Stepwise Selection Method   
---------------------------

Candidate Terms: 

1. total_cases 
2. positive_rate 
3. hospital_beds_per_thousand 
4. gdp_per_capita 

We are selecting variables based on p value...

Variables Entered/Removed: 

- total_cases added 
- positive_rate added 

No more variables to be added/removed.


Final Model Output 
------------------

                            Model Summary                             
---------------------------------------------------------------------
R                       0.958       RMSE                   14618.384 
R-Squared               0.917       Coef. Var                105.460 
Adj. R-Squared          0.917       MSE                213697158.480 
Pred R-Squared          0.895       MAE                     5113.360 
---------------------------------------------------------------------
 RMSE: Root Mean Square Error 
 MSE: Mean Square Error 
 MAE: Mean Absolute Error 

                                       ANOVA                                         
------------------------------------------------------------------------------------
                        Sum of                                                      
                       Squares         DF         Mean Square       F          Sig. 
------------------------------------------------------------------------------------
Regression    469786581005.606          2    234893290502.803    1099.188    0.0000 
Residual       42312037379.120        198       213697158.480                       
Total         512098618384.726        200                                           
------------------------------------------------------------------------------------

                                        Parameter Estimates                                         
---------------------------------------------------------------------------------------------------
        model         Beta    Std. Error    Std. Beta      t        Sig         lower        upper 
---------------------------------------------------------------------------------------------------
  (Intercept)    -1381.483      1604.383                 -0.861    0.390    -4545.355     1782.389 
  total_cases        0.019         0.000        0.955    46.714    0.000        0.018        0.020 
positive_rate    34306.391     13080.570        0.054     2.623    0.009     8511.278    60101.505 
---------------------------------------------------------------------------------------------------</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>model_mlr</span>
</code></pre>
</div>
<pre><code>
                                  Stepwise Selection Summary                                   
----------------------------------------------------------------------------------------------
                          Added/                   Adj.                                           
Step      Variable       Removed     R-Square    R-Square     C(p)        AIC          RMSE       
----------------------------------------------------------------------------------------------
   1     total_cases     addition       0.915       0.914    6.1870    4435.4490    14832.7296    
   2    positive_rate    addition       0.917       0.917    1.3650    4430.5848    14618.3843    
----------------------------------------------------------------------------------------------</code></pre>
</div>
<p>Similar to <code>ols_regress()</code>, the output shows the statistical measures, parameter estimates, and includes the stepwise selection summary. When <code>progress</code> is set to <code>TRUE</code>, the output will additionally have the “Stepwise Selection Method” section.</p>
<p>There are plots to show the model summary results more visually at each step with the code below. Note that no arguments can be passed into the function to add clarity and aesthetics to the visualisation.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>model_mlr</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="covid-deaths_files/figure-html5/mlr3-1.png" width="624" /><img src="covid-deaths_files/figure-html5/mlr3-2.png" width="624" /></p>
</div>
<h4 id="summary">Summary</h4>
<p>Users can be given the flexibility to select the variables (all or user-specified) and method (least squares or one of the variable selection methods), and have the option to have a graphical view of the model summary results. For the least squares method and the variable selection method using p-values, users have the additional option to indicate if there are interaction terms in the model and the p-value (defaulted to 0.05) respectively.</p>
<h3 id="model-diagnostics">Model Diagnostics</h3>
<p>There are many plots and tests available to provide assessments of the model built. The plots can be called individually, or the <code>ols_plot_diagnostics()</code> function can be called to provide a collection of selected plots. The only input argument is the base model (before variable selection).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>ols_plot_diagnostics</span><span class='op'>(</span><span class='va'>model</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="covid-deaths_files/figure-html5/mlr4-1.png" width="624" /><img src="covid-deaths_files/figure-html5/mlr4-2.png" width="624" /><img src="covid-deaths_files/figure-html5/mlr4-3.png" width="624" /></p>
</div>
<p>The 10 selected plots covers several key model diagnostics. The table below shows the common model diagnostics performed for MLR and the corresponding plot(s) that fulfils the task.</p>
<table>
<colgroup>
<col style="width: 72%" />
<col style="width: 28%" />
</colgroup>
<thead>
<tr class="header">
<th>Diagnostics Task</th>
<th>Plots</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Model fit assessment</td>
<td>Observed by Predicted, Residual Fit Spread Plots (fit-mean and residual)</td>
</tr>
<tr class="even">
<td>MLR assumptions validation <br><em>(linearity of data, normality of errors,<br>homogeneity of residual variance,<br>independent residual error terms)</em></td>
<td>Residual vs Predicted Values, Normal Q-Q Plot, Residual Fit Spread Plots (fit-mean and residual), Residual Histogram, Residual Box Plot</td>
</tr>
<tr class="odd">
<td>Measures of influence</td>
<td>Outlier and Leverage Diagnostics, Deleted Studentized Residual vs Predicted Values, Cook’s D Chart</td>
</tr>
<tr class="even">
<td>Collinearity</td>
<td><em>none</em></td>
</tr>
</tbody>
</table>
<p>As there are no diagnostics for collinearity provided by <code>ols_plot_diagnostics()</code>, let us take a look at the specific collinearity tests provided by <em>olsrr</em>.</p>
<p>There are three collinearity diagnostics available in the package: (1) variance inflation factors (VIF); (2) tolerance; and (3) condition index. Each diagnostic can be called individually or collectively in the <code>ols_coll_diag()</code> function. For ease of user comparison, the collective function will be used.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>ols_coll_diag</span><span class='op'>(</span><span class='va'>model</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Tolerance and Variance Inflation Factor
---------------------------------------
                   Variables Tolerance      VIF
1                total_cases 0.9795477 1.020879
2              positive_rate 0.8951463 1.117136
3 hospital_beds_per_thousand 0.9036779 1.106589
4             gdp_per_capita 0.8060706 1.240586


Eigenvalue and Condition Index
------------------------------
  Eigenvalue Condition Index   intercept total_cases positive_rate
1  3.0615041        1.000000 0.018682404 0.014021638   0.024964490
2  0.9052488        1.839007 0.003907367 0.955336792   0.009912077
3  0.6235431        2.215819 0.003027443 0.016625014   0.301610705
4  0.2723608        3.352703 0.017811228 0.012410693   0.091542951
5  0.1373433        4.721324 0.956571558 0.001605863   0.571969777
  hospital_beds_per_thousand gdp_per_capita
1                0.029394046   2.846731e-02
2                0.007853068   2.553016e-05
3                0.016617459   3.018784e-01
4                0.863763486   3.696838e-01
5                0.082371941   2.999449e-01</code></pre>
</div>
<h4 id="summary-1">Summary</h4>
<p>Based on the model built, users can have the option to call the model diagnostics, which will include both the plots and the collinearity diagnostics.</p>
<h1 id="storyboard-for-shiny-app">Storyboard for Shiny app</h1>
<p>There will be two tabs in the Shiny app sub-module on COVID-19 deaths: bivariate and multivariate analysis.</p>
<h2 id="bivariate-analysis">Bivariate analysis</h2>
<p>To enhance user experience, users would only need to indicate the x and y variables in the bivariate analysis. Based on the y variable that user selected (cumulative number of deaths or fatality rate), the scatterplot or funnel plot will be shown. After user has selected the variables, plot-specific options will show on the app for further calibration by the user.</p>
<p>The figure below shows a sketch of the storyboard for the bivariate analysis tab.</p>
<figure>
<img src="images/bivariate.jpg" alt="Figure 6: Bivariate analysis storyboard" /><figcaption aria-hidden="true">Figure 6: Bivariate analysis storyboard</figcaption>
</figure>
<p>In order not to load the page, a submit button is proposed. However, during the Shiny app development, we will experiment without delaying the reaction of the plot to compare the time lag.</p>
<h2 id="multivariate-analysis-1">Multivariate analysis</h2>
<p>Similar to bivariate, users will need to select the y and x variables for the multivariate analysis. Users will then need to select the regression model and its corresponding model options, as discussed in earlier sections. Users can also indicate whether to display the plots for the model summary results and/or the model diagnostics.</p>
<figure>
<img src="images/multivariate.jpg" alt="Figure 7: Multivariate analysis storyboard" /><figcaption aria-hidden="true">Figure 7: Multivariate analysis storyboard</figcaption>
</figure>
<p>The output panel will display the results according to the user selection on the left panel. Likewise, the use of the submit button to delay the outputs will be tested during app development.</p>
<p><em>- End of assignment -</em></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
